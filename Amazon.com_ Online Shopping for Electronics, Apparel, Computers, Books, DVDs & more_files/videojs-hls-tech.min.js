var registerTwitchTechForVideoJs=function(t){var i={};function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=i,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:e})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var i=t&&t.t?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=24)}([function(t,i){var n={CLEAR_KEY:{keySystem:"org.w3.clearkey",uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"},FAIRPLAY:{keySystem:"com.apple.fps.2_0",certUrl:"https://fp-keyos-twitch.licensekeyserver.com/cert/a17fd33d3843df9b17679ccf50a419b2.der",licenseUrl:"https://fp-keyos-twitch.licensekeyserver.com/getkey",uuid:"94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"},PLAYREADY:{keySystem:"com.microsoft.playready",licenseUrl:"https://pr-keyos-twitch.licensekeyserver.com/core/rightsmanager.asmx",uuid:"9a04f079-9840-4286-ab92-e65be0885f95"},WIDEVINE:{keySystem:"com.widevine.alpha",licenseUrl:"https://wv-keyos-twitch.licensekeyserver.com",uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"}},e={"com.widevine.alpha":n.WIDEVINE,"com.microsoft.playready":n.PLAYREADY,"com.apple.fps.2_0":n.FAIRPLAY,"org.w3.clearkey":n.CLEAR_KEY},r={NO_CDM_SUPPORT:{code:4,message:"Your browser does not support any DRM Content Decryption Modules"},SESSION_UPDATE:{code:4,message:"There was an issue while updating DRM License"},LICENSE_REQUEST:{code:4,message:"Error while requesting DRM license"},KEY_SESSION_CREATION:{code:4,message:"Error creating key session"},KEY_SESSION_INTERNAL:{code:4,message:"Encryption key not usable because of internal error in CDM"},NO_PSSH_FOUND:{code:4,message:"Unable to find valid CDM support on media"}};t.exports={KEY_SYSTEMS:n,KEY_SYSTEMS_BY_STRING:e,AUTH_XML_URL:"https://vizima.twitch.tv/api/authxml/",ERRORS:r}},function(t){t.exports={buffercontrol:{rebufferPenalty:1}}},function(t){t.exports={buffercontrol:{liveSpeedUpRate:1}}},function(t,i,n){var e={"./nospd.json":2,"./rebuf1.json":1};function r(t){var i=s(t);return n(i)}function s(t){var i=e[t];if(!(i+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return i}r.keys=function(){return Object.keys(e)},r.resolve=s,t.exports=r,r.id=3},function(t,i){t.exports={PLAYER_LOADED_IN_WORKER:"player_loaded_in_worker",HLS_MASTER_PLAYLIST_REQUEST:"master_manifest_request",HLS_MASTER_PLAYLIST_READY:"master_manifest_ready",HLS_MEDIA_PLAYLIST_REQUEST:"variant_request",HLS_MEDIA_PLAYLIST_READY:"variant_ready"}},function(t,i){t.exports={UNKNOWN:"Unspecified",FILE:"File",PLAYLIST:"Playlist",SEGMENT:"Segment",SOURCE:"Source",DECODER:"Decode",RENDERER:"Render"}},function(t,i){t.exports={GENERIC:"Error",NOT_SUPPORTED:"ErrorNotSupported",NO_SOURCE:"ErrorNoSource",INVALID_DATA:"ErrorInvalidData",INVALID_STATE:"ErrorInvalidState",INVALID_PARAMETER:"ErrorInvalidParameter",TIMEOUT:"ErrorTimeout",INVALID_OUTPUT:"ErrorInvalidOutput",INTERNAL:"ErrorInternal",NETWORK:"ErrorNetwork",NETWORK_IO:"ErrorNetworkIO",AUTHORIZATION:"ErrorAuthorization",NOT_AVAILABLE:"ErrorNotAvailable",EXCEPTION:"ErrorException"}},function(t,i){t.exports={ID3:"MetaID3",CAPTION:"MetaCaption",SPLICE_OUT:"MetaSpliceOut",SPLICE_IN:"MetaSpliceIn"}},function(t,i){t.exports={IDLE:"Idle",READY:"Ready",BUFFERING:"Buffering",PLAYING:"Playing",ENDED:"Ended"}},function(t,i){t.exports={INITIALIZED:"PlayerInitialized",QUALITY_CHANGED:"PlayerQualityChanged",AUTO_SWITCH_QUALITY_CHANGED:"PlayerAutoSwitchQualityChanged",DURATION_CHANGED:"PlayerDurationChanged",VOLUME_CHANGED:"PlayerVolumeChanged",MUTED_CHANGED:"PlayerMutedChanged",PLAYBACK_RATE_CHANGED:"PlayerPlaybackRateChanged",REBUFFERING:"PlayerRebuffering",AUDIO_BLOCKED:"PlayerAudioBlocked",PLAYBACK_BLOCKED:"PlayerPlaybackBlocked",ERROR:"PlayerError",TRACKING:"PlayerTracking",TIME_UPDATE:"PlayerTimeUpdate",BUFFER_UPDATE:"PlayerBufferUpdate",SEEK_COMPLETED:"PlayerSeekCompleted",PROFILE:"PlayerProfile",TWITCH_INFO:"PlayerTwitchInfo",WORKER_ERROR:"PlayerWorkerError",TIMED_METADATA:"TimedMetadata"}},function(t,i){t.exports={STATE_CHANGED:"ClientStateChanged",STATS:"ClientStats",SAVE_ITEM:"ClientSaveItem",CONFIGURE:"ClientConfigure",REINIT:"ClientReinit",ENQUEUE:"ClientEnqueue",SET_TIMESTAMP_OFFSET:"ClientSetTimestampOffset",PLAY:"ClientPlay",PAUSE:"ClientPause",REMOVE:"ClientRemove",RESET:"ClientReset",SEEK_TO:"ClientSeekTo",SET_PLAYBACK_RATE:"ClientSetPlaybackRate",ADD_CUE:"ClientAddCue"}},function(t,i){t.exports={CREATE:"WorkerCreate",DELETE:"WorkerDelete",SINK_UPDATE:"WorkerSinkUpdate",SINK_IDLE:"WorkerSinkIdle",SINK_ERROR:"WorkerSinkError",SINK_CUE:"WorkerSinkCue",LOAD:"WorkerLoad",PLAY:"WorkerPlay",PAUSE:"WorkerPause",SEEK_TO:"WorkerSeekTo",SET_LOOPING:"WorkerSetLooping",SET_QUALITY:"WorkerSetQuality",REMOVE_QUALITIES:"WorkerRemoveQualities",SET_AUTO_SWITCH_QUALITY:"WorkerSetAutoSwitchQuality",SET_AUTO_MAX_VIDEO_SIZE:"WorkerSetAutoMaxVideoSize",SET_VOLUME:"WorkerSetVolume",SET_MUTED:"WorkerSetMuted",SET_PLAYBACK_RATE:"WorkerSetPlaybackRate",SET_AD_INSERTION_ENABLED:"WorkerSetAdInsertionEnabled",SET_LIVE_MAX_LATENCY:"WorkerSetLiveMaxLatency",SET_LIVE_LOW_LATENCY_ENABLED:"WorkerSetLiveLowLatencyEnabled",SET_ANALYTICS_SEND_EVENTS:"WorkerSetAnalyticsSendEvents",SET_MIN_BUFFER:"WorkerSetMinBuffer",SET_MAX_BUFFER:"WorkerSetMaxBuffer"}},function(t,i){},function(t,i,n){function e(t){var i=o([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]).filter(function(i){return i.rule&&i.rule.test(t)})[0];return i?i.name:null}function r(){return"undefined"==typeof navigator&&"undefined"!=typeof process?{name:"node",version:process.version.slice(1),os:n(12).type().toLowerCase()}:null}function s(t){var i=o([["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/]]);if(!t)return null;var n=i.map(function(i){var n=i.rule.exec(t),e=n&&n[1].split(/[._]/).slice(0,3);return e&&e.length<3&&(e=e.concat(1==e.length?[0,0]:[0])),n&&{name:i.name,version:e.join(".")}}).filter(Boolean)[0]||null;return n&&(n.os=e(t)),n}function o(t){return t.map(function(t){return{name:t[0],rule:t[1]}})}t.exports={detect:function(){var t=r();return t||("undefined"!=typeof navigator?s(navigator.userAgent):null)},detectOS:e,getNodeVersion:r,parseUserAgent:s}},function(t,i,n){var e=n(13).detect()||{name:"",version:"",os:""},r=e.version.split(".");e.major=parseInt(r[0],10),e.minor=parseInt(r[1],10),e.patch=parseInt(r[2],10),t.exports=e},function(t,i){!function(i){var n=setTimeout;function e(){}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this.e=0,this.u=!1,this.h=void 0,this.a=[],c(t,this)}function s(t,i){for(;3===t.e;)t=t.h;0!==t.e?(t.u=!0,r.f(function(){var n=1===t.e?i.onFulfilled:i.onRejected;if(null!==n){var e;try{e=n(t.h)}catch(t){return void u(i.promise,t)}o(i.promise,e)}else(1===t.e?o:u)(i.promise,t.h)})):t.a.push(i)}function o(t,i){try{if(i===t)throw new TypeError("A promise cannot be resolved with itself.");if(i&&("object"==typeof i||"function"==typeof i)){var n=i.then;if(i instanceof r)return t.e=3,t.h=i,void h(t);if("function"==typeof n)return void c(function(t,i){return function(){t.apply(i,arguments)}}(n,i),t)}t.e=1,t.h=i,h(t)}catch(i){u(t,i)}}function u(t,i){t.e=2,t.h=i,h(t)}function h(t){2===t.e&&0===t.a.length&&r.f(function(){t.u||r.v(t.h)});for(var i=0,n=t.a.length;i<n;i++)s(t,t.a[i]);t.a=null}function c(t,i){var n=!1;try{t(function(t){n||(n=!0,o(i,t))},function(t){n||(n=!0,u(i,t))})}catch(t){if(n)return;n=!0,u(i,t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,i){var n=new this.constructor(e);return s(this,new function(t,i,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof i?i:null,this.promise=n}(t,i,n)),n},r.all=function(t){var i=Array.prototype.slice.call(t);return new r(function(t,n){if(0===i.length)return t([]);var e=i.length;function r(s,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(t){r(s,t)},n)}i[s]=o,0==--e&&t(i)}catch(t){n(t)}}for(var s=0;s<i.length;s++)r(s,i[s])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(i){i(t)})},r.reject=function(t){return new r(function(i,n){n(t)})},r.race=function(t){return new r(function(i,n){for(var e=0,r=t.length;e<r;e++)t[e].then(i,n)})},r.f="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){n(t,0)},r.v=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},r.y=function(t){r.f=t},r.S=function(t){r.v=t},void 0!==t&&t.exports?t.exports=r:i.Promise||(i.Promise=r)}(this)},function(t,i){var n=t.exports=function(){this.T=[],this.w=0,this.A=0};n.prototype.push=function(t){this.A===this.T.length?this.T.push(t):this.T[this.A]=t,this.A++},n.prototype.pop=function(){var t=this.T[this.w];return this.T[this.w]=null,this.w++,this.empty()&&(this.w=0,this.A=0),t},n.prototype.size=function(){return this.A-this.w},n.prototype.empty=function(){return this.w>=this.A}},function(t,i){t.exports={licenseRequestData:function(t){var i=String.fromCharCode.apply(null,new Uint16Array(t)),n=(new DOMParser).parseFromString(i,"application/xml");return{headers:function(t){for(var i={},n=t.getElementsByTagName("name"),e=t.getElementsByTagName("value"),r=0;r<n.length;r++)i[n[r].childNodes[0].nodeValue]=e[r].childNodes[0].nodeValue;return i}(n),body:function(t){var i=null;if(t.getElementsByTagName("Challenge").length>0&&t.getElementsByTagName("Challenge")[0]){var n=t.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;n&&(i=atob(n))}return i}(n)}}}},function(t,i,n){var e=n(0).KEY_SYSTEMS,r=function(t){return t instanceof Uint8Array||t instanceof Uint16Array?t.buffer:t},s=function(t){var i=[];return t.forEach(function(t){Object.keys(e).forEach(function(n){var r=e[n];r.uuid===t&&i.push(r)})}),i},o=function(t){if(null===t)return[];for(var i=new DataView(t.buffer||t),n=[],e=0;;){var r,s,o;if(e>=i.buffer.byteLength)break;if(r=e+i.getUint32(e),e+=4,i.getUint32(e)===h("pssh"))if(e+=4,0===(s=i.getUint8(e))||1===s){var u;for(e++,e+=3,o="",u=0;u<4;u++)o+=c(i.getUint8(e+u));for(e+=4,o+="-",u=0;u<2;u++)o+=c(i.getUint8(e+u));for(e+=2,o+="-",u=0;u<2;u++)o+=c(i.getUint8(e+u));for(e+=2,o+="-",u=0;u<2;u++)o+=c(i.getUint8(e+u));for(e+=2,o+="-",u=0;u<6;u++)o+=c(i.getUint8(e+u));e+=6,o=o.toLowerCase(),i.getUint32(e),e+=4,n.push(o),e=r}else e=r;else e=r}return n};function u(t,i){for(var n=new DataView(t.buffer,t.byteOffset,t.byteLength),e=h(i),r=0;r<t.byteLength;){var s=n.getUint32(r);if(n.getUint32(r+4)===e)return t.subarray(r+8,r+s);r+=s}return new Uint8Array}function h(t){return(t.charCodeAt(0)<<24)+(t.charCodeAt(1)<<16)+(t.charCodeAt(2)<<8)+t.charCodeAt(3)}function c(t){var i=t.toString(16);return 1===i.length?"0"+i:i}function a(t){for(var i=atob(t),n=i.length,e=new Uint8Array(n),r=0;r<n;r++)e[r]=i.charCodeAt(r);return e}t.exports={arrayBuffersEqual:function(t,i){if((t=r(t))===(i=r(i)))return!0;if(t.byteLength!==i.byteLength)return!1;for(var n=new DataView(t),e=new DataView(i),s=0;s<n.byteLength;s++)if(n.getUint8(s)!==e.getUint8(s))return!1;return!0},httpRequest:function(t,i){return new Promise(function(n,e){var r=new XMLHttpRequest;for(var s in r.open(i.method,t,!0),i.headers)i.headers.hasOwnProperty(s)&&r.setRequestHeader(s,i.headers[s]);r.responseType=i.responseType,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)n(r.response);else{var t="Request Error: Status "+r.status;console.warn(t),e(t)}},r.send(i.body)})},parsePSSHSupportFromInitData:function(t){var i=o(t);return s(i)},contentIdFromInitData:function(t){return function(t){for(var i="",n=0;n<t.length;n++)i+=c(t[n]);return i}(u(u(a(JSON.parse(String.fromCharCode.apply(null,t)).sinf[0]),"schi"),"tenc").subarray(8,24))},decodeBase64:a,encodeBase64:function(t){return btoa(String.fromCharCode.apply(null,t))},checkErrorFormat:function(t){return{code:t.code||4,message:t.message||""}},getParamsFromUrl:function(t){for(var i={},n=t.substring(1).split("&"),e=0;e<n.length;e++){var r=n[e].split("=");i[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return i}}},function(t,i,n){var e=n(0),r=n(18),s=n(17),o=e.KEY_SYSTEMS,u=e.KEY_SYSTEMS_BY_STRING,h=e.AUTH_XML_URL,c=r.arrayBuffersEqual,a=r.httpRequest,f=r.parsePSSHSupportFromInitData,l=r.contentIdFromInitData,d=r.decodeBase64,v=r.encodeBase64,E=r.checkErrorFormat,p=r.getParamsFromUrl,y=e.ERRORS,m=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}],S=function(t){this._=t.video,this.b=null,this.I=null,this.g=void 0,this.L=t.onerror,this.O=null,this.P=!1,this.R=[],this.C=[],this.N="",this._.addEventListener("encrypted",this.M.bind(this),!1),this._.addEventListener("webkitneedkey",this.D.bind(this),!1)};S.prototype.configure=function(t){var i=new URL(t).pathname.split("/"),n=i[i.length-1].split(".")[0],e=p(t),r=e.token,s=e.sig;this.N=h+n+"?token="+encodeURIComponent(r)+"&sig="+s},S.prototype.reset=function(){this.P=!1,this.C=[]},S.prototype.isProtected=function(){return this.P},S.prototype.U=function(t){for(var i=0;i<this.C.length;i++){var n=this.C[i];if(n.initData&&c(n.initData,t))return!0}return!1},S.prototype.W=function(){if(null===this.b||0===this.b.length)return Promise.reject(y.NO_PSSH_FOUND);var t=Promise.reject();return this.b.forEach(function(i){t=t.catch(function(t){return navigator.requestMediaKeySystemAccess(i.keySystem,m)})}),t=t.catch(function(){return Promise.reject(y.NO_CDM_SUPPORT)})},S.prototype.M=function(t){var i;if(this.P=!0,!this.U(t.initData))return this.C.push({initData:t.initData}),null===this.b&&(this.b=f(t.initData)),void 0===this.g&&(this.g=null,this.R=[],i=this.W().then(function(t){return this.I=u[t.keySystem],t.createMediaKeys()}.bind(this)).then(this.B.bind(this)).catch(function(t){this.L(E(t))}.bind(this))),this.F(t.initDataType,t.initData),i},S.prototype.B=function(t){return this.g=t,this.R.forEach(function(t){this.Y(t.initDataType,t.initData)}.bind(this)),this.R=[],this._.setMediaKeys(this.g)},S.prototype.F=function(t,i){this.g?this.Y(t,i).catch(function(t){this.L(y.KEY_SESSION_CREATION)}.bind(this)):this.R.push({initDataType:t,initData:i})},S.prototype.Y=function(t,i){var n=this.g.createSession();return n.addEventListener("message",this.K.bind(this),!1),n.addEventListener("keystatuseschange",function(t){this.j(n,t,i)}.bind(this),!1),n.generateRequest(t,i)},S.prototype.j=function(t,i,n){var e=!1;t.keyStatuses.forEach(function(t,i){switch(t){case"expired":e=!0;break;case"internal-error":this.L(y.KEY_SESSION_INTERNAL)}}.bind(this)),e&&t.close().then(function(){this.V(n)}.bind(this))},S.prototype.V=function(t){for(var i=0;i<this.C.length;i++){if(this.C[i].initData===t)return void this.C.splice(i,1)}},S.prototype.K=function(t){var i=t.target;this.x(t.message).then(function(t){return i.update(t).catch(function(){return Promise.reject(y.SESSION_UPDATE)})}).catch(function(t){this.L(E(t))}.bind(this))},S.prototype.x=function(t){if(this.I===o.CLEAR_KEY){var i=JSON.parse((new TextDecoder).decode(t)).kids.map(function(t){return{kty:"oct",alg:"A128KW",kid:t,k:t}}),n=(new TextEncoder).encode(JSON.stringify({keys:i}));return Promise.resolve(n)}return a(this.N,{method:"GET",responseType:"text"}).then(function(i){return this.Q(t,i)}.bind(this)).catch(function(){return Promise.reject(y.LICENSE_REQUEST)})},S.prototype.Q=function(t,i){var n={method:"POST",responseType:"arraybuffer",body:t,headers:{customdata:i,"Content-Type":"application/octet-stream"}};if(this.I===o.PLAYREADY){var e=s.licenseRequestData(t);n.body=e.body,n.headers=Object.assign(n.headers,e.headers)}return a(this.I.licenseUrl,n)},S.prototype.D=function(t){this.P=!0,this.I=o.FAIRPLAY,a(o.FAIRPLAY.certUrl,{method:"GET",responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}}).then(function(i){return this.G(t,i)}.bind(this)).catch(function(t){this.L(E(t))}.bind(this))},S.prototype.G=function(t,i){return new Promise(function(n,e){this._.webkitKeys||this._.webkitSetMediaKeys(new WebKitMediaKeys(o.FAIRPLAY.keySystem)),this._.webkitKeys||e("Issue setting fairplay media keys");var r=l(t.initData),s=this._.webkitKeys.createSession("video/mp4",t.initData);if(!s)return e("Could not create key session");s.contentId=r,s.addEventListener("webkitkeymessage",function(t){var n=t.target,s=t.message;"certificate"===String.fromCharCode.apply(null,t.message)?n.update(new Uint8Array(i)):this.H(s,r).then(function(t){var i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),n.update(d(i))}).catch(e)}.bind(this)),s.addEventListener("webkitkeyadded",n),s.addEventListener("webkitkeyerror",e)}.bind(this))},S.prototype.H=function(t,i){return a(this.N,{method:"GET",responseType:"text"}).then(function(n){var e=o.FAIRPLAY.licenseUrl,r="spc="+v(t)+"&assetId="+i;return a(e,{method:"POST",body:r,responseType:"text",headers:{"Content-Type":"application/x-www-form-urlencoded",customdata:n}})}).catch(function(t){return Promise.reject(y.LICENSE_REQUEST)})},t.exports=S},function(t,i){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){(function(i){var e=n(19),r=n(16),s=i.Promise||n(15),o=.1,u=t.exports=function(t){this._=document.createElement("video"),this.q={metadata:this._.addTextTrack("metadata"),format:this._.addTextTrack("metadata")},this.X=Object.create(null),this.$=t.onerror,this.J="",this.z=new l(this._,t),this.Z=new e({video:this._,onerror:this.$}),this.reset()};function h(){}function c(t){for(var i=t.buffered,n=t.currentTime,e=0;e<i.length;e++){var r=i.start(e),s=i.end(e);if(!(s<=n)){if(r-o>n)break;for(var u=e+1;u<i.length&&!(i.start(u)-s>o);u++)s=i.end(u);for(var h=e-1;h>=0&&!(r-i.end(h)>o);h--)r=i.start(h);return{start:Math.min(r,n),end:s}}}return{start:n,end:n}}function a(t){return new s(function(i,n){var e=new MediaSource;e.addEventListener("sourceopen",function t(){e.removeEventListener("sourceopen",t),"open"===e.readyState?(e.duration=1<<30,i(e)):n(new Error("MediaSource not opened"))}),t.src=URL.createObjectURL(e)})}function f(t,i){this._=t,this.tt=i,this.it=new r,this.tt.addEventListener("updateend",this.nt.bind(this))}function l(t,i){this.et=i.onidle,this.rt=i.onstop,this.$=i.onerror,this.st=i.onbufferupdate,this.ot=i.ontimeupdate,this._=t,this.ut=0,this.ht=[],this.ct=!0,this.at=!0,this.ft=!1,this.lt=0,this.dt=0;var n=function(t,i){this._.addEventListener(t,i),this.ht.push(function(){this._.removeEventListener(t,i)}.bind(this))}.bind(this);n("play",this.vt.bind(this)),n("pause",this.Et.bind(this)),n("timeupdate",this.pt.bind(this)),n("error",this.yt.bind(this)),n("webkitbeginfullscreen",this.mt.bind(this)),n("webkitendfullscreen",this.St.bind(this))}u.prototype.configure=function(t){if(t.path&&(this.J=t.path,this.Z.configure(t.path),t.passthrough))this._.src=t.path;else{var i=t.trackID,n=t.codec;n?this.X[i]=n:n=this.X[i],this.Tt||(this.Tt=a(this._)),i in this.wt||this.At(i,n,0)}},u.prototype.enqueue=function(t){var i=this.wt[t.trackID];i&&i.then(function(i){i.appendBuffer(t.buffer)},h)},u.prototype.setTimestampOffset=function(t){var i=this.wt[t.trackID];i&&(this._t[t.trackID]=t.offset,i.then(function(i){i.setTimestampOffset(t.offset)},h))},u.prototype.captureGesture=function(){this._.paused&&(s.resolve(this._.play()).catch(h),this._.pause())},u.prototype.play=function(){return this.z.play()},u.prototype.pause=function(){this.z.pause()},u.prototype.reset=function(){if(this.Tt=null,this.wt=Object.create(null),this._t=Object.create(null),this.J="",this.z.pause(),this.Z.reset(),this.bt(0,1/0),this._.src){var t=this._.src;this._.removeAttribute("src"),this._.load(),URL.revokeObjectURL(t)}},u.prototype.reinit=function(){this.z.pause();var t=this._.currentTime,i=this.buffered();this.bt(i.start,i.end);var n=this._.src;for(var e in this.Tt=a(this._),URL.revokeObjectURL(n),this.wt)this.At(e,this.X[e],this._t[e]);this._.currentTime=t},u.prototype.remove=function(t){var i=t.start,n=t.end;function e(t){t.remove(i,n)}for(var r in this.wt)this.wt[r].then(e);this.bt(i,n)},u.prototype.bt=function(t,i){for(var n in this.q)if(this.q.hasOwnProperty(n))for(var e=this.q[n],r=e.cues,s=r.length-1;s>=0;s--){var o=r[s],u=o.startTime;if(u<t)break;u<i&&e.removeCue(o)}},u.prototype.seekTo=function(t){var i=c(this._);if(t>=i.start&&t<i.end){function n(t){return new s(function(i){t.schedule(i)})}var e=[];for(var r in this.wt)e.push(this.wt[r].then(n));s.all(e).then(function(){this._.currentTime=t}.bind(this))}else this._.currentTime=t},u.prototype.setPlaybackRate=function(t){this._.playbackRate=t},u.prototype.addCue=function(t,n,e,r){n<=0&&(n=1);var s=new(i.VTTCue||i.TextTrackCue)(t,t+n,"");s.onenter=r;var o=this.q[e];try{o&&o.addCue(s)}catch(t){}},u.prototype.currentTime=function(){return this._.currentTime},u.prototype.buffered=function(){return c(this._)},u.prototype.bufferDuration=function(){return c(this._).end-this._.currentTime},u.prototype.decodedFrames=function(){return"number"==typeof this._.webkitDecodedFrameCount?this._.webkitDecodedFrameCount:"number"==typeof this._.mozDecodedFrames?this._.mozDecodedFrames:-1},u.prototype.droppedFrames=function(){if("number"==typeof this._.webkitDroppedFrameCount)return this._.webkitDroppedFrameCount;if("function"==typeof this._.getVideoPlaybackQuality){var t=this._.getVideoPlaybackQuality();return t?t.droppedVideoFrames:-1}return-1},u.prototype.videoElement=function(){return this._},u.prototype.isProtected=function(){return this.Z.isProtected()},u.prototype.srcUrl=function(){return this.J},u.prototype.delete=function(){this.reset(),this.z.delete(),this.It=null,this.gt=null,this._=null,this.q=null},u.prototype.At=function(t,i,n){var e=this.Tt.then(function(t){var e=t.addSourceBuffer("video/mp4;"+i);return e.timestampOffset=n,new f(this._,e)}.bind(this));e.catch(function(t){this.$({code:4,message:t.toString()})}.bind(this)),this.wt[t]=e},f.prototype.appendBuffer=function(t){this.schedule(function(i){i.appendBuffer(t)})},f.prototype.setTimestampOffset=function(t){this.schedule(function(i){i.timestampOffset=t})},f.prototype.remove=function(t,i){this.schedule(function(n){n.remove(t,i)})},f.prototype.schedule=function(t){this.it.empty()&&!this.kt()?t(this.tt):this.it.push(t)},f.prototype.nt=function(){for(;!this.it.empty()&&!this.kt();)this.it.pop()(this.tt)},f.prototype.kt=function(){return!this.tt||this.tt.updating||null!==this._.error},l.prototype.delete=function(){this.ht.forEach(function(t){t()}),clearInterval(this.ut),this._=null},l.prototype.play=function(){this.at=!1;var t=s.resolve(this._.play());return t.catch(this.Lt.bind(this)),t},l.prototype.pause=function(){this.at=!0,this._.pause()},l.prototype.vt=function(){this.lt=this._.currentTime,clearInterval(this.ut),this.ut=setInterval(this.Ot.bind(this),2e3)},l.prototype.Et=function(){clearInterval(this.ut),this.Lt()},l.prototype.pt=function(){this.ot();var t=c(this._);this.Pt(t),this.Rt(t)},l.prototype.yt=function(){var t=this._.error;this.$({code:t.code,message:t.message||""})},l.prototype.mt=function(){this.ft=!0},l.prototype.St=function(){this.ft=!1},l.prototype.Ot=function(){this._.paused?clearInterval(this.ut):this._.currentTime===this.lt?this.Ct():(this.Pt(c(this._)),this.lt=this._.currentTime)},l.prototype.Pt=function(t){t.end!==this.dt&&(this.dt=t.end,this.st())},l.prototype.Rt=function(t){if(this._.paused)this.ct=!0;else{var i=t.end-this._.currentTime<o;i&&!this.ct&&this.et(),this.ct=i}},l.prototype.Lt=function(t){!this._.paused||this._.error||this.at||this.ft||this.rt()},l.prototype.Ct=function(){var t=c(this._).end-this._.currentTime>o,i=this._.buffered;if(i.length>1||!t)for(var n=this._.currentTime,e=0;e<i.length;e++){var r=i.start(e),s=i.end(e);if(n<r&&s-r>o)return console.warn("jumping "+(r-n)+"s gap"),void(this._.currentTime=r+o)}t&&(console.warn("stalled within buffer"),this._.currentTime+=o)}}).call(this,n(20))},function(t,i){function n(){this.Nt=this.Nt||{},this.Mt=this.Mt||void 0}function e(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype.Nt=void 0,n.prototype.Mt=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this.Mt=t,this},n.prototype.emit=function(t){var i,n,o,u,h,c;if(this.Nt||(this.Nt={}),"error"===t&&(!this.Nt.error||r(this.Nt.error)&&!this.Nt.error.length)){if((i=arguments[1])instanceof Error)throw i;var a=new Error('Uncaught, unspecified "error" event. ('+i+")");throw a.context=i,a}if(s(n=this.Nt[t]))return!1;if(e(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(r(n))for(u=Array.prototype.slice.call(arguments,1),o=(c=n.slice()).length,h=0;h<o;h++)c[h].apply(this,u);return!0},n.prototype.addListener=function(t,i){var o;if(!e(i))throw TypeError("listener must be a function");return this.Nt||(this.Nt={}),this.Nt.newListener&&this.emit("newListener",t,e(i.listener)?i.listener:i),this.Nt[t]?r(this.Nt[t])?this.Nt[t].push(i):this.Nt[t]=[this.Nt[t],i]:this.Nt[t]=i,r(this.Nt[t])&&!this.Nt[t].warned&&(o=s(this.Mt)?n.defaultMaxListeners:this.Mt)&&o>0&&this.Nt[t].length>o&&(this.Nt[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this.Nt[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,i){if(!e(i))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,i.apply(this,arguments))}return r.listener=i,this.on(t,r),this},n.prototype.removeListener=function(t,i){var n,s,o,u;if(!e(i))throw TypeError("listener must be a function");if(!this.Nt||!this.Nt[t])return this;if(o=(n=this.Nt[t]).length,s=-1,n===i||e(n.listener)&&n.listener===i)delete this.Nt[t],this.Nt.removeListener&&this.emit("removeListener",t,i);else if(r(n)){for(u=o;u-- >0;)if(n[u]===i||n[u].listener&&n[u].listener===i){s=u;break}if(s<0)return this;1===n.length?(n.length=0,delete this.Nt[t]):n.splice(s,1),this.Nt.removeListener&&this.emit("removeListener",t,i)}return this},n.prototype.removeAllListeners=function(t){var i,n;if(!this.Nt)return this;if(!this.Nt.removeListener)return 0===arguments.length?this.Nt={}:this.Nt[t]&&delete this.Nt[t],this;if(0===arguments.length){for(i in this.Nt)"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this.Nt={},this}if(e(n=this.Nt[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this.Nt[t],this},n.prototype.listeners=function(t){return this.Nt&&this.Nt[t]?e(this.Nt[t])?[this.Nt[t]]:this.Nt[t].slice():[]},n.prototype.listenerCount=function(t){if(this.Nt){var i=this.Nt[t];if(e(i))return 1;if(i)return i.length}return 0},n.listenerCount=function(t,i){return t.listenerCount(i)}},function(t,i,n){var e=n(22),r=n(21),s=n(14),o=n(11),u=n(10),h=n(0).KEY_SYSTEMS,c=i.PlayerEvent=n(9),a=i.PlayerState=n(8),f=i.MetadataEvent=n(7),l=(i.ErrorType=n(6),i.ErrorSource=n(5),i.Profile=i.ProfileEvent=n(4),"chrome"===s.name&&63===s.major||"opera"===s.name),d=i.MediaPlayer=function(t,i){this.Dt=i,this.Ut=E(),this.Wt=new e,this.Bt=null,this.Ft=!0,this.Yt=!1,this.Kt=t.isQualitySupported||m,this.jt=this.Vt.bind(this),this.xt=this.Qt.bind(this),this.Gt=new r({ontimeupdate:this.Ht.bind(this),onbufferupdate:this.qt.bind(this),onidle:this.Xt.bind(this),onstop:this.$t.bind(this),onerror:this.Jt.bind(this)}),this.e={looping:!1,autoSwitchQuality:!0},this.zt={},this.Zt(),this.ti(),this.ii(o.CREATE,{settings:function(t){try{return n(3)("./"+t+".json")}catch(t){return{}}}(t.settings),logLevel:String(t.logLevel),localStorage:function(t){var i=Object.create(null);try{for(var n=0;n<localStorage.length;n++){var e=localStorage.key(n);e.substr(0,t.length)===t&&(i[e.substr(t.length)]=localStorage.getItem(e))}}catch(t){console.warn("localStorage not available:",t)}return i}("cvp."),clientTrackingInfo:function(){var t,i;try{var n=document.createElement("canvas"),e=n.getContext("experimental-webgl"),r=e.getExtension("WEBGL_debug_renderer_info");t=e.getParameter(r.UNMASKED_RENDERER_WEBGL),i=e.getParameter(r.UNMASKED_VENDOR_WEBGL)}catch(t){console.error("webgl context not available",t)}return{gl_renderer:t||"",gl_vendor:i||""}}(),mseSupported:p(),keySystem:function(t){if(window.WebKitMediaKeys&&"function"==typeof WebKitMediaKeys.isTypeSupported&&WebKitMediaKeys.isTypeSupported(h.FAIRPLAY.keySystem))return h.FAIRPLAY.uuid;if("function"==typeof navigator.requestMediaKeySystemAccess)switch(t.name){case"edge":case"ie":return h.PLAYREADY.uuid;default:return h.WIDEVINE.uuid}return""}(s)}),setTimeout(function(){this.Wt.emit(c.INITIALIZED)}.bind(this),0)};function v(){}d.createWorker=function(t,i,n){var e=`\n        var Module = {\n            WASM_BINARY_URL: '${i}',\n            WASM_CACHE_MODE: ${n}\n        }\n        importScripts('${t}');\n    `;return new Worker(URL.createObjectURL(new Blob([e])))},d.prototype.delete=function(){this.ii(o.DELETE),this.Dt.removeEventListener("message",this.xt),document.removeEventListener("visibilitychange",this.jt),this.Gt.delete(),this.Dt=null,this.Gt=null,this.Wt=null},d.prototype.getHTMLVideoElement=function(){return this.Gt.videoElement()},d.prototype.load=function(t,i){this.ii(o.LOAD,{path:t,mediaType:i||""}),this.Zt()},d.prototype.play=function(){this.Gt.captureGesture(),this.Ft=!1,this.ni()},d.prototype.pause=function(){this.Ft=!0,this.ii(o.PAUSE)},d.prototype.isPaused=function(){return this.Ft},d.prototype.seekTo=function(t){this.getDuration()>.5&&(t=Math.min(t,this.getDuration()-.5)),t=Math.max(0,t),this.Bt=t,this.ii(o.SEEK_TO,t)},d.prototype.isSeeking=function(){return null!==this.Bt},d.prototype.getVideoSrc=function(){return this.Gt.videoElement().src},d.prototype.getDuration=function(){return this.e.duration||this.Gt.videoElement().duration},d.prototype.getStartOffset=function(){return this.e.startOffset},d.prototype.getPosition=function(){return null===this.Bt?this.Gt.currentTime():this.Bt},d.prototype.getBuffered=function(){return this.Gt.buffered()},d.prototype.getBufferDuration=function(){return this.Gt.bufferDuration()},d.prototype.getPlayerState=function(){return this.e.playerState},d.prototype.getVideoWidth=function(){return this.Gt.videoElement().videoWidth},d.prototype.getVideoHeight=function(){return this.Gt.videoElement().videoHeight},d.prototype.getVideoFrameRate=function(){return this.zt.videoFrameRate},d.prototype.getVideoBitRate=function(){return this.zt.videoBitRate},d.prototype.getVersion=function(){return"2.6.3-d486a8ce"},d.prototype.isLooping=function(){return this.e.looping},d.prototype.setLooping=function(t){this.ii(o.SET_LOOPING,t),this.e.looping=t},d.prototype.isMuted=function(){return this.Gt.videoElement().muted},d.prototype.setMuted=function(t){this.Gt.videoElement().muted=t,this.ii(o.SET_MUTED,t),this.Wt.emit(c.MUTED_CHANGED)},d.prototype.setVolume=function(t){this.Gt.videoElement().volume=t,this.ii(o.SET_VOLUME,t),this.Wt.emit(c.VOLUME_CHANGED)},d.prototype.getVolume=function(){return this.Gt.videoElement().volume},d.prototype.getQuality=function(){return this.e.quality},d.prototype.setQuality=function(t){this.ii(o.SET_QUALITY,t)},d.prototype.getQualities=function(){return this.e.qualities},d.prototype.getAutoSwitchQuality=function(){return this.e.autoSwitchQuality},d.prototype.setAutoSwitchQuality=function(t){this.ii(o.SET_AUTO_SWITCH_QUALITY,t)},d.prototype.setAutoMaxVideoSize=function(t,i){this.ii(o.SET_AUTO_MAX_VIDEO_SIZE,{width:t,height:i})},d.prototype.getPlaybackRate=function(){return this.Gt.videoElement().playbackRate},d.prototype.setPlaybackRate=function(t){this.ii(o.SET_PLAYBACK_RATE,t)},d.prototype.setAdInsertionEnabled=function(t){this.ii(o.SET_AD_INSERTION_ENABLED,t)},d.prototype.setLiveMaxLatency=function(t){this.ii(o.SET_LIVE_MAX_LATENCY,t)},d.prototype.setLiveLowLatencyEnabled=function(t){this.ii(o.SET_LIVE_LOW_LATENCY_ENABLED,t)},d.prototype.setMinBuffer=function(t){this.ii(o.SET_MIN_BUFFER,t)},d.prototype.setMaxBuffer=function(t){this.ii(o.SET_MIN_BUFFER,t)},d.prototype.setAnalyticsSendEvents=function(t){this.ii(o.SET_ANALYTICS_SEND_EVENTS,t)},d.prototype.addEventListener=function(t,i){this.Wt.on(t,i)},d.prototype.removeEventListener=function(t,i){this.Wt.removeListener(t,i)},d.prototype.getDroppedFrames=function(){return this.Gt.droppedFrames()},d.prototype.getDecodedFrames=function(){return this.Gt.decodedFrames()},d.prototype.getDisplayWidth=function(){return this.Gt.videoElement().clientWidth},d.prototype.getDisplayHeight=function(){return this.Gt.videoElement().clientHeight},d.prototype.getManifestInfo=function(){return this.e.twitchInfo},d.prototype.getLiveLatency=function(){return this.zt.broadcasterLatency},d.prototype.getBroadcasterLatency=function(){return 1e3*this.zt.broadcasterLatency},d.prototype.getTranscoderLatency=function(){return 1e3*this.zt.transcoderLatency},d.prototype.getNetworkProfile=function(){return this.zt.networkProfile},d.prototype.isProtected=function(){return this.Gt.isProtected()},d.prototype.getSourceUrl=function(){return this.Gt.srcUrl()},d.prototype.ni=function(){!document.hidden&&this.Yt&&this.ii(o.PLAY)},d.prototype.ii=function(t,i){this.Dt.postMessage({id:this.Ut,type:t,arg:i})},d.prototype.Zt=function(){y(this.e,{playerState:a.Idle,quality:{name:"",group:"",codecs:"",bitrate:0,width:0,height:0,framerate:0},qualities:[],duration:0,startOffset:0,twitchInfo:{}}),y(this.zt,{videoBitRate:0,videoFrameRate:0,broadcasterLatency:0,transcoderLatency:0,networkProfile:[]}),this.Wt.emit(c.DURATION_CHANGED,{duration:0}),this.Bt=null,this.Yt=!1},d.prototype.ti=function(){this.Dt.addEventListener("message",this.xt),document.addEventListener("visibilitychange",this.jt);var t=this.Wt,i=this.Gt,n=function(t){y(this.e,t)}.bind(this);t.on(c.QUALITY_CHANGED,n),t.on(c.AUTO_SWITCH_QUALITY_CHANGED,n),t.on(c.DURATION_CHANGED,n),t.on(c.VOLUME_CHANGED,this.ei.bind(this)),t.on(c.MUTED_CHANGED,this.ri.bind(this)),t.on(c.SEEK_COMPLETED,this.si.bind(this)),t.on(c.ERROR,this.oi.bind(this)),t.on(c.TWITCH_INFO,this.ui.bind(this)),t.on(u.STATS,function(t){y(this.zt,t)}.bind(this)),t.on(u.STATE_CHANGED,this.hi.bind(this)),t.on(u.SAVE_ITEM,this.ci.bind(this)),t.on(u.CONFIGURE,i.configure.bind(i)),t.on(u.REINIT,i.reinit.bind(i)),t.on(u.ENQUEUE,i.enqueue.bind(i)),t.on(u.SET_TIMESTAMP_OFFSET,i.setTimestampOffset.bind(i)),t.on(u.PLAY,this.ai.bind(this)),t.on(u.PAUSE,i.pause.bind(i)),t.on(u.REMOVE,i.remove.bind(i)),t.on(u.RESET,i.reset.bind(i)),t.on(u.SEEK_TO,i.seekTo.bind(i)),t.on(u.SET_PLAYBACK_RATE,i.setPlaybackRate.bind(i)),t.on(u.ADD_CUE,this.fi.bind(this)),t.on(f.ID3,this.li.bind(this))},d.prototype.ei=function(){l&&document.hidden&&0===this.getVolume()&&this.ii(o.PAUSE)},d.prototype.ri=function(){l&&document.hidden&&this.isMuted()&&this.ii(o.PAUSE)},d.prototype.si=function(){this.Bt=null,this.getPlayerState()===a.PLAYING&&this.Wt.emit(a.PLAYING)},d.prototype.oi=function(){this.Ft=!0},d.prototype.hi=function(t){switch(t.playerState){case a.READY:var i=this.di(t.qualities);t.qualities=i.supported,this.ii(o.REMOVE_QUALITIES,i.unsupported),this.Yt=!0,this.Ft||this.ni();break;case a.ENDED:this.Ft=!0}y(this.e,t),t.playerState!==a.PLAYING&&this.Wt.emit(t.playerState)},d.prototype.di=function(t){var i=[],n=[];return t.forEach(function(t){this.Kt(t)?i.push(t):n.push(t)},this),{supported:i,unsupported:n}},d.prototype.ci=function(t){try{localStorage.setItem("cvp."+t.key,t.value)}catch(t){}},d.prototype.ai=function(){this.Gt.play().then(function(){this.Wt.emit(a.PLAYING)}.bind(this)).catch(v)},d.prototype.fi=function(t){this.Gt.addCue(t.time,t.duration,t.type,function(){this.ii(o.SINK_CUE,t.time)}.bind(this))},d.prototype.li=function(t){t.forEach(function(t){if("TXXX"===t.id&&"segmentmetadata"===t.desc&&t.info.length){var i=function(t){try{return JSON.parse(t)}catch(i){return console.error("Failed JSON parse:",t),{}}}(t.info[0]);if(i.hasOwnProperty("stream_offset")){var n=Number(i.stream_offset);isNaN(n)||(this.e.startOffset=n-this.getPosition())}}}.bind(this))},d.prototype.Vt=function(){this.Ft||document.hidden||this.ni(),l&&!this.Ft&&document.hidden&&(this.isMuted()||0===this.getVolume())&&this.ii(o.PAUSE)},d.prototype.Ht=function(){null===this.Bt&&(this.ii(o.SINK_UPDATE,{currentTime:this.Gt.currentTime(),decodedFrames:this.Gt.decodedFrames(),droppedFrames:this.Gt.droppedFrames()}),this.Wt.emit(c.TIME_UPDATE))},d.prototype.qt=function(){this.Wt.emit(c.BUFFER_UPDATE)},d.prototype.Xt=function(){this.ii(o.SINK_IDLE)},d.prototype.$t=function(){document.hidden?this.ii(o.PAUSE):this.isMuted()?(this.pause(),this.Wt.emit(c.PLAYBACK_BLOCKED)):(this.setMuted(!0),this.ai(),this.Wt.emit(c.AUDIO_BLOCKED))},d.prototype.Jt=function(t){this.ii(o.SINK_ERROR,t)},d.prototype.ui=function(t){y(this.e,t)},d.prototype.Qt=function(t){var i=t.data;i.id===this.Ut&&this.Wt.emit(i.type,i.arg)};var E=function(){var t=0;return function(){return t++}}();function p(){return"undefined"!=typeof MediaSource}function y(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}function m(t){return""===t.codecs||MediaSource.isTypeSupported('video/mp4;codecs="'+t.codecs+'"')}d.isVP9Supported=function(){return p()&&MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"')}},function(t,i,n){"use strict";var e="object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate,r=document.currentScript.src.replace(/[\w-\.]+\.js$/g,e?"wasmworker.min.js":"worker.min.js"),s=document.currentScript.src.replace(/[\w-\.]+\.js$/g,"wasmworker.min.wasm");t.exports=function(t,i){if(void 0!==t&&"function"==typeof t.getTech){var e=n(23),o=e.MediaPlayer,u=e.PlayerState,h=e.PlayerEvent,c=e.MetadataEvent,a=e.ErrorType,f=e.ErrorSource,l=o.createWorker(r,s,!0),d=t.getTech("Tech"),v=t.extend(d,{constructor:function(t,n){this.vi=0,this.Ei=new o({logLevel:i.logLevel},l),this.pi(),this.Ei.addEventListener(c.CAPTION,this.yi.bind(this)),this.Ei.setAnalyticsSendEvents(!0),t.nativeTextTracks=!1,d.call(this,t,n),vttjs.restore()},setPreload:function(t){this.Ei.getHTMLVideoElement().setAttribute("preload",t)},readyState:function(){return this.vi},load:function(){},ended:function(){return this.Ei.getPlayerState()===u.ENDED},seekable:function(){return this.Ei.getHTMLVideoElement().seekable},play:function(){this.Ei.play(),this.trigger("play")},pause:function(){this.Ei.pause()},setCurrentTime:function(t){this.Ei.seekTo(t),this.trigger("seeking")},muted:function(t){return this.Ei.isMuted()},setMuted:function(t){this.Ei.setMuted(t)},volume:function(){return this.Ei.getVolume()},setVolume:function(t){this.Ei.setVolume(t)},paused:function(){return this.Ei.getPlayerState()===u.IDLE},duration:function(){return this.Ei.getDuration()},currentTime:function(){return this.Ei.getPosition()},createEl:function(){var t=this.Ei.getHTMLVideoElement();return t.setAttribute("class","vjs-tech"),["preload","poster"].forEach(function(i){this.options_[i]&&t.setAttribute(i,this.options_[i])}.bind(this)),this.options_.playsinline&&(t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline","")),this.options_.loop&&this.Ei.setLooping(!0),this.options_.muted&&this.Ei.setMuted(!0),t},src:function(t){this.mi&&(this.textTracks().removeTrack(this.mi),this.mi=null),t&&(this.Ei.load(t),this.options_.autoplay&&this.Ei.play())},currentSrc:function(){return this.Ei.getVideoSrc()},getQualities:function(){return this.Ei.getQualities()},setQuality:function(t){this.Ei.setQuality(t)},getQuality:function(){return this.Ei.getQuality(quality)},setAutoSwitchQuality:function(t){this.Ei.setAutoSwitchQuality(t)},getAutoSwitchQuality:function(){return this.Ei.getAutoSwitchQuality()},addEventListener:function(t,i){this.Ei.addEventListener(t,i)},removeEventListener:function(t,i){this.Ei.removeEventListener(t,i)},setLiveMaxLatency:function(t){this.Ei.setLiveMaxLatency(t)},supportsFullScreen:function(){return!0},enterFullScreen:function(){var t=this.Ei.getHTMLVideoElement();(t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitEnterFullscreen||function(){console.error("Fullscreen API is not available")}).call(t)},exitFullScreen:function(){(document.exitFullScreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen||function(){console.error("Exitscreen API is not available")}).call(document)},yi:function(t){this.mi||(this.mi=this.addTextTrack("captions",t.format),this.Si=null),this.Si&&this.mi.removeCue(this.Si);var i=this.Ei.getHTMLVideoElement(),n=window.VTTCue||window.vttjs.VTTCue;n?(this.Si=new n(i.currentTime,i.currentTime+2,t.text),this.mi.addCue(this.Si)):console.warn("No VTTCue implementation available, caption may not be available")},pi:function(){this.Ei.addEventListener(u.READY,function(){this.vi=1,this.trigger("loadedmetadata")}.bind(this)),this.Ei.addEventListener(u.IDLE,function(){this.vi=0,this.trigger("pause")}.bind(this)),this.Ei.addEventListener(u.PLAYING,function(){this.vi<=2&&(this.vi=3),this.trigger("playing")}.bind(this)),this.Ei.addEventListener(u.ENDED,function(){this.vi=0,this.trigger("ended")}.bind(this)),this.Ei.addEventListener(u.BUFFERING,function(){this.vi=2,this.trigger("waiting")}.bind(this)),this.Ei.addEventListener(u.REBUFFERING,function(){this.vi=2}.bind(this)),this.Ei.addEventListener(h.TIME_UPDATE,function(){this.trigger("timeupdate")}.bind(this)),this.Ei.addEventListener(h.INITIALIZED,function(){this.triggerReady()}.bind(this)),this.Ei.addEventListener(h.VOLUME_CHANGED,function(){this.trigger("volumechange")}.bind(this)),this.Ei.addEventListener(h.ERROR,function(){this.trigger("error")}.bind(this)),this.Ei.addEventListener(h.DURATION_CHANGED,function(){this.trigger("durationchange")}.bind(this)),this.Ei.addEventListener(h.SEEK_COMPLETED,function(){this.trigger("seeked")}.bind(this))},techName:"TwitchWhiteLabel",PlayerEvent:h,MetadataEvent:c,PlayerState:u,ErrorType:a,ErrorSource:f});v.supportsFullScreen=function(){return!0},v.isSupported=function(){return-1===(navigator.appVersion||"").toLowerCase().indexOf("rv:11")},v.canPlayType=function(t){return"string"==typeof t&&t.length>0&&(t.indexOf("application/x-mpegURL")>-1?"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'):""!==document.createElement("video").canPlayType(t))},v.canPlaySource=function(){return!0},t.registerTech("TwitchWhiteLabel",v);t.getComponent("Menu");var E=t.getComponent("MenuButton"),p=t.getComponent("MenuItem"),y=t.extend(p,{constructor:function(t,i){var n=i.quality;p.call(this,t,{selectable:!0,label:n.name}),this.quality=n,this.on(h.QUALITY_CHANGED,this.update)},handleClick:function(t){p.prototype.handleClick.call(this,t),"auto"===this.quality.group?this.player().setAutoSwitchQuality(!0):this.player().setQuality(this.quality)},update:function(){this.selected(this.player().getQuality()===this.quality)}}),m=t.extend(E,{constructor:function(t,i){E.call(this,t,{}),this.controlText("Quality")},createItems:function(){var t=this.player(),i=(this.menu,[]),n=new y(t,{quality:{group:"auto",name:"Auto"}});n.selected(!0),i.push(n);var e=t.getQualities();return e&&e.length>0&&e.forEach(function(n){i.push(new y(t,{quality:n}))}),i.forEach(function(t){t.on("click",function(){this.items.forEach(function(i){i!==t&&i.selected(!1)})}.bind(this))}.bind(this)),i},buildCSSClass:function(){return"vjs-icon-hd vjs-icon-placeholder "+E.prototype.buildCSSClass.call(this)}});t.registerComponent("QualityMenuButton",m);var S=t.registerPlugin||t.plugin;S("enableTwitchPlugins",function(){var t=this;t.on("loadedmetadata",function(){var i=t.controlBar.getChild("QualityMenuButton");i&&(i.dispose(),t.controlBar.removeChild(i)),t.controlBar.addChild("QualityMenuButton")})}),S("addTwitchTechEventListener",function(t,i){this.tech(!0).addEventListener(t,i)}),S("removeTwitchTechEventListener",function(t,i){this.tech(!0).removeEventListener(t,i)}),S("getTwitchTech",function(){return{PlayerEvent:h,MetadataEvent:c,PlayerState:u,ErrorType:a,ErrorSource:f}}),S("getQualities",function(){return this.tech(!0).getQualities()}),S("setQuality",function(t){this.tech(!0).setQuality(t)}),S("getQuality",function(){return this.tech(!0).getQuality(quality)}),S("setAutoSwitchQuality",function(t){this.tech(!0).setAutoSwitchQuality(t)}),S("getAutoSwitchQuality",function(){return this.tech(!0).getAutoSwitchQuality()}),S("setLiveMaxLatency",function(t){this.tech(!0).setLiveMaxLatency(t)})}else console.error("videojs not available, TwitchWhiteLabel tech not registered")}}]);