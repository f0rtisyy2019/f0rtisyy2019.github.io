(function(z){var r=window.AmazonUIPageJS||window.P,K=r._namespace||r.attributeErrors,d=K?K("AmazonLiveReactAssetsBuild@react-core","AmazonLiveReact"):r;d.guardFatal?d.guardFatal(z)(d,window):d.execute(function(){z(d,window)})})(function(z,r,K){!function(d){function f(c){for(var p,q,f=c[0],l=c[1],g=c[2],k=0,h=[];k<f.length;k++)q=f[k],b[q]&&h.push(b[q][0]),b[q]=0;for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&(d[p]=l[p]);for(m&&m(c);h.length;)h.shift()();return e.push.apply(e,g||[]),a()}function a(){for(var a,
d=0;d<e.length;d++){for(var m=e[d],f=!0,l=1;l<m.length;l++)0!==b[m[l]]&&(f=!1);f&&(e.splice(d--,1),a=c(c.s=m[0]))}return a}function c(a){if(g[a])return g[a].exports;var b=g[a]={i:a,l:!1,exports:{}};return d[a].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var g={},b={2:0},e=[];c.m=d;c.c=g;c.d=function(a,b,e){c.o(a,b)||Object.defineProperty(a,b,{configurable:!1,enumerable:!0,get:e})};c.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})};c.n=function(a){var b=a&&a.__esModule?function(){return a.default}:
function(){return a};return c.d(b,"a",b),b};c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};c.p="";var h=r["al-react-assets-jsonpFunction"]=r["al-react-assets-jsonpFunction"]||[],k=h.push.bind(h);h.push=f;for(var h=h.slice(),l=0;l<h.length;l++)f(h[l]);var m=k;e.push([734,0]);a()}([,,function(d,f,a){var c=a(4),g={updateQueryString:function(a,e,c){var d=new RegExp("([?\x26])"+e+"\x3d.*?(\x26|#|$)(.*)","gi"),f=void 0;if(d.test(a))return void 0!==c&&null!==c?a.replace(d,"$1"+e+"\x3d"+
c+"$2$3"):(a=(f=a.split("#"))[0].replace(d,"$1$3").replace(/(&|\?)$/,""),void 0!==f[1]&&null!==f[1]&&(a+="#"+f[1]),a);void 0!==c&&null!==c&&(d=-1!==a.indexOf("?")?"\x26":"?",a=(f=a.split("#"))[0]+d+e+"\x3d"+c,void 0!==f[1]&&null!==f[1]&&(a+="#"+f[1]));return a},updateQueryParameters:function(a,e){var c=a;return Object.keys(e).forEach(function(a){c=g.updateQueryString(c,a,e[a])}),c},getQueryParameter:function(a,e){if(!a)return null;e=e.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+e+
"(\x3d([^\x26#]*)|\x26|#|$)")).exec(a))?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},arraysEqual:function(a,e){if(a===e)return!0;if(null==a||null==e||a.length!==e.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==e[c])return!1;return!0},batchArray:function(a,e){if(Array.isArray(a)&&e&&!(0>=e)){for(var c=[],d=0;d<a.length;d+=e)c.push(a.slice(d,d+e));return c}},registerUnique:function(a){z.now(a).execute(function(e){void 0===e&&z.declare(a,new Date)})},getLocale:function(){return"en-US"},
getRandomInteger:function(a,e){return Math.floor(Math.random()*(e-a+1))+a},getRandomArrayElement:function(a){if(Array.isArray(a)&&0!==a.length)return a[g.getRandomInteger(0,a.length-1)]},pad:function(a){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,c=""+a;c.length<e;)c="0"+c;return c},isAndroid:function(a){a=(a||navigator.userAgent).toLowerCase().match(/android\s([0-9\.]*)/);return!!a&&a[1]},isIOSDevice:function(){var a=navigator.platform,e="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");
if(a)for(;e.length;)if(a===e.pop())return!0;return!1},isWeblabEnabled:function(a){return a&&"C"!==a},isClosedCaptionEnableByDefault:function(a){var e=g.getNestedValue(a,"weblab.enableClosedCaptionByDefault"),c=g.getNestedValue(a,"widget-options.enableClosedCaptionByDefault"),d=g.getNestedValue(a,"widget-options.autoplay");a=g.getNestedValue(a,"widget-options.enableClosedCaptionWhenPlayerAutoPlay");return!this.isIOSDevice()&&(d&&a||g.isWeblabEnabled(e)&&c)},parseBool:function(a){return!0===a||1===
a||"1"===a||"true"===a},getNestedValue:function(a,e){if(a){e=e.replace(/^\./,"").replace(/\[(\w+)\]/g,".$1").split(".");for(var c,d=0;d<e.length;d++){if(void 0===a[c=e[d]])return;a=a[c]}return a}},callFunction:function(a){for(var e=arguments.length,c=Array(1<e?e-1:0),d=1;d<e;d++)c[d-1]=arguments[d];return"function"==typeof a&&a.apply(void 0,c)},getSignInUrl:function(){return g.updateQueryParameters("/ap/signin",{"openid.assoc_handle":"usamazon","openid.claimed_id":encodeURIComponent("http://specs.openid.net/auth/2.0/identifier_select"),
"openid.identity":encodeURIComponent("http://specs.openid.net/auth/2.0/identifier_select"),"openid.mode":"checkid_setup","openid.ns":encodeURIComponent("http://specs.openid.net/auth/2.0"),"openid.ns.pape":encodeURIComponent("http://specs.openid.net/extensions/pape/1.0"),"openid.pape.max_auth_age":0,"openid.return_to":encodeURIComponent(r.location.href)})},distanceBetween:function(a,e){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))},setTimeout:function(a,e){for(var d=arguments.length,f=
Array(2<d?d-2:0),l=2;l<d;l++)f[l-2]=arguments[l];return r.setTimeout(function(){return c.guard.apply(void 0,[a].concat(f))},e)},setInterval:function(a,e){for(var d=arguments.length,f=Array(2<d?d-2:0),l=2;l<d;l++)f[l-2]=arguments[l];return r.setInterval(function(){return c.guard.apply(void 0,[a].concat(f))},e)}};d.exports=g},,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.guardRejection=f.guardErrorWrapper=f.guardError=f.guard=void 0;var c=a(268),g=function(a){for(var e=arguments.length,
d=Array(1<e?e-1:0),f=1;f<e;f++)d[f-1]=arguments[f];try{return a.apply(void 0,d)}catch(l){e="Exception caught in function: "+(a.name||"anonymous"),e=e+(d?"\n with arguments: "+d:"")+("\n with stack: "+l.stack),(0,c.logError)(e,l)}};f.guard=function(a){for(var e=arguments.length,c=Array(1<e?e-1:0),d=1;d<e;d++)c[d-1]=arguments[d];return z.guardFatal("AmazonLiveReactAssets",a).apply(void 0,c)};f.guardError=g;f.guardErrorWrapper=function(a){for(var e=arguments.length,c=Array(1<e?e-1:0),d=1;d<e;d++)c[d-
1]=arguments[d];e=function(){for(var e=arguments.length,d=Array(e),n=0;n<e;n++)d[n]=arguments[n];return g.apply(void 0,[a.bind(this)].concat(c,d))};return e.guarded=!0,e};f.guardRejection=function(a){return(0,c.logFatal)("Promise rejected, reason is: "+a,a),new Promise(function(){})}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.getLogLevel=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==
typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(a){return a&&a.__esModule?a:{default:a}}(a(2)),b=["log","error","warn","info","debug"],e=f.getLogLevel=function(){var a=g.default.getQueryParameter(r.location.href,"logLevel");return 0>b.indexOf(a)&&(a=b[2]),a};f.default=function k(a){var d=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e();if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");!0;var p=b.indexOf(n);b.forEach(function(e){return d[e]=
b.indexOf(e)>p?function(){}:function(){for(var b=arguments.length,d=Array(b),n=0;n<b;n++)d[n]=arguments[n];return"function"==typeof console[e]&&console[e]("["+a+"] "+d.map(function(a){return"object"===(void 0===a?"undefined":c(a))?JSON.stringify(a):a}).join(" "))}})}},function(d,f,a){var c=a(38),g=function(){return c.stateManager.getStore().getState()},b={isDeviceMobile:function(){var a=g();return a&&a["aui-page-context"]&&"mobile"===a["aui-page-context"].deviceType},isDeviceDesktop:function(){return!b.isDeviceMobile()},
isMshop:function(){return g()["is-app"]||!1},isMobileWeb:function(){return b.isDeviceMobile()&&!b.isMshop()},isInlineMobile:function(){return"mobileInlineShoppablePlayer"===g()["component-id"]},isInternal:function(){var a=g();return a.metrics&&"internal"===a.metrics.trafficType},getCustomerId:function(){var a=g(),a=a.metrics&&a.metrics.customerId;return"0"!==a&&0!==a&&a},isRecognizedCustomer:function(){return!!b.getCustomerId()},isUnrecognizedCustomer:function(){return!b.getCustomerId()},checkRenderSuccess:function(a){var b=
g();return a.every(function(a){return b[a]&&"SUCCESS"===b[a].loadStatus})},isEmbedded:function(){return!!g()["widget-options"].embedded}};d.exports=b},,function(d,f,a){f=(f=a(490))&&f.__esModule?f:{default:f};a=a(205);a.Context=f.default;d.exports=a},,,,,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.resetRedux=function(){return{type:c.RESET_REDUX}};f.setDataAndSuccess=function(a,b){return{type:c.SET_DATA_AND_SUCCESS,key:a,data:b}};f.setSuccess=function(a){return{type:c.SET_SUCCESS,
key:a}};f.setInitialLoadData=function(a,b){return{type:c.SET_INITIAL_LOAD_DATA,key:a,data:b}};f.setPlaylistData=function(a){return{type:c.SET_PLAYLIST_DATA,data:a}};f.broadcastStatus=function(a,b){return{type:c.UPDATE_BROADCAST_STATUS,asin:a,status:b}};f.liveBadgeEnabled=function(a,b){return{type:c.LIVE_BADGE_ENABLED,asin:a,enabled:b}};f.liveViewers=function(a,b){return{type:c.LIVE_VIEWERS,asin:a,numViewers:b}};f.cleanupCarousel=function(){return{type:c.CLEAN_UP_CAROUSEL}};f.carouselHash=function(a,
b){return{type:c.CAROUSEL_HASH,asin:a,hash:b}};f.highlightedSegmentItemId=function(a,b){return{type:c.HIGHLIGHTED_SEGMENT_ITEM_ID,asin:a,highlightedSegmentItemId:b}};f.setPlayerDomId=function(a){return{type:c.SET_PLAYER_DOM_ID,domId:a}};f.setVodTimeOffset=function(a){return{type:c.VOD_TIME_OFFSET_UPDATED,newTimeOffsetMS:a}};f.mute=function(a){return{type:c.MUTE,volume:a}};f.unmute=function(a){return{type:c.UNMUTE,volume:a}};f.setShouldDisplayUnmuteAnywhereOverlay=function(a){return{type:c.SET_SHOULD_DISPLAY_UNMUTE_ANYWHERE_OVERLAY,
display:a}};f.enableClosedCaption=function(){return{type:c.CLOSED_CAPTION_ENABLED}};f.disableClosedCaption=function(){return{type:c.CLOSED_CAPTION_DISABLED}};f.vodEvents=function(a,b){return{type:c.SET_VOD_EVENTS,asin:a,vodEvents:b}};f.perks=function(a,b){return{type:c.PERKS,asin:a,perks:b}};f.cleanUpPerks=function(){return{type:c.CLEAN_UP_PERKS}};f.updateSingleDealItemStatus=function(a,b,e){return{type:c.UPDATE_SINGLE_DEAL_ITEM_STATUS,asin:a,dealId:b,dealItemStatus:e}};f.updateMultipleDealItemsStatus=
function(a){return{type:c.UPDATE_MULTIPLE_DEAL_ITEMS_STATUS,dealItemsStatusMap:a}};f.followMeApiAvailable=function(){return{type:c.FOLLOW_ME_API_AVAILABLE}};f.userEngaged=function(){return{type:c.USER_ENGAGED}};f.didUndock=function(){return{type:c.DID_UNDOCK}};f.didDock=function(){return{type:c.DID_DOCK}};f.willDismiss=function(){return{type:c.WILL_DISMISS}};f.videoMetadata=function(a,b){return{type:c.VIDEO_METADATA,asin:a,videoMetadata:b}};f.vods=function(a,b){return{type:c.VODS,asin:a,vods:b}};
f.pinnedMessage=function(a,b){return{type:c.PINNED_MESSAGE,asin:a,pinnedMessage:b}};f.isChatEnabled=function(a,b){return{type:c.IS_CHAT_ENABLED,asin:a,enabled:b}};f.chatStatus=function(a,b){return{type:c.CHAT_STATUS,asin:a,chatStatus:b}};f.hlsUrl=function(a,b){return{type:c.HLS_URL,asin:a,hlsUrl:b}};f.chatConnecting=function(){return{type:c.CONNECTING}};f.chatConnected=function(){return{type:c.CONNECTED}};f.chatDisconnected=function(){return{type:c.DISCONNECTED}};f.chatConnectionError=function(){return{type:c.CONNECTION_ERROR}};
f.chatConnectionCurrentUserBanned=function(){return{type:c.CONNECTION_CURRENT_USER_BANNED}};f.chatMessageSent=function(){return{type:c.MESSAGE_SENT}};f.chatMessageReceived=function(a,b){return{type:c.MESSAGE_RECEIVED,message:a,conversationJid:b}};f.chatDumpMessages=function(a,b){return{type:c.DUMP_MESSAGES,messages:a,conversationJid:b}};f.chatResetMessages=function(a){return{type:c.RESET_MESSAGES,conversationJid:a}};f.chatMessageFiltered=function(a,b){return{type:c.MESSAGE_FILTERED,message:a,conversationJid:b}};
f.chatMessageRemoved=function(a,b){return{type:c.MESSAGE_REMOVED,message:a,conversationJid:b}};f.chatCurrentUserBanned=function(a){return{type:c.CURRENT_USER_BANNED,conversationJid:a}};f.chatPennameUpdated=function(a){return{type:c.PEN_NAME_UPDATED,penname:a}};f.chatPennameInvalid=function(a){return{type:c.PEN_NAME_INVALID,conversationJid:a}};f.startConversation=function(a){return{type:c.START_CONVERSATION,conversationJid:a}};f.setPlayerExpanded=function(a){return{type:c.SET_PLAYER_EXPANDED,playerExpanded:a}};
f.setPlayerStatus=function(a){return{type:c.SET_PLAYER_STATUS,status:a}};f.setPlayerPlaying=function(a){return{type:c.SET_PLAYER_PLAYING,playing:a}};f.setPlayerEngaged=function(){return{type:c.SET_PLAYER_ENGAGED}};f.poll=function(a){return{type:c.POLL,data:a}};f.openPoll=function(){return{type:c.OPEN_POLL}};f.collapsePoll=function(){return{type:c.COLLAPSE_POLL}};f.setCustomerChoice=function(a,b){return{type:c.SET_CUSTOMER_CHOICE,pollId:a,choiceId:b}};f.vibesEvents=function(a){return{type:c.VIBES_EVENTS,
vibesEvents:a}};f.removeVibesEvents=function(a){return{type:c.REMOVE_VIBES_EVENTS,eventId:a}};f.updateGatewayEventsEmitted=function(a){return{type:c.EMIT_GATEWAY_EVENTS,hasGatewayEventsEmitted:a}};f.setClosedCaptionAvailable=function(a){return{type:c.CLOSED_CAPTION_AVAILABLE,available:a}};var c=f.ActionType={RESET_REDUX:"RESET_REDUX",SET_INITIAL_LOAD_DATA:"SET_INITIAL_LOAD_DATA",SET_DATA_AND_SUCCESS:"SET_DATA_AND_SUCCESS",SET_SUCCESS:"SET_SUCCESS",SET_PLAYLIST_DATA:"SET_PLAYLIST_DATA",UPDATE_BROADCAST_STATUS:"UPDATE_BROADCAST_STATUS",
LIVE_BADGE_ENABLED:"LIVE_BADGE_ENABLED",IS_CHAT_ENABLED:"IS_CHAT_ENABLED",LIVE_VIEWERS:"LIVE_VIEWERS",VIDEO_METADATA:"VIDEO_METADATA",VODS:"VODS",PINNED_MESSAGE:"PINNED_MESSAGE",HLS_URL:"HLS_URL",CAROUSEL_HASH:"CAROUSEL_HASH",HIGHLIGHTED_SEGMENT_ITEM_ID:"HIGHLIGHTED_SEGMENT_ITEM_ID",PERKS:"PERKS",CLEAN_UP_PERKS:"CLEAN_UP_PERKS",CLEAN_UP_CAROUSEL:"CLEAN_UP_CAROUSEL",UPDATE_SINGLE_DEAL_ITEM_STATUS:"UPDATE_SINGLE_DEAL_ITEM_STATUS",UPDATE_MULTIPLE_DEAL_ITEMS_STATUS:"UPDATE_MULTIPLE_DEAL_ITEMS_STATUS",
SET_PLAYER_DOM_ID:"SET_PLAYER_DOM_ID",SET_PLAYER_EXPANDED:"SET_PLAYER_EXPANDED",SET_PLAYER_STATUS:"SET_PLAYER_STATUS",VOD_TIME_OFFSET_UPDATED:"VOD_TIME_OFFSET_UPDATED",SET_VOD_EVENTS:"SET_VOD_EVENTS",MUTE:"MUTE",UNMUTE:"UNMUTE",CLOSED_CAPTION_ENABLED:"CLOSED_CAPTION_ENABLED",CLOSED_CAPTION_DISABLED:"CLOSED_CAPTION_DISABLED",SET_SHOULD_DISPLAY_UNMUTE_ANYWHERE_OVERLAY:"SET_SHOULD_DISPLAY_UNMUTE_ANYWHERE_OVERLAY",SET_PLAYER_PLAYING:"SET_PLAYER_PLAYING",SET_PLAYER_ENGAGED:"PLAYER_ENGAGED",FOLLOW_ME_API_AVAILABLE:"FOLLOW_ME_API_AVAILABLE",
USER_ENGAGED:"USER_ENGAGED",DID_DOCK:"DID_DOCK",DID_UNDOCK:"DID_UNDOCK",WILL_DISMISS:"WILL_DISMISS",INITIALIZED:"INITIALIZED",CONNECTED:"CONNECTED",CONNECTING:"CONNECTING",DISCONNECTED:"DISCONNECTED",CONNECTION_ERROR:"CONNECTION_ERROR",CONNECTION_CURRENT_USER_BANNED:"CONNECTION_CURRENT_USER_BANNED",MESSAGE_SENT:"MESSAGE_SENT",PEN_NAME_UPDATED:"PEN_NAME_UPDATED",RESET_MESSAGES:"RESET_MESSAGES",MESSAGE_RECEIVED:"MESSAGE_RECEIVED",MESSAGE_FILTERED:"MESSAGE_FILTERED",MESSAGE_REMOVED:"MESSAGE_REMOVED",
DUMP_MESSAGES:"DUMP_MESSAGES",PEN_NAME_INVALID:"PEN_NAME_INVALID",CURRENT_USER_BANNED:"CURRENT_USER_BANNED",START_CONVERSATION:"START_CONVERSATION",POLL:"POLL",OPEN_POLL:"OPEN_POLL",COLLAPSE_POLL:"COLLAPSE_POLL",SET_CUSTOMER_CHOICE:"SET_CUSTOMER_CHOICE",VIBES_EVENTS:"VIBES_EVENTS",REMOVE_VIBES_EVENTS:"REMOVE_VIBES_EVENTS",EMIT_GATEWAY_EVENTS:"EMIT_GATEWAY_EVENTS",CLOSED_CAPTION_AVAILABLE:"CLOSED_CAPTION_AVAILABLE",CHAT_STATUS:"CHAT_STATUS"}},function(d,f,a){function c(a){return a&&a.__esModule?a:
{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.initConfig=f.followMeWebConfig=f.carouselConfig=f.playerConfig=f.resetConfig=f.CONFIG=f.deepFreeze=f.isObject=void 0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=c(a(0)),e=c(a(563)),h=c(a(500)),k=c(a(499)),l=c(a(493)),m=c(a(467)),n=f.isObject=function(a){return a&&"object"===
(void 0===a?"undefined":g(a))&&!Array.isArray(a)&&!b.default.isValidElement(a)},p=f.deepFreeze=function v(a){Object.keys(a).forEach(function(b){n(a[b])&&(v(a[b]),Object.freeze(a[b]))});Object.freeze(a)},q=f.CONFIG={};(f.resetConfig=function(){(0,e.default)(q,h.default)})();d=f.playerConfig=q.player;a=f.carouselConfig=q.carousel;var t=f.followMeWebConfig=q.followMeWeb;f.initConfig=function(a){var b=1<arguments.length&&void 0!==arguments[1]&&arguments[1],c=0===a.indexOf("mobile")?k.default:l.default,
d=m.default[a]||{};return(0,e.default)(q,h.default,c,d),b&&p(q),q};f.default={playerConfig:d,carouselConfig:a,followMeWebConfig:t}},,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default={SUCCESS:"SUCCESS",ERROR:"ERROR",LOADING:"LOADING"}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d=f.DealTypes={DEAL_OF_THE_DAY:"DEAL_OF_THE_DAY",LIGHTNING_DEAL:"LIGHTNING_DEAL",BEST_DEAL:"BEST_DEAL",LOCAL_DEAL:"LOCAL_DEAL",COUPON_DEAL:"COUPON_DEAL",EVENT_DEAL:"EVENT_DEAL"};
a=f.DealStates={LOADING:"LOADING",COMINGSOON:"COMINGSOON",AVAILABLE:"AVAILABLE",EXPIRED:"EXPIRED",SOLDOUT:"SOLDOUT",UPCOMING:"UPCOMING",WAITLIST:"WAITLIST",WAITLISTFULL:"WAITLISTFULL"};var c=f.CustomerStates={NONE:"NONE",INCART:"INCART",CLAIMED:"CLAIMED",INWAITLIST:"INWAITLIST",PENDINGATC:"PENDINGATC",EXPIRED:"EXPIRED"},g=f.AJAXLinks={ADD_TO_CART:"/gp/deal/ajax/addToCart.html",GET_DEAL_STATUS:"/xa/dealcontent/v2/GetDealStatus",CLAIM_DEAL:{V1:"/gp/deal/ajax/claimDeal.html",V2:"/gp/deal/ajax/v2/claimDeal.html"}},
b=f.AJAXConfigs={GET_DEAL_STATUS:{name:"GetDealStatus",maxRetries:0,baseRetryInterval:12E3,ajaxTimeout:6E4},CLAIM_DEAL:{name:"ClaimDeal",maxRetries:2,baseRetryInterval:1E4,ajaxTimeout:6E4}},e=f.ApiConstants={SAFETY_JITTER_BASE:500,SAFETY_JITTER_MAX:2E3,DEAL_IDS_BATCH_SIZE:12},h=f.MiscLinks={CART_URL:"/gp/cart/view.html"},k=f.DeviceTypes={DESKTOP:"DESKTOP",APP:"APP",MOBILE:"MOBILE"},l=f.ClientID={PREFIX:"goldbox_mobile",Suffix:{DESKTOP:"pc",APP:"app",MOBILE:"aw"}};f.default={DealTypes:d,DealStates:a,
CustomerStates:c,AJAXLinks:g,AJAXConfigs:b,ApiConstants:e,MiscLinks:h,DeviceTypes:k,ClientID:l}},,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.metricsEmitPriority={HIGH:1,MEDIUM:2,LOW:3}},,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.pixel=f.enableSushiMetrics=f.WidgetSushiMetricsHelper=void 0;d=c(a(195));var g=c(a(433));a=c(a(432));f.WidgetSushiMetricsHelper=d.default;f.enableSushiMetrics=g.default;f.pixel=
a.default;f.default={WidgetSushiMetricsHelper:d.default,enableSushiMetrics:g.default,pixel:a.default}},function(d,f,a){d.exports={UNKNOWN:"UNKNOWN",LIVE:"LIVE",CONNECTION_ISSUES:"CONNECTION_ISSUES",PRE_LIVE:"PRE_LIVE",GRACE_PERIOD:"GRACE_PERIOD",POST_LIVE:"POST_LIVE",NOT_LIVE:"NOT_LIVE",FUTURE:"FUTURE",SHOW_END:"SHOW_END"}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,e){for(var c=0;c<e.length;c++){var d=
e[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,e,c){return e&&a(b.prototype,e),c&&a(b,c),b}}(),b=c(a(0)),e=a(424),h=c(a(82)),k=c(a(173)),l=c(a(350)),m=c(a(6)),n=c(a(30));d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"getShoppingCarouselWidget",value:function(){return b.default.createElement(h.default,{key:"amazonlive-shopping-carousel"})}},
{key:"getChatWidget",value:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return b.default.createElement(k.default,{key:"amazonlive-chat",isInline:m.default.isInlineMobile()&&!m.default.isEmbedded(),isDeviceMobile:m.default.isDeviceMobile(),startExpanded:a})}},{key:"getAskQuestionWidget",value:function(){return b.default.createElement(l.default,{key:"amazonlive-ask-question"})}},{key:"getOptionsBarWidget",value:function(){return b.default.createElement(e.OptionsBarWidget,
null)}},{key:"getPlayerComponent",value:function(e){var c=void 0;return e&&(c=[{content:a.getChatWidget(),containerCss:{top:"0",bottom:"0",width:"355px","-webkit-mask-image":"linear-gradient(to top, #FFFFFF 0%, #FFFFFF 80%, transparent 95%, transparent 100%)","mask-image":"linear-gradient(to top, #FFFFFF 0%, #FFFFFF 80%, transparent 95%, transparent 100%)"}}]),b.default.createElement(n.default,{underControlPanelConfig:c})}}]),a}();f.default=d},,function(d,f,a){Object.defineProperty(f,"__esModule",
{value:!0});f.connectForRemoveActionButtonFeature=f.isRemoveCarouselActionButtonEnabled=void 0;var c=a(3),g=function(a){return a&&a.__esModule?a:{default:a}}(a(229)),b=f.isRemoveCarouselActionButtonEnabled=function(a){return(0,g.default)(a,"removeCarouselActionButton","removeCarouselActionButtonEnabled")};f.connectForRemoveActionButtonFeature=function(a){return(0,c.connect)(function(a){return{removeActionButton:b(a)}})(a)}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});f.WEBLAB_TREATMENT_WEIGHT_MAP=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var e=arguments[b],c;for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}return a},b=function(){function a(b,e){for(var c=0;c<e.length;c++){var d=e[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,e,c){return e&&a(b.prototype,e),c&&a(b,c),b}}(),e=c(a(2)),h=c(a(96)),k=c(a(43)),
l=a(27),m=f.WEBLAB_TREATMENT_WEIGHT_MAP={T1:1,T2:2,T3:3},n=function(a){return(a=a.followMe)&&a.dockState===k.default.DOCKED},p=function(a){a=a&&a.player;return!(!a||!a.expanded)},q=function(a){var b=a.metrics;return b&&b.stageFlag?"prod"!==a.metrics.stageFlag:""};d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return b(a,[{key:"initialize",value:function(a){var b=this;if(!this.store){this.store=a;var e=a.subscribe(function(){void 0!==b.store.getState().metrics&&
(b.createBaseSushiMetrics(),e())})}}},{key:"createBaseSushiMetrics",value:function(){var a=this;z.when("amazon-live-sushi-metrics").execute(function(b){var c=a.store.getState();a.basePayload=function(a,b){var c={};return function(a,b,c){if(b=b.metrics){var d=r.ue_pty&&"NoPageType"!==r.ue_pty?r.ue_pty:b.pageType;c[a.metricSchema.CUSTOMER_ID]=b.customerId;c[a.metricSchema.REF_MARKER]=b.refMarker;c[a.metricSchema.REQUEST_ID]=b.requestId;c[a.metricSchema.SESSION_ID]=b.sessionId;c[a.metricSchema.MARKETPLACE_ID]=
b.marketplaceId;c[a.metricSchema.SLOT_NAME]=b.adSlotName;c[a.metricSchema.PAGE_TYPE]=d;c[a.metricSchema.PAGE_ID]=r.ue_pti?r.ue_pti:e.default.getQueryParameter(r.location.href,"node")||""}}(a,b,c),function(a,b,c){a=a.metricSchema.TRAFFIC_TYPE;var e=b.metrics,d=e&&e.trafficType;b=q(b)?"test":d?e.trafficType:"unknown";c[a]=b}(a,b,c),c}(b,c);a.testFlag=q(c);e.default.registerUnique("amazon-live-sushi-metrics-state-loaded")})}},{key:"extractBroadcastId",value:function(){var a=this.store.getState();return a.currentBroadcast&&
a.currentBroadcast.id||""}},{key:"onSushiMetricsReady",value:function(a){var b=this;z.when("amazon-live-sushi-metrics","amazon-live-sushi-metrics-state-loaded").execute(function(c){var e=g({},b.basePayload);(function(a,b,c){c[a.metricSchema.JSON_PAYLOAD]=JSON.stringify({isMshop:b["is-app"],isDocked:n(b),playerExpanded:p(b)});c[a.metricSchema.BROADCAST_STATUS]=function(a){return(a=h.default.getCurrentBroadcastFromPlaylist(a))&&a.broadcastStatus||""}(b);c[a.metricSchema.PLAYER_STATUS]=function(a){a=
(a=b.player)&&a.muted;return!0===a?"muted":!1===a?"unmuted":"unknown"}();c[a.metricSchema.PLATFORM]=b["is-app"]?"mShop":"";c[a.metricSchema.EXPERIENCE]=function(a){return(a["component-id"]?a["component-id"]:"")+(p(a)?";playerExpanded":"")+(n(a)?";docked":"")}(b);b.weblab&&(c[a.metricSchema.WEBLAB_IDS]=function(a){var b=a.weblab,c=[];return b&&(b.enableSvsPlayer&&c.push("AMAZONLIVE_PORTAL_SVS_PLAYER_158876:"+b.enableSvsPlayer),b.shoppingNotificationEvent&&c.push("AMAZONLIVE_SHOPPING_NOTIFICATION_EVENT_169131:"+
b.shoppingNotificationEvent),(0,l.isRemoveCarouselActionButtonEnabled)(a)&&c.push("AMAZONLIVE_REMOVE_CAROUSEL_ACTION_BUTTON_184328:"+b.removeCarouselActionButton),b.upgradeSvsPlayer&&c.push("AMAZONLIVE_SVS_281_194139:"+b.upgradeSvsPlayer)),""+c}(b))})(c,b.store.getState(),e);a(c,e,b.testFlag)})}},{key:"shouldEmitMetrics",value:function(a){var b=this.store.getState().weblab;return b&&b.enableLargeTrafficEventsMetrics&&(b=b.enableLargeTrafficEventsMetrics,e.default.isWeblabEnabled(b)&&m[b]<a)?!1:!0}},
{key:"emitMetrics",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=arguments[1],b=b||{};this.shouldEmitMetrics(c||1)&&this.onSushiMetricsReady(function(c,e,d){var n=e[c.metricSchema.JSON_PAYLOAD]?JSON.parse(e[c.metricSchema.JSON_PAYLOAD]):{},n=g({},n,b.JSON_PAYLOAD),p=g({BROADCAST_ID:a.extractBroadcastId()},b,{JSON_PAYLOAD:JSON.stringify(n)}),n=Object.keys(p).reduce(function(a,b){return c.metricSchema[b]&&(a[c.metricSchema[b]]=p[b]),a},{});e=g({},e,n);c.emitMetricsPayload(e,
d)})}}]),a}();f.default=new d},,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.PlayerWrapper=f.PLAYER_TYPES=void 0;var g=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}(),b=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=
arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a},e=c(a(0)),h=c(a(1));d=a(3);var k=c(a(349)),l=a(116),m=a(15),n=c(a(329)),p=c(a(303)),q=a(2),t=a(6),u=c(a(5)),v=c(a(75)),w=a(14),y=f.PLAYER_TYPES={LIVE:"live",VIDEOJS:"videojs"},B=new u.default("PlayerWrapper"),A=function(a){return(0,q.getNestedValue)(a,"widget-options.vodAutoPlay.vod")},x=function(a,c){var e=void 0;(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.useVodTransitionWidgetOption"))?(e=(0,q.getNestedValue)(a,
"widget-options.enableVodTransition"),e="POST_LIVE"===c.broadcastStatus&&!c.isChatEnabled&&(void 0===e||e)):e="POST_LIVE"===c.broadcastStatus&&!c.isChatEnabled;return e&&c.hlsUrl?function(a,c,e){a={id:c.id,playerType:y.VIDEOJS,isVod:!0,liveToVodAutoPlay:(0,q.getNestedValue)(a,"widget-options.vodAutoPlay.liveToVod"),autoPlay:A(a),vodAutoplay:A(a),enableAccurateVodWatchDuration:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.accurateVodWatchDuration")),isVodViewportPlayer:a.weblab&&(0,q.isWeblabEnabled)(a.weblab.vodViewportPlayer),
isVodViewportMetrics:a.weblab&&(0,q.isWeblabEnabled)(a.weblab.viewportVodMetrics),enableExpandablePlayer:m.playerConfig.enableExpand&&a["widget-options"].enableExpandablePlayer,enableMobileFullscreen:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.enableMobileFullscreen"))&&m.playerConfig.enableExpand,enableIframeFullscreen:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.enableIframeFullscreen"))&&m.playerConfig.enterFullscreenOnExpand,enableSingularPlayer:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,
"weblab.enableSingularPlayer")),isPlayPauseEnabled:a.weblab&&(0,q.isWeblabEnabled)(a.weblab.enablePlayPause),isAskQuestionEnabled:!1};return b({},a,{videoContentId:c.asin,videoSourceUrl:e})}(a,c,c.hlsUrl):function(a,c){return b({},(0,k.default)(c,"asin broadcastStatus id pinnedMessage showId startTime isChatEnabled".split(" ")),{videoMetadata:c.videoMetadata||void 0,playerType:y.LIVE,isPlayPauseEnabled:a.weblab&&(0,q.isWeblabEnabled)(a.weblab.enablePlayPause),volume:a.player.volume,closedCaptionEnabled:a.player.closedCaptionEnabled,
isClosedCaptionAvailable:a.player.closedCaptionAvailable,closedCaptionOverlayEnable:a.weblab&&(0,q.isWeblabEnabled)(a.weblab.closedCaptionOverlay),enableExpandablePlayer:m.playerConfig.enableExpand&&a["widget-options"].enableExpandablePlayer,enableMobileFullscreen:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.enableMobileFullscreen"))&&m.playerConfig.enableExpand,enableIframeFullscreen:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.enableIframeFullscreen"))&&m.playerConfig.enterFullscreenOnExpand,
isVod:!1,enableSvsPlayer:(0,q.getNestedValue)(a,"weblab.enableSvsPlayer"),enableSingularPlayer:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.enableSingularPlayer")),enableSyncSvsApiCalls:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.enableSyncSvsApiCalls"))})}(a,c)},C={};a=f.PlayerWrapper=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;a=(b.__proto__||Object.getPrototypeOf(b)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.isLiveToVodExperience=!1,a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.default.Component),g(b,[{key:"componentWillMount",value:function(){this.props.playerType===
y.LIVE&&(this.isLiveToVodExperience=!0)}},{key:"getVodAutoPlayStatus",value:function(){var a=this.props,b=a.liveToVodAutoPlay,a=a.vodAutoplay;return this.isLiveToVodExperience?b:a}},{key:"render",value:function(){var a=this.props,b=a.playerType,c=a.enableSingularPlayer;return a.ready?b!==y.VIDEOJS||c?e.default.createElement(n.default,this.props):e.default.createElement(p.default,this.props):e.default.createElement("div",null)}}]),b}();a.propTypes={liveToVodAutoPlay:h.default.bool,vodAutoplay:h.default.bool,
playerType:h.default.string,ready:h.default.bool,enableSingularPlayer:h.default.bool};a.defaultProps={liveToVodAutoPlay:!1,vodAutoplay:!1,playerType:void 0,ready:void 0,enableSingularPlayer:!1};a=(0,l.enableMetrics)(a,"AmazonLivePlayerComponent");d=(0,d.connect)(function(a,c){if(!a.player||!a.player.ready)return{ready:!1};c=function(a){var b=a.playlist.data;return b.playlist[b.asinToBroadcastMap[a.currentBroadcast.asin]]}(a);return b({},function(a,b){var c=null===b.broadcastStartDateTime?b.startTime:
b.broadcastStartDateTime,e=!(0,t.isDeviceMobile)()&&(0,v.default)(a);return{ready:!0,slateImageUrl:function(a,c){return b.slateImageId||(0,q.getNestedValue)(a,"show.data.slateImageId")||""}(a),errorSlateImageUrl:function(a){return(0,q.getNestedValue)(a,"widget-options.errorSlateImageUrl")||"https://m.media-amazon.com/images/G/01/poppin/playerErrorSlate.jpg"}(a),autoPlay:a.player.autoPlay,muted:a.player.muted,isApp:a["is-app"],followMeDockState:(0,q.getNestedValue)(a,"followMe.dockState")||C,isClosedCaptionEnableByDefault:a.player.closedCaptionEnabled,
enableMShopPausePlayerHandler:(0,q.isWeblabEnabled)(a.weblab.enableMShopPausePlayerHandler),displayUnmuteEverywhereOverlay:a.player.displayUnmuteEverywhereOverlay,isViewportPlayer:a.weblab&&(0,q.isWeblabEnabled)(a.weblab.viewportPlayer),title:b.title,startTime:c,broadcastStatus:b.broadcastStatus,channelTitle:a.show.data.title,showControlOverlayOnPlay:m.playerConfig.showControlOverlayOnPlay||!0===a.player.expanded,showControlOverlayOnUndock:m.playerConfig.showControlOverlayOnUndock||!0===a.player.expanded,
isAskQuestionEnabled:e}}(a,c),x(a,c),function(){if((0,t.isInternal)())try{var a=(0,q.getQueryParameter)(r.location.href,"playerOverride");return JSON.parse(a)}catch(b){B.error("Cannot parse player config override",b)}return{}}())},function(a){return{setAudio:function(b,c){b=b?(0,w.mute)(c):(0,w.unmute)(c);a(b)},setPlayerTimeOffsetMS:function(b){b=(0,w.setVodTimeOffset)(b);a(b)},setClosedCaption:function(b){b=b?(0,w.enableClosedCaption)():(0,w.disableClosedCaption)();a(b)},setClosedCaptionAvailable:function(b){a((0,
w.setClosedCaptionAvailable)(b))},setPlayerDomId:function(b){b=(0,w.setPlayerDomId)(b);a(b)},setPlayerExpanded:function(b){b=(0,w.setPlayerExpanded)(b);a(b)},setPlayerStatus:function(b){b=(0,w.setPlayerStatus)(b);a(b)},setPlayerPlaying:function(b){b=(0,w.setPlayerPlaying)(b);a(b)},setShouldDisplayUnmuteAnywhereOverlay:function(b){b=(0,w.setShouldDisplayUnmuteAnywhereOverlay)(b);a(b)}}})(a);f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",
{value:!0});f.SeeDetails=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a},b=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}();d=c(a(1));var e=c(a(0)),h=a(3),k=c(a(385)),l=(c(a(8)),a(2)),
m=a(4),n=a(80),p=c(a(42)),q=c(a(384)),t=c(a(50));a=f.SeeDetails=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.onClick=a.onClick.bind(a),a.onTouchEnd=a.onTouchEnd.bind(a),a.onTouchMove=a.onTouchMove.bind(a),a.onTouchStart=a.onTouchStart.bind(a),
a.navigate=(0,m.guardErrorWrapper)((0,k.default)(a.navigate,500).bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"onClick",value:function(a){a.stopPropagation();a.preventDefault();this.navigate()}},
{key:"onTouchStart",value:function(a){this.touchStartTime=Date.now();this.lastTouchLocation=this.touchStartLocation=this.getTouchCoordinates(a)}},{key:"onTouchMove",value:function(a){this.lastTouchLocation=this.getTouchCoordinates(a)}},{key:"onTouchEnd",value:function(){this.touchStartTime&&this.touchStartLocation&&5E3>Date.now()-this.touchStartTime&&50>(0,l.distanceBetween)(this.touchStartLocation,this.lastTouchLocation)&&this.navigate();this.lastTouchLocation=this.touchStartLocation=this.touchStartTime=
null}},{key:"getPageType",value:function(){var a=this.props.pageType,b=r.ue_pty;return b&&"NoPageType"!==b?b:a||""}},{key:"getPageIdentifier",value:function(){return r.ue_pti||""}},{key:"getRequestId",value:function(){return r.ue_id||""}},{key:"getMerchantId",value:function(){return r.ue_mid||""}},{key:"getTouchCoordinates",value:function(a){return a.touches&&a.touches.length?{x:a.touches[0].clientX,y:a.touches[0].clientY}:null}},{key:"getUrl",value:function(){var a=this.props.item;return this.isProduct()?
this.getUrlWithQueryParameters(this.getUrlProductPrefix()+a.productLink):this.getUrlWithQueryParameters(a.url)}},{key:"getUrlProductPrefix",value:function(){var a=this.props,b=a.marketPlaceName;return a.isEmbeddedRequest?"https://"+b:r.location&&r.location.origin?r.location.origin:""}},{key:"getUrlWithQueryParameters",value:function(a){var b=this.props,c=b.placementId,b=b.slotName,c={pf_rd_r:this.getRequestId(),pf_rd_p:c,pf_rd_m:this.getMerchantId(),pf_rd_t:this.getPageType(),pf_rd_i:this.getPageIdentifier(),
pf_rd_s:b};return(0,l.updateQueryParameters)(a,c)}},{key:"navigate",value:function(){var a=this.props,b=a.item,c=a.broadcastId;p.default.seeDetailsSushi(a.details,b,a.componentName,a.deal);this.isProduct()&&t.default.postVibesEvent(c,b,"seeDetail");var e=this.getUrl();q.default.dock(e,function(){r.open(e,"_blank")})}},{key:"isProduct",value:function(){return this.props.item.type!==n.CardTypes.CUSTOM_TILE}},{key:"render",value:function(){var a=this.props,b=a.children;return e.default.createElement("span",
g({role:"presentation",className:"see-details","aria-label":a.ariaLabel},a.touchToClick?{onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd}:{onClick:this.onClick}),b)}}]),c}();a.propTypes={item:d.default.object.isRequired,details:d.default.object.isRequired,broadcastId:d.default.string,deal:d.default.object,componentName:d.default.string,placementId:d.default.string,marketPlaceName:d.default.string,isEmbeddedRequest:d.default.bool,children:d.default.any.isRequired,
slotName:d.default.string,pageType:d.default.string,ariaLabel:d.default.string,touchToClick:d.default.bool};a.defaultProps={broadcastId:"",deal:{},componentName:"See Details",placementId:"",marketPlaceName:"",isEmbeddedRequest:!1,slotName:"",pageType:"",ariaLabel:"",touchToClick:!1};f.default=(0,h.connect)(function(a){return{isEmbeddedRequest:!!a["widget-options"]&&a["widget-options"].embedded,marketPlaceName:a["widget-options"]?a["widget-options"].marketplaceName:"",placementId:a.metrics?a.metrics.placementId:
"",slotName:a.metrics?a.metrics.adSlotName:"",pageType:a.metrics?a.metrics.pageType:""}})(a)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default={getWindow:function(){return r},isSafeFrame:function(){return void 0!==r.amazonLiveSafeFrameWindow&&null!==r.amazonLiveSafeFrameWindow},getAmazonLiveSafeFrameWindow:function(){return r.amazonLiveSafeFrameWindow}}},,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
f.stateManager=void 0;var g=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}(),b=a(133),e=a(621),h=c(a(13)),k=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(a(14)),l=c(a(620)),m=c(a(604)),n=a(154),p=c(a(603)),
q=c(a(588));d=c(a(587));var t=c(a(586)),u=c(a(585)),v=c(a(584)),w=c(a(583)),y=c(a(582)),B=c(a(129)),A=c(a(67)),x=c(a(227)),C=c(a(578)),D=c(a(577)),F=c(a(576)),H=c(a(573)),E=c(a(2)),G=c(a(572)),I=c(a(5)),r=c(a(571)),R=c(a(32)),T=c(a(224)),N=[d.default,t.default,C.default,D.default,F.default];a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.useLocalDataOnce=function(a,b){var c=h.default.A.state(a);if(c){var e={};e[a]=c;b(a,e);h.default.A.state(a,
null)}return{orFetch:function(b){return c?null:b(a)}}};this.detectDifferentStream=function(a,b,c){b=b[x.default.PLAYLIST][0].id!==c.currentBroadcast.id;return a&&b};this.extractWidgetOption=function(a,b){return b["widget-options"]?b["widget-options"][a]:null};var c=[];(0,n.applyPerformanceMiddleWare)(c);var d=(0,e.composeWithDevTools)({});this.store=(0,b.createStore)(l.default,d(b.applyMiddleware.apply(void 0,c)));this.endpoints=[];this.firstStream=!0;this.logger=new I.default("StateManager");this.bindCalls()}
return g(a,[{key:"bindCalls",value:function(){this.updateValidPlaylistData=this.updateValidPlaylistData.bind(this);this.fetchPlaylist=this.fetchPlaylist.bind(this);this.updateReduxStore=this.updateReduxStore.bind(this);this.checkForLiveStream=this.checkForLiveStream.bind(this);this.handleSuccess=this.handleSuccess.bind(this);this.handlePollerData=this.handlePollerData.bind(this);this.handleStringTranslationsData=this.handleStringTranslationsData.bind(this);this.handleShowData=this.handleShowData.bind(this);
this.handleMediaData=this.handleMediaData.bind(this)}},{key:"fetch",value:function(a,b,c){var e=this;z.when("A").execute(function(d){d.ajax(b,{method:"get",success:function(b){c(a,b)},error:function(c,d){e.handleError(a,c,b,d)}})})}},{key:"handleSuccess",value:function(a,b){var c=a.replace(x.default.POSTFIX,"");this.store.dispatch(k.setDataAndSuccess(c,b[x.default.PREFIX+a]))}},{key:"handleError",value:function(a,b,c,e){this.logger.warn('Got "'+e+'" while fetching '+a+" at "+c+", error response was:",
b)}},{key:"handlePollerData",value:function(a,b){this.handleSuccess(a,b);h.default.A.state(x.default.POLLER,b[x.default.POLLER])}},{key:"handlePlaylistData",value:function(a,b){a={playlist:b[x.default.PREFIX+a]};var c=b[x.default.ENDPOINTS],e=a.playlist[0];b=b[x.default.BROADCAST_EVENTS];e.lcid=b.lcid;e.broadcastStatus=b.broadcastStatus;e.videoMetadata=b.videoMetadata;this.store.dispatch(k.setPlaylistData(a));this.store.dispatch(k.vods(e.asin,b.vods));this.store.dispatch(k.perks(e.asin,b.perks));
this.store.dispatch(k.isChatEnabled(e.asin,b.isChatEnabled));this.store.dispatch(k.chatStatus(e.asin,b.chatStatus));this.fetchShowData(c);this.fetchChatData(e,c);this.fetchCarouselData(e.asin,c[this.getCarouselDataKey()][e.asin]);h.default.A.state(x.default.POLLER,{pollAsinList:[e.asin]});m.default.registerBroadcastPollEvents(this.store,e.asin);m.default.registerCarouselPollEvents(this.store,e.asin)}},{key:"addExternallyProvidedData",value:function(a){var b=h.default.A.state(x.default.PREFIX+a)||
{};a=a.replace(x.default.POSTFIX,"");this.store.dispatch(k.setInitialLoadData(a,b))}},{key:"initializeIsApp",value:function(a){this.store.dispatch(k.setInitialLoadData("is-app",a))}},{key:"initializeSafeFrame",value:function(a,b){b&&E.default.isWeblabEnabled(b.safeframeViewport)&&a.data&&a.data.displayAds&&(R.default.getWindow().amazonLiveSafeFrameWindow=new r.default)}},{key:"initializeFromPayload",value:function(a,b){p.default.initializeAll(this.store);var c=b.weblab,e=b.auiPageContext,d=b.widgetOptions,
n=b.metrics,m=b.customerContext,f=b.poll,q=b.vibesEvents;this.endpoints=b.endpoints.data;this.store.dispatch(k.setInitialLoadData("component-id",a));this.store.dispatch(k.setInitialLoadData(c.key,c.data));this.store.dispatch(k.setInitialLoadData(e.key,e.data));this.store.dispatch(k.setInitialLoadData(d.key,d.data));this.store.dispatch(k.setInitialLoadData(n.key,n.data));this.store.dispatch(k.setInitialLoadData(m.key,m.data));this.store.dispatch(k.setInitialLoadData(f.key,f.data));this.store.dispatch(k.setInitialLoadData(q.key,
q.data));this.initializeSafeFrame(d,c.data);"desktopShoppingCarousel"===a||"mobileShoppingCarousel"===a?this.carouselAsyncSteps():this.commonAsyncSteps()}},{key:"carouselAsyncSteps",value:function(){q.default.initialize(this.store).addSubscribers(N);this.fetchStringTranslationData();this.fetchMediaData();m.default.registerCarouselEvents(this.store)}},{key:"fetchStringTranslationData",value:function(){var a=this;this.useLocalDataOnce(x.default.STRING_TRANSLATIONS,this.handleStringTranslationsData).orFetch(function(){a.fetch(x.default.STRING_TRANSLATIONS,
a.endpoints[x.default.STRING_TRANSLATIONS],a.handleStringTranslationsData)})}},{key:"fetchMediaData",value:function(){var a=this;this.useLocalDataOnce(x.default.MEDIACLIENT,this.handleMediaData).orFetch(function(){a.fetch(x.default.MEDIACLIENT,a.endpoints[x.default.MEDIACLIENT],a.handleMediaData)})}},{key:"fetchShowData",value:function(a){var b=this;this.useLocalDataOnce(x.default.SHOW,this.handleShowData).orFetch(function(){b.fetch(x.default.SHOW,a[x.default.SHOW],b.handleShowData)})}},{key:"fetchPlaylist",
value:function(){var a=this;this.useLocalDataOnce(x.default.PLAYLIST,function(b,c){a.updateValidPlaylistData(c[b])}).orFetch(function(){(new G.default(a.endpoints[x.default.PLAYLIST],a.updateValidPlaylistData,a.extractWidgetOption("enableContinuousStreaming",a.store.getState()))).ajaxHandler()})}},{key:"fetchCarouselData",value:function(a,b){var c=this;if(void 0!==b){var e=function(b,e){c.handleCarouselData(b,e,a)};this.useLocalDataOnce(x.default.SHOPPING_CAROUSEL,e).orFetch(function(){c.fetch(x.default.SHOPPING_CAROUSEL,
b,e)})}}},{key:"fetchChatData",value:function(a,b){var c=this,e=this.store.getState(),d=E.default.isWeblabEnabled(e.weblab.enableAskQuestion)&&E.default.getNestedValue(e,"widget-options.isAskQuestionEnabled"),n=!e["widget-options"]||E.default.getNestedValue(e,"widget-options.isChatEnabled"),p=E.default.isWeblabEnabled(e.weblab.chatInExpandedView)&&E.default.getNestedValue(e,"widget-options.isChatEnabledInExpanded"),e=E.default.getNestedValue(e,"widget-options.enableExpandablePlayer");if(n||d||p&&
e){var m=function(b,e){c.handleChatData(b,e,a)};this.useLocalDataOnce(x.default.CHAT,m).orFetch(function(){c.fetch(x.default.CHAT,b[x.default.CHAT],m)})}}},{key:"fetchPollerData",value:function(){this.fetch("poller-data",this.endpoints[x.default.POLLER],this.handlePollerData)}},{key:"updateCarousel",value:function(a){var b=this.endpoints[this.getCarouselDataKey()][a];this.fetchCarouselData(a,b)}},{key:"getCarouselDataKey",value:function(){return x.default.SHOPPING_CAROUSEL_V2}},{key:"commonAsyncSteps",
value:function(){this.setupListeners();this.checkForLiveStream()}},{key:"setupListeners",value:function(){var a=this;q.default.initialize(this.store).addSubscribers(N);q.default.addSubscriber(v.default);var b=this.store.getState().weblab;E.default.isWeblabEnabled(b.liveShows)&&m.default.registerFollowMeEvents(this.store,this.updateValidPlaylistData);E.default.isWeblabEnabled(b.glance)&&h.default.A.on("amazonlive:glance:changeBroadcast",function(b){h.default.A.trigger(B.default.DISABLED);var c=a.extractWidgetOption("enableContinuousStreaming",
a.store.getState());(new G.default(b,a.updateValidPlaylistData,c,0)).ajaxHandler()});E.default.isWeblabEnabled(b.enableLightningDealsAddToCart)&&(q.default.addSubscriber(w.default),y.default.startPolling(this.store));m.default.registerFollowMeEvents(this.store);m.default.registerChatEvents(this.store);m.default.registerConversationEvents(this.store);h.default.A.on("amazonlive-stream-available",this.updateReduxStore);h.default.A.on(A.default.CHECK_FOR_LIVE_STREAM,this.checkForLiveStream)}},{key:"updateReduxStore",
value:function(){this.fetchStringTranslationData();this.fetchMediaData();this.fetchPollerData();q.default.addSubscriber(u.default)}},{key:"checkForLiveStream",value:function(){this.logger.log("check for live stream");this.fetchPlaylist()}},{key:"updateAdSlotWithNoLiveStream",value:function(a){a&&E.default.isWeblabEnabled(a.safeframeCollapse)&&R.default.isSafeFrame()&&T.default.postStatusChangeEvent({sourceName:"AmazonLive",eventName:"StatusUpdate",status:"NoStreamAvailable"})}},{key:"updateValidPlaylistData",
value:function(a){var b=this.isValidBroadcast(a),c=this.store.getState();return this.hasNoValidStream(b,a,c)?(this.logger.log("No live stream detected"),a=a[x.default.ENDPOINTS],b=this.extractWidgetOption("showBackground",c)&&"mobileShow"===c["component-id"],a&&b&&this.fetchShowData(a),this.store.dispatch(k.setDataAndSuccess("playlist",{})),this.updateAdSlotWithNoLiveStream(c.weblab),!1):this.detectDifferentStream(b,a,c)?(this.logger.log("Different live stream detected"),h.default.A.trigger(B.default.DISABLED),
this.store.dispatch(k.resetRedux()),this.handlePlaylistData("playlist-data",a),h.default.A.trigger("amazonlive-stream-available"),!0):(this.logger.log("Same live stream detected"),!1)}},{key:"handleStringTranslationsData",value:function(a,b){a=b[x.default.STRING_TRANSLATIONS];for(var c in a)h.default.Translation.Strings[c]=a[c];this.store.dispatch(k.setSuccess("string-translations"))}},{key:"handleShowData",value:function(a,b){b[x.default.SHOW]?this.store.dispatch(k.setDataAndSuccess("show",b[x.default.SHOW].show)):
this.logger.warn("Misformed show data returned.")}},{key:"handleCarouselData",value:function(a,b,c){b[x.default.SHOPPING_CAROUSEL].broadcastAsin=c;this.handleSuccess("shopping-carousel-data",b)}},{key:"handleChatData",value:function(a,b,c){a=b[x.default.CHAT];a.broadcastId=c.id;a.privateChat=c.privateChatroomUrl;a.publicChat=c.publicChatroomUrl;this.handleSuccess("chat-data",b)}},{key:"handleMediaData",value:function(a,b){this.handleSuccess("mediaclient-data",b)}},{key:"hasNoValidStream",value:function(a,
b,c){b=H.default.checkForNotRenderState(b[x.default.BROADCAST_EVENTS],this.extractWidgetOption("invalidStates",c));return!a||b}},{key:"isValidBroadcast",value:function(a){return H.default.getBroadcastValidation(this.store)(a[x.default.PLAYLIST][0],a[x.default.BROADCAST_EVENTS])}},{key:"getStore",value:function(){return this.store}}]),a}();f.stateManager=new a},,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.getDeal=f.isDealValid=f.isDealPrimeExclusive=f.canAddToCartDeal=f.showDealInfo=
f.getDealBadgeText=void 0;var c=function(a){return a&&a.__esModule?a:{default:a}}(a(9)),g=a(19),b={DEAL_OF_THE_DAY:["amazonlive-portal-deal-badge-text-dealoftheday","Deal of the Day"],PD:["amazonlive-portal-deal-badge-text-primeday","Prime Day Deal"],BF:["amazonlive-portal-deal-badge-text-blackfriday","Black Friday"],CM:["amazonlive-portal-deal-badge-text-cybermonday","Cyber Monday"]};d=f.getDealBadgeText=function(a){return(a=b[a])?c.default.translate.apply(c.default,function(a){if(Array.isArray(a)){for(var b=
0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}(a)):""};a=f.showDealInfo=function(a){return a===g.DealTypes.DEAL_OF_THE_DAY||a===g.DealTypes.LIGHTNING_DEAL};var e=f.canAddToCartDeal=function(a){return!!a&&(a.dealType===g.DealTypes.DEAL_OF_THE_DAY||a.dealType===g.DealTypes.BEST_DEAL)},h=f.isDealPrimeExclusive=function(a){return!!a&&!!a.isPrimeExclusive},k=f.isDealValid=function(a){return!!a&&!!g.DealTypes[a.dealType]&&!!a.dealPrice},l=f.getDeal=function(a,b){a=a&&b&&b[a.asin];
return k(a)?a:void 0};f.default={getDealBadgeText:d,showDealInfo:a,canAddToCartDeal:e,isDealPrimeExclusive:h,isDealValid:k,getDeal:l}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}(),b=
Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a},e=c(a(62)),h=c(a(28)),k=a(80),l=a(21),m=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=a.payload,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l.metricsEmitPriority.HIGH,a=function(a,c,d){return b({PROMOTED_ITEM_ID:e.default.getHightlightedAsin(),WIDGET:"carousel",SLOT_ID:a?100+a.position:100},function(a,
b){return a?a.type&&a.type!==k.CardTypes.PRODUCT?{EVENT_TYPE:"click",STRING_PAYLOAD:a.segmentItemId,CONTEXT:a.title,JSON_PAYLOAD:{title:a.title}}:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c={};b&&(c=b.endDate&&Math.floor((b.endDate.getTime()-(new Date).getTime())/1E3),c={dealId:b.dealId,dealType:b.dealType,percentClaimed:b.percentClaimed,timeRemaining:c});return{EVENT_TYPE:"click",STRING_PAYLOAD:a.asin,CONTEXT:a.title,JSON_PAYLOAD:c}}(a,b):{}}(c,d))}(a.details,
a.item,a.deal);h.default.emitMetrics(b({},a,c,{JSON_PAYLOAD:b({},a.JSON_PAYLOAD,c.JSON_PAYLOAD)}),d)};d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"seeDetailsSushi",value:function(a,b,c,e){m({details:a,item:b,deal:e,payload:{EVENT_TRIGGER_TYPE:"seeDetails:"+c}})}},{key:"addToCartSushi",value:function(a,b,c){m({details:a,item:b,deal:c,payload:{EVENT_TRIGGER_TYPE:"addToCart"}})}},{key:"viewOptionsSushi",value:function(a,
b,c){m({details:a,item:b,deal:c,payload:{EVENT_TRIGGER_TYPE:"viewOptions"}})}},{key:"carouselLeftRightScrollSushi",value:function(){m({payload:{EVENT_TYPE:"click",EVENT_TRIGGER_TYPE:"carouselLeftRightScroll"}})}},{key:"cardInViewportSushi",value:function(a,b,c){m({details:a,item:b,deal:c,payload:{EVENT_TYPE:"impression",EVENT_TRIGGER_TYPE:"cardInViewport"}},l.metricsEmitPriority.LOW)}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default={INITIAL:"INITIAL",
DOCKED:"DOCKED",UNDOCKED:"UNDOCKED",DISMISSED:"DISMISSED"}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d=function(a){return a&&a.__esModule?a:{default:a}}(a(5));var c=a(154),g=new d.default("PmetUtils"),b={wb:1},e=function(a){return r.ue&&r.ue.count(a)||0};f.default={getCount:e,addCount:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;g.debug("Add count: "+a+":"+b);r.ue&&r.ue.count(a,e(a)+b)},logCount:function(a){var b=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:1;g.debug("Log count: "+a+":"+b);r.ue&&r.ue.count(a,b)},addTimestamp:function(a,e){g.debug("Adding Timestamp: "+a);r.uet&&r.uet(e,a,b);(0,c.performanceTimestamp)(a,e)},startTimer:function(a){g.debug("Start timer: "+a);r.ues&&r.ues("ctb",a,"1");r.uet&&r.uet("bb",a,b);(0,c.performanceTimerStart)(a)},endTimer:function(a){g.debug("End timer: "+a);r.uex&&r.uex("ld",a,b);(0,c.performanceTimerEnd)(a)},timestampFlags:{bodyEnd:"be"}}},,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:
{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingCarouselProductActionsButton=void 0;var g=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}(),b=c(a(1)),e=c(a(0));d=a(3);var h=c(a(8)),k=c(a(6)),l=c(a(377));a={buttonSuffix:b.default.string.isRequired,status:b.default.string,onClick:b.default.func,
buttonType:b.default.string,shouldUseAui:b.default.bool,children:b.default.any,buttonValue:b.default.string};b=f.ShoppingCarouselProductActionsButton=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.default.Component),g(b,[{key:"getAuiButton",value:function(){var a=k.default.isDeviceMobile()?"small":"base";return e.default.createElement(h.default.Button,{cssClass:"va-live-product-button-"+this.props.buttonSuffix,
onClick:this.props.onClick,buttonType:this.props.buttonType,status:this.props.status,spacing:"none",textAlign:"center",buttonSize:a,gridUnits:12,value:this.props.buttonValue,"aria-label":this.props.children},this.props.children)}},{key:"getShoppingCarouselProductButton",value:function(){return e.default.createElement(l.default,{status:this.props.status,onClick:this.props.onClick,buttonSuffix:this.props.buttonSuffix},this.props.children)}},{key:"render",value:function(){return this.props.shouldUseAui?
this.getAuiButton():this.getShoppingCarouselProductButton()}}]),b}();b.propTypes=a;b.defaultProps={status:"normal",onClick:null,buttonType:"primary",shouldUseAui:!0,children:"",buttonValue:""};f.default=(0,d.connect)(function(a){a=a["component-id"]||"";return{shouldUseAui:"desktopBrandTile"!==a&&"mobileBrandTile"!==a}})(b)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}var g=c(a(52)),b=a(38),e=c(a(2)),h=a(14),k=new (c(a(5)).default)("BroadcastEventsHelper"),l=[],m=function(a,
b,c){return{startTime:(new Date).getTime(),events:[{id:a,eventContent:b.asin,timestamp:(new Date).getTime()+100,eventType:c}],endTime:(new Date).getTime()+3E3}};d.exports={postVibesEvent:function(a,c,d){var f=b.stateManager.getStore().getState();e.default.isWeblabEnabled(e.default.getNestedValue(f,"weblab.shoppingNotificationEvent"))&&(f=e.default.getNestedValue(f,"vibes-events.vibesEventsUrl")||"https://tdv9f8c902.execute-api.us-east-1.amazonaws.com/Prod/events",g.default.doPostRequest(f,{liveBroadcastId:a,
eventContent:c.asin,eventType:d}).then(function(a){b.stateManager.getStore().dispatch((0,h.vibesEvents)(m(a.id,c,d)))}).catch(function(a){k.error("Error while posting broadcast events data. Error was: "+a)}))},isFiredEventId:function(a){return 0<=l.indexOf(a)||(20<=l.length&&l.shift(),l.push(a),!1)},parseItem:function(a,b){var c=a.eventContent,e=a.eventType;b=(new Date(b)).getTime()-3E3;a=Math.round(100*((new Date(a.timestamp)).getTime()-b)/1E3)/100;b=.1+Math.round(290*Math.random())/100;return{asin:c,
eventType:e,delay:0<a?a:b}},getNewVibesEvents:m,shouldDisplayShoppingNotification:function(a){var b=a.shouldRender,c=a.vibesConfig,e=a.isDisplayAds,d=a.enableVibesExpandableViewOnly,f=a.isPlayerExpanded;return!(!(a.isVibesEnabledByWeblab&&b&&c)||(d||e)&&!f)}}},,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c={};f.doRequest=c.doRequest=function(a,b){var c=b.method,d=b.data;return new Promise(function(b,f){z.when("A").execute(function(m){m.$.ajax({url:a,type:c,data:d&&JSON.stringify(d),
success:function(a){b(a)},error:function(a){f(a)}})})})};f.doGetRequest=c.doGetRequest=function(a){return c.doRequest(a,{method:"get"})};f.doPostRequest=c.doPostRequest=function(a,b){return c.doRequest(a,{method:"post",data:b})};f.default=c},,,,,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.isChatEnabledInExpandedView=f.isChatEnabled=void 0;var g=c(a(96)),b=c(a(24)),e=c(a(75));d=c(a(5));var h=c(a(2)),k=new d.default("is-chat-enabled");
f.isChatEnabled=function(a){if((0,e.default)(a)||!(a["widget-options"]||{}).isChatEnabled)return!1;a=g.default.getCurrentBroadcastFromPlaylist(a);if(!a)return!1;var c=a.broadcastStatus,d=a.hlsUrl;return c!==b.default.FUTURE&&(c===b.default.LIVE?(k.debug("Broadcast in live mode"),!0):c!==b.default.POST_LIVE||d||a.isChatEnabled?0<=[b.default.PRE_LIVE,b.default.GRACE_PERIOD].indexOf(c)?(k.debug("broadcast is starting soon, keep chat on"),!0):a.isChatEnabled:(k.debug("broadcast ended, but hlsUrl is not ready yet. Stay in post-live mode and keep chat on"),
!0))};f.isChatEnabledInExpandedView=function(a){var b=h.default.isWeblabEnabled(a.weblab&&a.weblab.chatInExpandedView?a.weblab.chatInExpandedView:"")&&h.default.getNestedValue(a,"widget-options.isChatEnabledInExpanded"),c=h.default.getNestedValue(a,"widget-options.enableExpandablePlayer");a=a.player&&a.player.expanded;return b&&c&&a}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.getHightlightedAsinFromSegmentItemId=void 0;var c=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=
c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}();d=a(38);!function(a){a&&a.__esModule}(a(2));var g=d.stateManager.getStore(),b="",e=function(){var a=g.getState();b=h(a["shopping-carousel"]?a["shopping-carousel"].data:null)},h=f.getHightlightedAsinFromSegmentItemId=function(a){if(!a)return"";g.getState().weblab;var b=a&&a.segments&&0<a.segments.length?a.segments[0]:null;
if(!b)return"";a=a.highlightedSegmentItemId;for(var c=0;c<b.segmentItems.length;c++){var e=b.segmentItems[c];if(e.segmentItemId===a)return"PRODUCT"===e.type?e.asin:""}return""};a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;g.subscribe(e)}return c(a,[{key:"getHightlightedAsin",value:function(){return b}}]),a}();f.default=new a},,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
var g=c(a(0));d=a(3);var b=c(a(18)),e=c(a(425)),h=c(a(299)),k=c(a(158)),l=c(a(6)),m=c(a(2)),n=a(61),p=c(a(75));f.default=(0,d.connect)(function(a){var c=a["widget-options"]||{},e=c.embedded,d=c.isExpanded,f=c.autoFocus,c=c.enableDestinationIngress,l=(0,n.isChatEnabled)(a),g=(0,n.isChatEnabledInExpandedView)(a),h=!0;!1===m.default.getNestedValue(a,"widget-options.isCarouselEnabled")&&(h=!1);var x=m.default.getNestedValue(a,"widget-options.bannerState"),C=[k.default.BANNER,k.default.FOLLOW_BANNER],
x=void 0!==m.default.getNestedValue(a,"widget-options.title")||C.includes(x);return{ready:a.playlist.loadStatus===b.default.SUCCESS&&0<a.playlist.data.playlist.length,isEmbeddedRequest:e,isExpanded:d,autoFocus:f,isChatEnabled:l,isChatEnabledInExpandedView:g,isCarouselEnabled:h,isAskQuestionEnabled:(0,p.default)(a),isBannerEnabled:x,showId:a.currentBroadcast.showId,enableSkeletonLoading:m.default.isWeblabEnabled(a.weblab.enableSkeletonLoading),isDestinationIngressEnabled:!1!==c&&m.default.isWeblabEnabled(a.weblab.enableDestinationIngress)}})(function(a){var b=
l.default.isDeviceMobile()?e.default:h.default;return g.default.createElement(b,a)})},,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=a(19),g=void 0,b=void 0,e=void 0,h=void 0,k=void 0;f.default={initialize:function(a,d){h="0"!==a&&0!==a&&""!==a&&a;k=c.ClientID.PREFIX+"_"+(c.ClientID.Suffix[d]||c.ClientID.Suffix.DESKTOP);g=r.ue_id;b=r.ue_mid;e=r.ue_sid},getRequestID:function(){return g},getMarketplaceID:function(){return b},getSessionID:function(){return e},getCustomerID:function(){return h},
getClientID:function(){return k},isRecognizedCustomer:function(){return!!h}}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d=function(a){return"amazonLiveEvent:"+a};d={CHECK_FOR_LIVE_STREAM:d("checkForLiveStream"),MESSAGE_RECEIVED:d("messageReceived"),MESSAGE_FILTERED:d("messageFiltered"),MESSAGE_REMOVED:d("messageRemoved"),RESET_MESSAGES:d("resetMessages"),DUMP_MESSAGES:d("dumpMessages"),PEN_NAME_UPDATED:d("pennameUpdated"),PEN_NAME_INVALID:d("pennameInvalid"),CURRENT_USER_BANNED:d("currentUserBanned"),
CLEANUP_CAROUSEL:d("cleanupCarousel"),UPDATE_CAROUSEL:d("updateCarousel"),CAROUSEL_UPDATED:d("carouselUpdated"),WIDGET_LOADED:d("widgetLoaded"),START_CONVERSATION:d("startConversation"),CHATROOM_JOINED:d("chatroomJoined")};f.default=d},,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.BrandImage=void 0;d=c(a(1));var g=c(a(0)),b=(a(3),a(79));a={imageUrl:d.default.string.isRequired,maxWidth:d.default.number,maxHeight:d.default.number};
d=f.BrandImage=function(a){var c=a.maxWidth,d=a.maxHeight;a=a.imageUrl;var f=void 0,m=/Firefox\/([0-9]+)/.exec(navigator.userAgent);m&&2===m.length&&62>Number(m[1])&&(f=1);c=(0,b.getStyledImage)({imageUrl:a,baseWidth:c,baseHeight:d,allowUpscaling:!0,needAutoCrop:!1,maxTimesSupport:f});return g.default.createElement("div",{className:"amzlv-brand-image-container"},g.default.createElement("img",{className:"amzlv-brand-image",src:c.src,srcSet:c.srcSet,alt:""}))};d.propTypes=a;d.defaultProps={maxWidth:null,
maxHeight:null};f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(290)),b=void 0;d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
!0}return c(a,null,[{key:"isAt2xDPI",value:function(){return void 0===b&&(b=g.default.get2xDPIMediaQuery().matches),b}},{key:"select",value:function(b,c){return b?c&&a.isAt2xDPI()?c:b:c}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a){return a&&a.__esModule?a:{default:a}}(a(229));f.default=function(a){return(0,c.default)(a,"enableAskQuestion","isAskQuestionEnabled")}},,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.reset=
f.loadAuiComponent=void 0;var c=function(a){return a&&a.__esModule?a:{default:a}}(a(2)),g={};d={};f.loadAuiComponent=d.loadAuiComponent=function(a,e){return g[e]?g[e]:(a&&c.default.registerUnique(a),g[e]=new Promise(function(a){z.when(e).execute(a)}),g[e])};f.reset=d.reset=function(){g={}};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.getReftag=f.getUrl=f.addToCart=f.CLIENT_NAME=void 0;var g=c(a(13));d=c(a(5));var b=
f.CLIENT_NAME="AmazonLive",e=new d.default("AddToCartDefault");d=f.addToCart=function(a){var c=a.product,d=a.details,p=a.callback;a=k("live_carousel_addtocart",c,d);a=h("/gp/add-to-cart/json",a);var f=function(a,b){e.error("Added to cart failed: "+b);p({hasError:!0})};e.debug("Adding to cart: "+c.asin);g.default.A.ajax(a,{method:"post",params:{verificationSessionID:d.sessionId,clientName:b,ASIN:c.asin,offerListingID:c.offerListingId},timeout:5E3,success:function(a){if(a.isOK)return a=parseInt(a.cartQuantity),
e.debug("Added to cart with quantity: "+a),void p({hasError:!1,cartQuantity:a});f(0,"response.isOK not true")},error:f})};var h=f.getUrl=function(a,b){return a+"/ref\x3d"+b},k=f.getReftag=function(a,b,c){return[a,c.segmentId,c.position,b.asin].join("_")};f.default={addToCart:d,getUrl:h,getReftag:k}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=["gif","png","webp","pkmz"],g=function(a){var e=a.baseWidth,d=a.baseHeight,f=a.allowUpscaling,l=a.fileExtension,m=a.borderSize,n=
a.borderColor,p=[],q=void 0;a.needAutoCrop?p.push("AC"):m&&p.push(["BO"+m,n[0],n[1],n[2]].join());return e&&d?(q=f?"UX":"SR",p.push(""+q+e+","+d)):d?(q=f?"UY":"SY",p.push(q+d)):e&&(q=f?"UX":"SX",p.push(q+e)),-1<c.indexOf(l)&&p.push("FM"+l),"_"+p.join("_")+"_"};d=f.getStyledImage=function(a){var c=a.imageUrl,d=a.baseWidth,f=a.baseHeight,l=a.allowUpscaling,l=void 0!==l&&l,m=a.maxTimesSupport,n=a.needAutoCrop,n=void 0===n||n,p=a.borderSize;a=a.borderColor;var q={};return q.srcSet=function(a){var b=a.imageUrl,
c=a.baseWidth,e=a.baseHeight,d=a.allowUpscaling,f=a.maxTimesSupport,p=a.needAutoCrop,n=a.borderSize;a=a.borderColor;for(var m=[],q=b.split(".").slice(0,-1).join("."),b=b.split(".").pop(),l=1;l<=f;l+=.5){var k=q+"."+g({baseWidth:Math.round(c*l),baseHeight:Math.round(e*l),needAutoCrop:p,allowUpscaling:d,fileExtension:b,borderSize:n,borderColor:a})+"."+b;m.push(k+" "+(l+"x"))}return m.join(", ")}({imageUrl:c,baseWidth:d,baseHeight:f,allowUpscaling:l,maxTimesSupport:void 0===m?3:m,needAutoCrop:n,borderSize:p,
borderColor:a}),q.src=function(a){var b=a.imageUrl,c=a.baseWidth,e=a.baseHeight,d=a.allowUpscaling,f=a.needAutoCrop,p=a.borderSize;a=a.borderColor;var n=b.split(".").slice(0,-1).join("."),b=b.split(".").pop();return n+"."+g({baseWidth:c,baseHeight:e,needAutoCrop:f,allowUpscaling:d,fileExtension:b,borderSize:p,borderColor:a})+"."+b}({imageUrl:c,baseWidth:d,baseHeight:f,allowUpscaling:l,needAutoCrop:n,borderSize:p,borderColor:a}),q};f.default={getStyledImage:d}},function(d,f,a){Object.defineProperty(f,
"__esModule",{value:!0});d={};f.CardTypes=d.CardTypes={PRODUCT:"PRODUCT",CUSTOM_TILE:"CUSTOM_TILE_TEMPLATED"};f.default=d},,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d=a(3);var b=a(116),e=c(a(2)),h=c(a(96)),k=(c(a(24)),c(a(18))),l=c(a(408)),m=c(a(351)),n=a(14);a=(0,b.enableMetrics)(function(a){return a.ready?g.default.createElement(l.default,a):a.enableSkeletonLoading?g.default.createElement(m.default,null):g.default.createElement("div",
null)},"AmazonLiveCarouselComponent");a=(0,d.connect)(function(a,b){var c=e.default.getNestedValue(a,"widget-options.carousel")||{},d=e.default.getNestedValue(a,"shopping-carousel.data")||{},f=(e.default.getNestedValue(a,"player.vodTimeOffsetMS"),e.default.getNestedValue(a,"shopping-carousel.loadStatus")===k.default.SUCCESS&&e.default.getNestedValue(a,"string-translations.loadStatus")===k.default.SUCCESS&&void 0!==d.broadcastAsin),d=(h.default.getCurrentBroadcastFromPlaylist(a),e.default.getNestedValue(a,
"currentBroadcast.id")||d.broadcastAsin||""),n=!!e.default.getNestedValue(a,"widget-options.gateway-options.isAtf")&&!e.default.getNestedValue(a,"shopping-carousel.data.hasGatewayEventsEmitted"),m=e.default.getNestedValue(a,"widget-options.gateway-options.slot-id")||"";return{perks:a.perks,broadcastAsin:e.default.getNestedValue(a,"currentBroadcast.asin"),broadcastId:d,ready:f,sessionId:e.default.getNestedValue(a,"aui-page-context.sessionId"),carouselLayout:c.layout||b.carouselLayout,enableSkeletonLoading:a.weblab&&
e.default.isWeblabEnabled(a.weblab.enableSkeletonLoading),enableSingleDoubleCardCarousel:a.weblab&&e.default.isWeblabEnabled(a.weblab.enableSingleDoubleCardCarousel),emitDesktopEvents:n,gatewayDesktopSlotId:m,enableCarouselDesktopLazyLoad:a.weblab&&e.default.isWeblabEnabled(a.weblab.carouselDesktopLazyLoad),playerExpanded:a.player&&a.player.expanded,inExpandedPlayer:b.inExpandedPlayer}},function(a,b){return{updateHasGatewayEventEmitted:function(b){b=(0,n.updateGatewayEventsEmitted)(b);a(b)}}})(a);
f.default=a},,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.isViewportVisible=void 0;var g=c(a(32)),b=c(a(193));d=f.isViewportVisible=function(){return"visible"===g.default.getWindow().document.visibilityState};var e=function(a){return b.default.fromIntersection(a,b.default.fromViewport())};f.default={isViewportVisible:d,rectInViewportForRect:e,rectInViewportForElement:function(a){return e(b.default.fromElement(a))},elementRatioInViewport:function(a){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=c.attribute,e=void 0===e?"area":e,d=c.containedInElement,c=b.default.fromElement(a),f=[c,b.default.fromViewport()];d&&(d=b.default.fromElement(d),f.push(d));f=b.default.fromIntersection.apply(b.default,f);c=c[e]||0;e=f[e]||0;return 0===c?0:e/c}}},,function(d,f,a){function c(){this.timer&&(clearTimeout(this.timer),this.timer=null)}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=
c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}(),b=function(a){return a&&a.__esModule?a:{default:a}}(a(430)),e=a(2);d=function(){function a(c,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=f.targetTime,n=void 0===n?1E3:n,p=f.targetAreaRatio,q=f.containedInElement,g=f.customEvents,u=f.exitCallback,f=f.repeating;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
!0;this.callback=d;this.targetTime=n;this.isViewCounted=!1;this.exitCallback=u;this.repeating=f;this.viewportMonitorArea=new b.default(c,function(){var a=this;this.timer||this.isViewCounted||(this.timer=(0,e.setTimeout)(function(){a.isViewCounted=!0;a.callback();a.repeating||"function"==typeof a.exitCallback||a.stop()},this.targetTime))}.bind(this),this.onViewportMonitorAreaExit.bind(this),{targetAreaRatio:p,containedInElement:q,customEvents:g})}return g(a,[{key:"start",value:function(){this.isViewCounted||
this.viewportMonitorArea.start()}},{key:"stop",value:function(){this.viewportMonitorArea.stop();c.bind(this)()}},{key:"onViewportMonitorAreaExit",value:function(){c.bind(this)();this.isViewCounted&&("function"==typeof this.exitCallback&&this.exitCallback(),this.repeating?this.isViewCounted=!1:this.stop())}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.getLatencyTimeFromHTMLPrint=void 0;var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];
f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,d,f){return d&&a(c.prototype,d),f&&a(c,f),c}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(28));f.getLatencyTimeFromHTMLPrint=function(){return r&&r.AmazonLiveHTMLPrintDateTime?(new Date).getTime()-r.AmazonLiveHTMLPrintDateTime:""};d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return c(a,null,[{key:"emitWidgetInViewportMetric",
value:function(a){g.default.onSushiMetricsReady(function(b,c,d){c[b.metricSchema.BROADCAST_ID]=a;c[b.metricSchema.EVENT_TYPE]="widgetInViewport";b.emitMetricsPayload(c,d)})}},{key:"emitSubscribePushNotificationSignup",value:function(a,b){g.default.onSushiMetricsReady(function(c,d,f){d[c.metricSchema.BROADCAST_ID]=a;d[c.metricSchema.EVENT_TYPE]="subscribeOverlay";d[c.metricSchema.WIDGET]="Subscribe";d[c.metricSchema.STRING_PAYLOAD]=b;c.emitMetricsPayload(d,f)})}}]),a}();f.default=d},,,,,,,,,function(d,
f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return c(a,null,[{key:"getCurrentBroadcastFromPlaylist",value:function(a){var c=a&&a.currentBroadcast&&
a.currentBroadcast.asin;a=a&&a.playlist&&a.playlist.data;return c&&a&&a.playlist&&a.asinToBroadcastMap?a.playlist[a.asinToBroadcastMap[c]]:null}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default={smashModuleKey:"followme-experimental-feature-do-not-use-v2",auiEventDidDock:"followMe:didDock",auiEventDidUndock:"followMe:didUndock",auiEventWillDismiss:"followMe:willDismiss",auiEventWillDock:"followMe:willDock"}},,,,,,function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(62)),e=c(a(28)),h=a(21),k=function(a,c){e.default.onSushiMetricsReady(function(d,e,f){e[d.metricSchema.PROMOTED_ITEM_ID]=b.default.getHightlightedAsin();e[d.metricSchema.BROADCAST_ID]=
a;e[d.metricSchema.WIDGET]="twitchPlayer";c(d,e,f)})};d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"emitVideoPlayMetric",value:function(a,b){k(a,function(a,c,d){var e=c[a.metricSchema.JSON_PAYLOAD]?JSON.parse(c[a.metricSchema.JSON_PAYLOAD]):{};e.secondsOffset=b.seconds_offset||-1;c[a.metricSchema.EVENT_TYPE]="videoPlay";c[a.metricSchema.STREAM_SESSION_ID]=b.play_session_id||"";c[a.metricSchema.INT_PAYLOAD]=b.time_since_load_start||
"";c[a.metricSchema.STRING_PAYLOAD]="ttff";c[a.metricSchema.JSON_PAYLOAD]=JSON.stringify(e);a.emitMetricsPayload(c,d)})}},{key:"emitVideoPlayInViewportMetric",value:function(a){k(a,function(a,b,c){b[a.metricSchema.EVENT_TYPE]="videoPlayInViewport";a.emitMetricsPayload(b,c)})}},{key:"emitBufferEmptyMetric",value:function(a,b){k(a,function(a,c,d){c[a.metricSchema.EVENT_TYPE]="bufferEmpty";c[a.metricSchema.STREAM_SESSION_ID]=b.play_session_id||"";c[a.metricSchema.INT_PAYLOAD]=b.buffer_empty_count||"";
e.default.shouldEmitMetrics(h.metricsEmitPriority.MEDIUM)&&a.emitMetricsPayload(c,d)})}},{key:"emitVideoErrorMetric",value:function(a,b){k(a,function(a,c,d){c[a.metricSchema.EVENT_TYPE]="videoError";c[a.metricSchema.STREAM_SESSION_ID]=b.play_session_id||"";c[a.metricSchema.INT_PAYLOAD]=b.time_since_load_start||"";c[a.metricSchema.STRING_PAYLOAD]=b.reason;e.default.shouldEmitMetrics(h.metricsEmitPriority.MEDIUM)&&a.emitMetricsPayload(c,d)})}},{key:"emitMinWatchedMetric",value:function(a,b){k(a,function(a,
c,d){c[a.metricSchema.EVENT_TYPE]="minWatched";c[a.metricSchema.STREAM_SESSION_ID]=b.play_session_id||"";a.emitMetricsPayload(c,d)})}},{key:"emitMutedOrUmmutedMetric",value:function(a,b,c,d){k(a,function(a,e,f){e[a.metricSchema.EVENT_TYPE]=c?"playerMuted":"playerUnmuted";e[a.metricSchema.STREAM_SESSION_ID]=b;e[a.metricSchema.EVENT_TRIGGER_TYPE]=d;a.emitMetricsPayload(e,f)})}},{key:"emitCloseCaptionEnableSushi",value:function(a,b){k(a,function(a,c,d){c[a.metricSchema.EVENT_TYPE]="click";c[a.metricSchema.EVENT_TRIGGER_TYPE]=
"enableClosedCaption";c[a.metricSchema.STREAM_SESSION_ID]=b;a.emitMetricsPayload(c,d)})}},{key:"emitCloseCaptionDisableSushi",value:function(a,b){k(a,function(a,c,d){c[a.metricSchema.EVENT_TYPE]="click";c[a.metricSchema.EVENT_TRIGGER_TYPE]="disableClosedCaption";c[a.metricSchema.STREAM_SESSION_ID]=b;a.emitMetricsPayload(c,d)})}},{key:"emitPlayerExpandedSushi",value:function(a,b){k(a,function(a,c,d){c[a.metricSchema.EVENT_TYPE]="click";c[a.metricSchema.EVENT_TRIGGER_TYPE]=b?"expandPlayer":"collapsePlayer";
a.emitMetricsPayload(c,d)})}},{key:"emitPlayButtonClickedSushi",value:function(a){k(a,function(a,b,c){b[a.metricSchema.EVENT_TYPE]="click";b[a.metricSchema.EVENT_TRIGGER_TYPE]="playButton";a.emitMetricsPayload(b,c)})}},{key:"emitPauseButtonClickedSushi",value:function(a){k(a,function(a,b,c){b[a.metricSchema.EVENT_TYPE]="click";b[a.metricSchema.EVENT_TRIGGER_TYPE]="pauseButton";a.emitMetricsPayload(b,c)})}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});f.DestinationIngress=f.DESTINATION_PAGE_URL=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0)),e=c(a(9));d=a(23);var h=a(4),k=c(a(6)),l=f.DESTINATION_PAGE_URL="/live?ref\x3dAZL3P_moreinvid";a=f.DestinationIngress=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
!0;var b;b=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!=typeof b&&"function"!=typeof b?this:b;return b.onClick=(0,h.guardErrorWrapper)(a.getOnClickMetricsHandler(b.onClick,{EVENT_TRIGGER_TYPE:"mobileDestinationIngress"}).bind(b)),b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"onKeyUp",value:function(a){13===a.keyCode&&32===a.keyCode&&this.doButtonAction(a)}},{key:"onClick",value:function(a){a.preventDefault();r.location.href=""+r.location.origin+l}},{key:"render",value:function(){var a=k.default.isDeviceMobile()?"amazon-live-destination-ingress":"amazon-live-destination-ingress-alt";
return b.default.createElement("div",{role:"presentation",onClick:this.onClick,onKeyUp:this.onKeyUp,className:"destination-ingress"},b.default.createElement("span",null,e.default.translate(a)),b.default.createElement("span",null,"〉"))}}]),c}();a.propTypes={getOnClickMetricsHandler:Function};a.defaultProps={getOnClickMetricsHandler:function(a){return a}};f.default=(0,d.enableSushiMetrics)("mobileDestinationIngress")(a)},,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});var g=c(a(0)),b=c(a(12));d=a(3);var e=c(a(1)),h=a(41);a=function(a){var c=a.eventDealBadgeType;a=a.eventDealBadgeText;c=(0,b.default)("event-deal-badge",c);return g.default.createElement("div",{className:c},a)};a.propTypes={eventDealBadgeText:e.default.string.isRequired,eventDealBadgeType:e.default.string.isRequired};f.default=(0,d.connect)(function(a){a=a["widget-options"]||{};return{eventDealBadgeText:(0,h.getDealBadgeText)(a.eventDealBadgeType),eventDealBadgeType:a.eventDealBadgeType}})(a)},
function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d=f.getPreselectedProductInfo=function(a){if(a&&a.preselectedProductDimensionList&&0<a.preselectedProductDimensionList.length&&a.variationMatrix){var d=function(a,c){var d=c&&c.map(function(c,d){return a[d]&&a[d].selected&&c.values.indexOf(a[d].value)});c=c&&c.map(function(c,d){return a[d]&&a[d].selected&&a[d].value});return{preselectedResult:d,preselectedIndexedProductKey:"["+d.join(", ")+"]",preselectedInitializationInfo:{itemList:d&&
d.map(function(a,b){return{dimValId:a,dimId:b}}),preselectedOptionNames:c}}}(a.preselectedProductDimensionList,a.variationMatrix.dimensions);return d.product=a.variationMatrix.indexedProducts[d.preselectedIndexedProductKey],d}return null};f.default={getPreselectedProductInfo:d}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingCarouselAddToCartNotification=void 0;var g=c(a(1)),b=c(a(0));d=(c(a(22)),a(3));var e=c(a(9));c(a(8));
a={hasError:g.default.bool,message:g.default.string,carouselCheckIcon:g.default.string};g=f.ShoppingCarouselAddToCartNotification=function(a){return b.default.createElement("div",{className:"added-to-cart-notification "+(a.hasError?"error":"")},b.default.createElement("div",{className:"notification-context"},a.hasError?b.default.createElement("div",{className:"error-icon"}):b.default.createElement("img",{src:a.carouselCheckIcon}),b.default.createElement("span",null,a.message||e.default.translate("amazon-live-carousel-desktop-atc-notification"))))};
g.propTypes=a;g.defaultProps={};f.default=(0,d.connect)(function(a){return{carouselCheckIcon:a.mediaclient.data.carouselCheckIcon}})(g)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0)),b=a(41);a=function(a){return(a=(0,b.getDealBadgeText)(a.deal.dealType))?g.default.createElement("div",{className:"amazonlive-shopping-carousel-deal-badge"},g.default.createElement("span",{className:"deal-badge-text"},a)):g.default.createElement("div",
null)};a.propTypes={deal:d.default.object.isRequired};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.ProductPropType=f.ItemDetailsPropType=void 0;d=(d=a(1))&&d.__esModule?d:{default:d};f.ItemDetailsPropType=d.default.shape({sessionId:d.default.string.isRequired,episodeAsin:d.default.string.isRequired,segmentId:d.default.number.isRequired,segmentItemId:d.default.string.isRequired,position:d.default.number.isRequired});f.ProductPropType=d.default.shape({asin:d.default.string.isRequired,
offerListingId:d.default.string})},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,
c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=c(a(9)),k=a(15),l=c(a(8)),m=c(a(6)),n=c(a(2));a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.mobile=m.default.isDeviceMobile(),a.hasPriceRange="",a.currencySymbol=
"",a.minPrice={},a.maxPrice={},a.buyingPrice={},a.minListPrice={},a.maxListPrice={},a.buyingListPrice={},a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"getPriceSize",value:function(a){var b=this.props.isSingleDoubleCardSingleItem;
if(k.carouselConfig.alwaysSmallPrice)return"small";switch(a){case "single":return b?"large":k.carouselConfig.singlePriceSize;case "multi":return k.carouselConfig.multiPriceSize;default:return k.carouselConfig.defaultPriceSize}}},{key:"parsePrice",value:function(a,b,c,d){this.hasPriceRange=-1!==a.indexOf("-");this.currencySymbol=a.charAt(0);a=a.replace(/ /g,"").split(this.currencySymbol).join("");this.hasPriceRange?(this.setPrice(a.split("-")[0],b),this.setPrice(a.split("-")[1],c)):this.setPrice(a,
d)}},{key:"setPrice",value:function(a,b){b.price=a;b.whole=a.split(".")[0];b.fraction=a.split(".")[1]}},{key:"renderMultiItemPrice",value:function(){return e.default.createElement("div",{className:"multiItem-price-prime"},e.default.createElement("span",{className:"price-info"},e.default.createElement(l.default.PriceRange,null,e.default.createElement(l.default.Price,{altText:"from "+this.minPrice.price+" "+this.currencySymbol,currencySymbol:this.currencySymbol,wholeValue:this.minPrice.whole,fractionalValue:this.minPrice.fraction,
decimalSeparator:".",priceSize:this.getPriceSize("multi")}),e.default.createElement(l.default.PriceDash,{dashSize:"medium"}),e.default.createElement(l.default.Price,{altText:"to "+this.maxPrice.price+" "+this.currencySymbol,currencySymbol:this.currencySymbol,wholeValue:this.maxPrice.whole,fractionalValue:this.maxPrice.fraction,decimalSeparator:".",priceSize:this.getPriceSize("multi")}))))}},{key:"renderSingleItemPrice",value:function(){return e.default.createElement("div",{className:"singleItem-price-prime"},
e.default.createElement("span",{className:"price-info"},e.default.createElement(l.default.Price,{altText:this.buyingPrice.price+" "+this.currencySymbol,currencySymbol:this.currencySymbol,wholeValue:this.buyingPrice.whole,fractionalValue:this.buyingPrice.fraction,decimalSeparator:".",priceSize:this.getPriceSize("single")})))}},{key:"renderSingleItemPriceListPrice",value:function(){var a=k.carouselConfig.priceSpaceCharacter?" ":null;return e.default.createElement("div",{className:"singleItem-price-list-price-prime"},
e.default.createElement("span",null,e.default.createElement(l.default.Price,{altText:this.buyingPrice.price+" "+this.currencySymbol,currencySymbol:this.currencySymbol,wholeValue:this.buyingPrice.whole,fractionalValue:this.buyingPrice.fraction,decimalSeparator:".",priceSize:this.getPriceSize("single")})),a,e.default.createElement("span",null,this.renderListPrice()),this.props.eligibleForPrimeShipping&&this.renderPrimeLogo(this.mobile))}},{key:"renderOutOfStockItem",value:function(){return e.default.createElement(l.default.GridRow,
{verticalAlign:"top"},e.default.createElement(l.default.Text,{textSize:"medium",textColor:"error",cssClass:"amazonlive-shopping-carousel-product-oos"},h.default.translate("amazon-live-carousel-out-of-stock","Out of Stock")))}},{key:"renderListPrice",value:function(){return e.default.createElement(l.default.Price,{altText:this.buyingPrice.price+" "+this.currencySymbol,currencySymbol:this.currencySymbol,wholeValue:this.buyingListPrice.whole,fractionalValue:this.buyingListPrice.fraction,decimalSeparator:".",
priceSize:this.getPriceSize("list"),cssClass:"list-price"})}},{key:"renderDealPrice",value:function(){var a=this.props.deal,b=a.dealPrice,c=a.listPrice,d=void 0,f=void 0;c?(d=a.percentOff,f={altText:""+c.currencySymbol+c.wholeValue+"."+n.default.pad(c.fractionalValue),currencySymbol:c.currencySymbol,wholeValue:c.wholeValue&&c.wholeValue.toString(),fractionalValue:c.fractionalValue&&n.default.pad(c.fractionalValue),decimalSeparator:".",priceSize:"small"}):this.buyingPrice&&(a=parseInt(this.buyingPrice.whole,
10)+parseInt(this.buyingPrice.fraction,10)/100,c=parseInt(b.wholeValue,10)+parseInt(b.fractionalValue,10)/100,5<=Math.floor(100*(1-c/parseFloat(a)))&&(f={altText:""+this.currencySymbol+this.buyingPrice.price,currencySymbol:this.currencySymbol,wholeValue:this.buyingPrice.whole&&this.buyingPrice.whole.toString(),fractionalValue:this.buyingPrice.fraction&&this.buyingPrice.fraction.toString(),decimalSeparator:".",priceSize:"small"}));a=k.carouselConfig.priceSpaceCharacter?" ":null;return e.default.createElement("div",
{className:"singleItem-price-list-price-prime"},e.default.createElement("span",null,e.default.createElement(l.default.Price,{altText:b.wholeValue+"."+n.default.pad(b.fractionalValue)+" "+b.currencySymbol,currencySymbol:b.currencySymbol,wholeValue:b.wholeValue&&b.wholeValue.toString(),fractionalValue:b.fractionalValue&&n.default.pad(b.fractionalValue),decimalSeparator:".",priceSize:this.getPriceSize("single"),cssClass:"deal-price"})),f&&e.default.createElement("span",null,a,e.default.createElement(l.default.Price,
g({},f,{cssClass:"deal-list-price"}))," ",d&&e.default.createElement(l.default.Text,{textSize:"small",textColor:"secondary",cssClass:"deal-percent-off"},"(",d,"% off)")))}},{key:"render",value:function(){return this.props.price&&this.parsePrice(this.props.price,this.minPrice,this.maxPrice,this.buyingPrice),this.props.listPrice&&this.parsePrice(this.props.listPrice,this.minListPrice,this.maxListPrice,this.buyingListPrice),this.props.deal?this.renderDealPrice():this.props.price?this.props.listPrice?
this.renderSingleItemPriceListPrice():this.hasPriceRange?this.renderMultiItemPrice():this.renderSingleItemPrice():this.props.isOutOfStock?this.renderOutOfStockItem():e.default.createElement("div",null)}}]),c}();a.propTypes={price:d.default.string,listPrice:d.default.string,isOutOfStock:d.default.bool,deal:d.default.object,fontSize:d.default.string,componentId:d.default.string,isSingleDoubleCardSingleItem:d.default.bool,eligibleForPrimeShipping:d.default.bool};a.defaultProps={price:"",listPrice:"",
isOutOfStock:!1,deal:null,fontSize:"",componentId:"",isSingleDoubleCardSingleItem:!1,eligibleForPrimeShipping:!1};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingCarouselProductTitle=void 0;var g=c(a(1)),b=c(a(0));d=a(3);var e=c(a(382)),h=a(15),k=c(a(31)),l=c(a(6)),m=c(a(2));a={product:g.default.object.isRequired,details:g.default.object.isRequired,broadcastId:g.default.string.isRequired,deal:g.default.object,
variationButtonSheet:g.default.bool,singleDoubleCardSingleItem:g.default.bool,playerExpanded:g.default.bool,enableIframeFullscreen:g.default.bool};g=f.ShoppingCarouselProductTitle=function(a){var c=a.product,d=a.details,f=a.broadcastId,m=a.deal;return c&&c.title&&b.default.createElement("div",{className:"amazonlive-shopping-carousel-product-name-text-wrap"},b.default.createElement("div",{className:"amazonlive-shopping-carousel-product-name"},b.default.createElement(k.default,{item:c,details:d,broadcastId:f,
deal:m,componentName:"productTitle"},b.default.createElement(e.default,{text:c.title,maxLine:function(a){var b=a.singleDoubleCardSingleItem,c=a.playerExpanded,d=a.enableIframeFullscreen;return a.variationButtonSheet||b&&l.default.isDeviceDesktop()||d&&c&&l.default.isDeviceDesktop()?3:h.carouselConfig.titleMaxLine||1}(a),basedOn:"word"}))))};g.propTypes=a;g.defaultProps={componentName:"desktopShow",variationButtonSheet:!1,singleDoubleCardSingleItem:!1,playerExpanded:!1,enableIframeFullscreen:!1};f.default=
(0,d.connect)(function(a){return{playerExpanded:m.default.getNestedValue(a,"player.expanded"),enableIframeFullscreen:m.default.isWeblabEnabled(m.default.getNestedValue(a,"weblab.enableIframeFullscreen"))}})(g)},,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.enableMetrics=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);
Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d)return a=Object.getPrototypeOf(a),null===a?void 0:m(a,b,c);if("value"in d)return d.value;b=d.get;return void 0!==b?b.call(c):void 0},e=(c(a(0)),c(a(189))),h=c(a(44));a(2);var k=[];d=f.enableMetrics=function(a,c){if(k[c])throw Error("\"Scope named '"+c+"' is duplicated. Change the name as component metrics scope needs to be unique");
k[c]=!0;!0;var d=function(a){return"function"==typeof a&&a.prototype&&a.prototype.isReactComponent?a:(0,e.default)({render:function(){return a(this.props)}})}(a);a=function(a){function e(a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");!0;a=(e.__proto__||Object.getPrototypeOf(e)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.waitForReady=!1===
a.props.ready,h.default.startTimer(c),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(e,d),g(e,[{key:"componentDidUpdate",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentDidUpdate",this)&&
b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentDidUpdate",this).call(this);this.waitForReady&&this.props.ready&&!this.readyMetricsEmitted&&(h.default.endTimer(c),this.readyMetricsEmitted=!0)}},{key:"componentDidMount",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentDidMount",this)&&b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentDidMount",this).call(this);this.waitForReady?h.default.addTimestamp(c,h.default.timestampFlags.bodyEnd):
h.default.endTimer(c)}}]),e}();try{Object.defineProperty(a,"name",{value:"MetricsEnabled"+c})}catch(f){}return a};f.default={enableMetrics:d}},,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a={customTileImage:d.default.element,customTileDetails:d.default.element,forceCardExpand:d.default.bool,eventDealBadge:d.default.element};d={customTileImage:null,customTileDetails:null,forceCardExpand:!1,eventDealBadge:null};
var b=function(a){var b=a.customTileDetails,c=a.eventDealBadge;return g.default.createElement("div",{className:"al-lo-carousel-vertical"},g.default.createElement("div",{className:"al-lo-carousel-vertical-left"},g.default.createElement("div",{className:"al-lo-carousel-vertical-image"},a.customTileImage),g.default.createElement("div",{className:"al-lo-carousel-vertical-details"},c,b)))},e=function(a){var b=a.customTileDetails,c=a.eventDealBadge;return g.default.createElement("div",{className:"al-lo-carousel-vertical-expand"},
g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-left"},g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-image"},a.customTileImage)),g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-right"},g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-details"},c,b)))},h=function(a){return a.forceCardExpand?e(a):b(a)};h.propTypes=a;b.propTypes=a;e.propTypes=a;h.defaultProps=d;b.defaultProps=d;e.defaultProps=d;f.default=
h},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.VerticalProductLayout=void 0;d=c(a(1));var g=c(a(0));a=a(27);d={dealBadge:d.default.element,notification:d.default.element,productImage:d.default.element.isRequired,productDetails:d.default.element.isRequired,productActions:d.default.element,variationSelection:d.default.shape({selectors:d.default.element,actionButton:d.default.element,cancelButton:d.default.element}),isSingleDoubleCardSingleItem:d.default.bool,
eventDealBadge:d.default.element,removeActionButton:d.default.bool};var b={dealBadge:null,notification:null,productActions:null,variationSelection:null,isSingleDoubleCardSingleItem:!1,eventDealBadge:null,removeActionButton:!1},e=function(a){var b=a.productImage,c=a.productDetails,d=a.productActions,e=a.dealBadge,f=a.removeActionButton;return g.default.createElement("div",{className:"al-lo-carousel-vertical-expand"},g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-notification"},
a.notification),g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-dealBadge"},e),g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-left"},g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-image"},b)),g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-right"},g.default.createElement("div",{className:"al-lo-carousel-vertical-expand-details"},c,!f&&d)))},h=function(a){var b=a.productImage,c=a.productDetails,d=
a.productActions,e=a.dealBadge,f=a.variationSelection,k=a.eventDealBadge,h=a.removeActionButton,w=h?"removeActionButtonStyle":"";return g.default.createElement("div",{className:"al-lo-carousel-vertical"},g.default.createElement("div",{className:"al-lo-carousel-vertical-notification"},a.notification),g.default.createElement("div",{className:"al-lo-carousel-vertical-left"},g.default.createElement("div",{className:"al-lo-carousel-vertical-image "+w},b),g.default.createElement("div",{className:"al-lo-carousel-vertical-details"},
k,c,!h&&d,g.default.createElement("div",{className:"al-lo-carousel-vertical-dealBadge"},e))),!h&&f&&g.default.createElement("div",{className:"al-lo-carousel-vertical-right"},g.default.createElement("div",{className:"al-lo-carousel-vertical-variation"},f.selectors,g.default.createElement("div",{className:"al-lo-carousel-vertical-variation-buttons"},f.actionButton,f.cancelButton))))},k=f.VerticalProductLayout=function(a){return a.isSingleDoubleCardSingleItem?e(a):h(a)};h.propTypes=d;h.defaultProps=
b;e.propTypes=d;e.defaultProps=b;f.default=(0,a.connectForRemoveActionButtonFeature)(k)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){var a;a=(a=document.querySelector(".amazonlive-common .al-vertical-carousel-container-layout"))?366<a.offsetWidth:void 0;return{slickSettings:{arrows:!0,swipe:!1,swipeToSlide:!1,slidesToShow:1,centerMode:!1,centerPadding:"0",draggable:!1},increaseCardWidthForVariation:a,cssLayout:"al-vertical-carousel-container-layout",variationSelectionDisplayByDefault:!0,
cardWidth:{cardWidth:183,cardWithSelectorWidth:365,singleDoubleCardWidth:448,singleDoubleCardWithSelectorWidth:448}}}},,,,,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=void 0,g=void 0;d=f.CSRF_TOKEN_KEY="X-CSRFToken";a=f.setTokenEnabled=function(a){c=a};var b=f.setApiToken=function(a){g=a},e=f.getApiToken=function(){return c?g:void 0};f.default={CSRF_TOKEN_KEY:d,setTokenEnabled:a,setApiToken:b,getApiToken:e}},function(d,f,a){d.exports={UNINITIALIZED:"UNINITIALIZED",INITIALIZED:"INITIALIZED",
LOADING:"LOADING",PLAYING:"PLAYING",STOPPING:"STOPPING",STOPPED:"STOPPED",PAUSED:"PAUSED",ERROR:"ERROR"}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default={ENABLED:"amazonlive-poller-enabled",DISABLED:"amazonlive-poller-disabled"}},,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in
e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(5));var b=c(a(97)),e=a(2),h=void 0,k=new d.default("FollowMe");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"dock",value:function(a,c,d){z.when(b.default.smashModuleKey).execute(function(b){var f=function(a,b,c,d,f){return d&&function(a,b){(0,e.setTimeout)(function(){a===document.documentElement.clientHeight&&
"function"==typeof b&&b()},400)}(document.documentElement.clientHeight,f),{successCallback:function(a){k.debug("FollowMe.dock SUCCESS "+a)},errorCallback:function(a){k.debug("FollowMe.dock ERROR "+a)},dockableId:a,content:{strategy:{type:"selfWebview",params:{domId:b,navigateUrl:c}}},presentation:{aspectRatio:{width:16,height:9}}}}("amazonlive/"+h.showId,h.domId,a,c,d);b.dock(f)})}},{key:"updateState",value:function(a){h=a}},{key:"state",get:function(){return h}}]),a}();f.default=a},function(d,f,
a){d.exports={updateData:function(a,d){d=Object.assign({},a.data,d);return Object.assign({},a,{data:d})}}},,,,,,,,,,,,,,,,,,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();f.initializePerformance=
function(){};f.performanceTimerStart=function(a){};f.performanceTimerEnd=function(a){};f.performanceTimestamp=function(a,b){};f.applyPerformanceMiddleWare=function(a){};c(a(0));var b=a(2),e=new (c(a(5)).default)("performance");!function(){g(function k(){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");!0;r.Perf=a(712);r.ReactPerf=this},[{key:"start",value:function(a){var c=this;this.startMark=a;this.startTime=r.performance.now();(0,b.setTimeout)(function(){c.startMark===
a&&r.ReactPerf.stop(a+"-TIMEOUT")},5E3);e.debug("starting react-addons-perf : "+this.startMark+" @"+this.startTime);r.Perf.start()}},{key:"stop",value:function(a){var c=this;this.startTime&&function(){var d=r.performance.now();r.Perf.stop();d="from : "+c.startMark+" \n to : "+a+" \n sample duration : "+(d-c.startTime)+" ms";0<r.Perf.getWasted().filter(function(a){return 10<a.inclusiveRenderDuration}).length?(console.groupCollapsed("[performance] Wasted time in re-renders between events:\n "+d),e.log("The following table provides time spent on wasted re-renders."),
e.log("use why-did-you-update to dive deeper into wasted re-renders with link "+(0,b.updateQueryString)(r.location.href,"performance",1)),r.Perf.printWasted(),console.groupEnd()):e.log("No time wasted on re-renders between events:\n "+d);c.startMark=null}()}}])}()},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,
e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(0)),b=a(174),e=a(13),h=a(4);d=function(a){function d(a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");!0;a=(d.__proto__||Object.getPrototypeOf(d)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.onWindowResize=a.onWindowResize.bind(a),
a.setDomRef=a.setDomRef.bind(a),a.size={width:0,height:0},a.maxScale=1,a.onWindowResize=(0,h.guardErrorWrapper)(a.onWindowResize.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(d,g.default.Component),c(d,[{key:"onWindowResize",
value:function(){(0,e.$)(this.dom).css(this.style)}},{key:"setDomRef",value:function(a){this.dom=a}},{key:"componentDidMount",value:function(){(0,e.$)(r).bind("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function(){(0,e.$)(r).unbind("resize",this.onWindowResize)}},{key:"transformOrigin",get:function(){return r.innerWidth<this.size.width?"left":"center"}},{key:"scale",get:function(){return r.innerWidth/this.size.width<r.innerHeight/this.size.height?(0,b.getScaleForContainer)(this.size.width,
r.innerWidth,this.maxScale):(0,b.getScaleForContainer)(this.size.height,r.innerHeight,this.maxScale)}},{key:"style",get:function(){return{"transform-origin":this.transformOrigin,transform:this.scale}}}]),d}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ChatDrawer=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=a(4);a={text:d.default.shape({open:d.default.string.isRequired,closed:d.default.string.isRequired}),color:d.default.oneOf(["light","dark"]),initialPosition:d.default.oneOf(["open","closed"]),arrowPositionOnClose:d.default.oneOf(["up","down"]),contentBelow:d.default.bool,emitDrawerOpenMetrics:d.default.func,emitDrawerCloseMetrics:d.default.func,customIconUrl:d.default.string};
d=f.ChatDrawer=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;var b;b=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!=typeof b&&"function"!=typeof b?this:b;return b.openState={position:"open",text:a.text.open},b.closedState={position:"closed",text:a.text.closed},b.toggleState=(0,e.guardErrorWrapper)(b.toggleState.bind(b)),
b.onKeyUp=(0,e.guardErrorWrapper)(b.onKeyUp.bind(b)),b.state="open"===b.props.initialPosition?b.openState:b.closedState,b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"onKeyUp",value:function(a){13!==
a.keyCode&&32!==a.keyCode||this.toggleState()}},{key:"getContentComponent",value:function(){return b.default.createElement("div",{className:"al-chat-drawer-content al-chat-drawer-"+this.state.position},this.props.children)}},{key:"getSelectorIconClassName",value:function(){var a;var b="up"===this.props.arrowPositionOnClose?["up","down"]:["down","up"];if(Array.isArray(b))a=b;else if(Symbol.iterator in Object(b)){a=[];var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done)&&
(a.push(f.value),2!==a.length);c=!0);}catch(h){d=!0,e=h}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e;}}}else throw new TypeError("Invalid attempt to destructure non-iterable instance");b=a[0];a=a[1];return"al-chat-drawer-selector-icon-"+("closed"===this.state.position?b:a)}},{key:"getSelectorComponent",value:function(){var a=this.getSelectorIconClassName(),c="dark"===this.props.color?"https://m.media-amazon.com/images/G/01/poppin/icons/expand-collapse-arrow-2x-down.png":"https://m.media-amazon.com/images/G/01/poppin/icons/chat-carrot.png";
return b.default.createElement("div",{className:"al-chat-drawer-selector",onClick:this.toggleState,role:"button",onKeyUp:this.onKeyUp,tabIndex:"0",title:this.state.text},b.default.createElement("div",{className:"al-chat-drawer-selector-content"},this.props.customIconUrl&&b.default.createElement("div",{className:"al-chat-drawer-selector-custom-icon-container"},b.default.createElement("img",{className:"al-chat-drawer-selector-custom-icon",src:this.props.customIconUrl,alt:""})),b.default.createElement("div",
{className:"al-chat-drawer-selector-text"},b.default.createElement("span",null,this.state.text)),b.default.createElement("div",{className:"al-chat-drawer-selector-icon-container"},b.default.createElement("img",{className:"al-chat-drawer-selector-icon "+a,src:c,alt:""}))))}},{key:"toggleState",value:function(a){this.state.position===this.openState.position?(this.setState(this.closedState),this.props.emitDrawerCloseMetrics(this.props.text.closed)):(this.setState(this.openState),this.props.emitDrawerOpenMetrics(this.props.text.open));
a.preventDefault();a.stopPropagation()}},{key:"render",value:function(){var a=this.getContentComponent(),c=this.getSelectorComponent();return b.default.createElement("div",{className:"al-chat-drawer"},this.props.contentBelow?c:a,this.props.contentBelow?a:c)}}]),c}();d.propTypes=a;d.defaultProps={text:{open:"",closed:""},color:"light",initialPosition:"closed",arrowPositionOnClose:"down",contentBelow:!1,emitDrawerOpenMetrics:function(){},emitDrawerCloseMetrics:function(){},customIconUrl:null};f.default=
d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a){return a&&a.__esModule?a:{default:a}}(a(0));f.default=function(a){return c.default.createElement("div",{className:"amzlv-banner"},c.default.createElement("div",{className:"amzlv-banner-content"},c.default.Children.map(a.children,function(a){return a&&c.default.createElement("div",{className:"amzlv-banner-component"},a)})))}},function(d,f,a){d.exports={FOLLOW_BANNER:"follow_banner",BANNER:"banner"}},function(d,f,
a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(194)),e=c(a(193)),h=c(a(84)),k=c(a(32));d=function(){function a(c,d,f){var g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,t=4<arguments.length&&
void 0!==arguments[4]?arguments[4]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.viewportMonitorBase=new b.default(function(){var a;h.default.isViewportVisible()?(a=e.default.fromElement(c),a=new e.default(a.x,a.y-g,a.width,a.height+t+g),a=0<(k.default.isSafeFrame()?k.default.getAmazonLiveSafeFrameWindow().getInViewPercentage()/100:h.default.rectInViewportForRect(a).height)):a=!1;return a},d,f)}return g(a,[{key:"start",value:function(){this.viewportMonitorBase.start()}},
{key:"stop",value:function(){this.viewportMonitorBase.stop()}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.setExpandablePlayerDimension=f.getExpandedPlayerDimension=f.collapsePlayer=f.expandPlayer=f.onExpandChange=void 0;var g=c(a(13)),b=a(6);d=c(a(5));var e=a(15),h=c(a(103)),k=new d.default("ExpandableContainerUtil"),l=(f.onExpandChange=function(a){var b=a.expanded,c=a.setPlayerExpanded,d=a.shouldExpand,
e=a.emitMetric,f=a.id,g=a.setState;a=a.onEmitMetrics;a=void 0===a?function(){}:a;k.debug("onExpandChange");b!==d&&(g({expanded:d}),c(d),e&&(h.default.emitPlayerExpandedSushi(f,d),a()))},f.expandPlayer=function(a){var c=a.enableMobileFullscreen,d=a.expandableContainer,e=a.onExpandExpandableContainer,f=a.enableExpandablePlayer;a=a.expanded;if(k.debug("expandPlayer"),(0,b.isDeviceMobile)()){if(c)return d?void d.expand():void 0;e()}else f&&!a&&d?d.expand():e()},f.collapsePlayer=function(a){var c=a.enableMobileFullscreen,
d=a.enableIframeFullscreen,e=a.expandableContainer,f=a.hideControlOverlay,g=a.enableExpandablePlayer,m=a.expanded,l=a.onExpandChange;a=a.emitMetric;if(k.debug("collapsePlayer"),c&&(0,b.isDeviceMobile)()||d&&!(0,b.isDeviceMobile)())return e?(e.collapse(),void f()):void 0;g&&!m&&e?e.collapse():(l(!1,a),f())},16/9),m=f.getExpandedPlayerDimension=function(a,c){if(a&&e.playerConfig.enableExpand){a=g.default.$(r).height();var d=g.default.$(r).width();if(c&&!(0,b.isDeviceMobile)())return c=Math.max(a-160,
0),d/c<l?d:c*l;c=Math.min(Math.max(Math.max(d,1E3)-.125*d,600),1500);a=Math.max(a-.125*a-30-160,337.5);return c/a<l?c:a*l}};f.setExpandablePlayerDimension=function(a,b,c){k.debug("setExpandablePlayerDimension");(a=m(a,b))&&c({expandedPlayerWidth:a})}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ExpandableContainer=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=
!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(1)),e=c(a(0));d=a(3);var h=c(a(12)),k=c(a(13)),l=c(a(9)),m=c(a(5)),n=c(a(97)),p=c(a(6)),q=a(2),t=a(4),u=c(a(308)),v=a(15);a={onCollapse:b.default.func,onExpand:b.default.func,enableMobileFullscreen:b.default.bool,enableIframeFullscreen:b.default.bool};var w=function(){return(0,q.getNestedValue)(r,"history.state")||{}},b=f.ExpandableContainer=function(a){function b(a){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");!0;a=(b.__proto__||Object.getPrototypeOf(b)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={expanded:!1},a.collapse=(0,t.guardErrorWrapper)(a.collapse.bind(a)),a.onKeyUp=(0,t.guardErrorWrapper)(a.onKeyUp.bind(a)),a.onKeyUpForDocument=(0,t.guardErrorWrapper)(a.onKeyUpForDocument.bind(a)),a.onPopState=(0,t.guardErrorWrapper)(a.onPopState.bind(a)),
a.onFollowMeWillDock=(0,t.guardErrorWrapper)(a.onFollowMeWillDock.bind(a)),a.onFollowMeDidDock=(0,t.guardErrorWrapper)(a.onFollowMeDidDock.bind(a)),a.onWindowResize=(0,t.guardErrorWrapper)(a.onWindowResize.bind(a)),a.onFullScreenChange=(0,t.guardErrorWrapper)(a.onFullScreenChange.bind(a)),a.setComponentDom=(0,t.guardErrorWrapper)(a.setComponentDom.bind(a)),a.logger=new m.default("ExpandableContainer"),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.default.Component),g(b,[{key:"componentDidMount",value:function(){this.props.enableMobileFullscreen&&p.default.isDeviceMobile()&&(r.addEventListener("resize",this.onWindowResize),r.addEventListener("popstate",this.onPopState),k.default.A.on(n.default.auiEventWillDock,this.onFollowMeWillDock),k.default.A.on(n.default.auiEventDidDock,
this.onFollowMeDidDock),this.onWindowResize());this.props.enableIframeFullscreen&&!p.default.isDeviceMobile()&&u.default.addFullScreenChangeListener(this.onFullScreenChange)}},{key:"componentWillUpdate",value:function(a,b){!this.state.expanded&&b.expanded&&(this.placeholderStyle=this.getPlaceholderStyle())}},{key:"componentDidUpdate",value:function(a,b){!b.expanded&&this.state.expanded?(k.default.$("body").addClass("amznlv-react-expandable-view-noscroll"),document.addEventListener("keyup",this.onKeyUpForDocument,
!1)):b.expanded&&!this.state.expanded&&(k.default.$("body").removeClass("amznlv-react-expandable-view-noscroll"),document.removeEventListener("keyup",this.onKeyUpForDocument,!1))}},{key:"componentWillUnmount",value:function(){k.default.$("body").removeClass("amznlv-react-expandable-view-noscroll");this.props.enableMobileFullscreen&&p.default.isDeviceMobile()&&(r.removeEventListener("resize",this.onWindowResize),r.removeEventListener("popstate",this.onPopState),k.default.A.off(n.default.auiEventWillDock,
this.onFollowMeWillDock),k.default.A.off(n.default.auiEventDidDock,this.onFollowMeDidDock));this.props.enableIframeFullscreen&&!p.default.isDeviceMobile()&&u.default.removeFullscreenChangeListener(this.onFullScreenChange)}},{key:"onFullScreenChange",value:function(){!u.default.getBrowserFullscreenElement()&&this.state.expanded&&this.collapse()}},{key:"onFollowMeDidDock",value:function(){var a=w();this.state.expanded&&!a.amazonliveFullscreen&&(this.logger.debug("Push fullscreen state again after follow me undock."),
this.skipNextPopStateEvent=!1,this.pushExpandedState())}},{key:"onFollowMeWillDock",value:function(){var a=w();this.state.expanded&&a.amazonliveFullscreen&&(this.logger.debug("Go back temporarily before follow me dock."),this.skipNextPopStateEvent=!0,r.history.back())}},{key:"onKeyUp",value:function(a){32!==a.keyCode&&13!==a.keyCode||this.collapse()}},{key:"onKeyUpForDocument",value:function(a){27===a.keyCode&&this.collapse()}},{key:"onPopState",value:function(){var a=(0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{}).state;if((a=void 0===a?{}:a)&&!this.skipNextPopStateEvent){var b=this.state.expanded;b&&!a.amazonliveFullscreen?(this.logger.debug("Browser history popstate, collapse."),this.collapse()):!b&&a.amazonliveFullscreen&&(this.logger.debug("Browser history popstate, expand."),this.expand())}}},{key:"onWindowResize",value:function(){this.setState({windowInnerHeight:r.innerHeight})}},{key:"getPlaceholderStyle",value:function(){return{width:k.default.$(this.dom).width(),height:k.default.$(this.dom).height()}}},
{key:"setComponentDom",value:function(a){this.dom=a}},{key:"collapse",value:function(){this.props.enableMobileFullscreen&&p.default.isDeviceMobile()&&w().amazonliveFullscreen?r.history.back():(this.setState({expanded:!1}),this.props.onCollapse(),this.props.enableIframeFullscreen&&!p.default.isDeviceMobile()&&u.default.exitBrowserFullscreen())}},{key:"expand",value:function(){var a=this;(0,q.setTimeout)(function(){var a=document.getElementById("expand-player-accessibility-status");a&&a.focus()});(0,
q.setTimeout)(function(){"expand-player-accessibility-status"===document.activeElement.id&&a.closeButton&&a.closeButton.focus()},1E3);this.setState({expanded:!0});this.props.onExpand();this.props.enableMobileFullscreen&&p.default.isDeviceMobile()&&this.pushExpandedState();this.props.enableIframeFullscreen&&!p.default.isDeviceMobile()&&u.default.enterBrowserFullscreen(r.document.body)}},{key:"pushExpandedState",value:function(){if(!w().amazonliveFullscreen){var a={amazonliveFullscreen:!0,date:new Date};
this.logger.debug("Pushing browser history state",a);r.history.pushState(a,r.document.title,r.location.href)}}},{key:"renderCloseButton",value:function(){var a=this;if(!(!this.state.expanded||this.props.enableMobileFullscreen&&p.default.isDeviceMobile()||this.props.enableIframeFullscreen&&!p.default.isDeviceMobile()))return e.default.createElement("div",{className:"amznlv-react-expandable-view-close-container"},e.default.createElement("div",{tabIndex:"0",role:"button",className:"amznlv-react-expandable-view-close",
onClick:this.collapse,onKeyUp:this.onKeyUp,title:l.default.translate("amazonlive-close-expanded-player","close expanded player"),ref:function(b){a.closeButton=b}}))}},{key:"renderModalBackground",value:function(){return e.default.createElement("div",{role:"presentation",className:"amznlv-react-expandable-view-background",onClick:this.state.expanded?this.collapse:function(){}})}},{key:"renderPlaceholder",value:function(){return e.default.createElement("div",{className:"amznlv-react-expandable-view-placeholder",
style:this.placeholderStyle})}},{key:"render",value:function(){var a=this.state,b=a.expanded,a=a.windowInnerHeight,c=this.props.children;return e.default.createElement("div",{className:(0,h.default)("amznlv-react-expandable-view",{expanded:b,"browser-fullscreen":b&&this.props.enableIframeFullscreen&&!p.default.isDeviceMobile()}),ref:this.setComponentDom},b&&this.renderPlaceholder(),b&&this.renderModalBackground(),e.default.createElement("div",{role:"presentation",className:"amznlv-react-expandable-view-container",
onClick:b?this.collapse:function(){}},e.default.createElement("div",{role:"presentation",className:"amznlv-react-expandable-view-content",onClick:function(a){a.preventDefault();a.stopPropagation()},style:b&&a?{height:a+"px"}:{}},this.renderCloseButton(),e.default.createElement("div",{role:"presentation",className:"amznlv-react-expandable-view-children-container"},c))))}}]),b}();b.propTypes=a;b.defaultProps={onCollapse:function(){},onExpand:function(){},enableMobileFullscreen:!1,enableIframeFullscreen:!1};
f.default=(0,d.connect)(function(a){return{enableMobileFullscreen:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.enableMobileFullscreen"))&&v.playerConfig.enableExpand,enableIframeFullscreen:(0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.enableIframeFullscreen"))&&v.playerConfig.enterFullscreenOnExpand}},null,null,{withRef:!0})(b)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ExpandedContent=void 0;var g=c(a(0));
d=c(a(1));var b=a(3),e=c(a(6)),h=a(61),k=a(15),l=c(a(82)),m=c(a(173));a=f.ExpandedContent=function(a){var b=a.shouldRenderChat;return g.default.createElement("div",{className:"amznlv-react-player-expanded-content",style:{width:a.width}},g.default.createElement("div",{className:"amznlv-react-player-shopping-carousel"},g.default.createElement(l.default,{key:"amznlv-react-player-shopping-carousel",componentIdOverride:k.playerConfig.expandOverrideComponent,inExpandedPlayer:!0})),b&&g.default.createElement("div",
{className:"amznlv-react-player-chat"},g.default.createElement(m.default,{key:"amznlv-react-player-chat",isDeviceMobile:!0,startExpanded:!0})))};a.propTypes={width:d.default.string.isRequired,shouldRenderChat:d.default.bool};a.defaultProps={shouldRenderChat:!1};f.default=(0,b.connect)(function(a){return{shouldRenderChat:e.default.isDeviceMobile()&&(0,h.isChatEnabled)(a)&&k.playerConfig.showChatOnExpand}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(13)),e=c(a(6)),h=c(a(44)),k=c(a(2)),l=c(a(5)),m=a(4),n=c(a(28)),p=a(21);d=function(){function a(b,c,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.player=b;this.enableMShopPausePlayerHandler=
c;this.enableSyncSvsApiCalls=d;this.logger=new l.default("VisibilityHandler");this.onVisibilityChange=(0,m.guardErrorWrapper)(this.onVisibilityChange.bind(this));this.onAppPause=(0,m.guardErrorWrapper)(this.onAppPause.bind(this));this.onAppResume=(0,m.guardErrorWrapper)(this.onAppResume.bind(this))}return g(a,[{key:"checkAndPlay",value:function(){"function"==typeof this.player.reload&&k.default.callFunction(this.player.reload.bind(this.player));this.previousPlaying?(k.default.callFunction(this.player.mute.bind(this.player)),
this.player.play()):this.player.stop()}},{key:"checkAndStop",value:function(){(this.previousPlaying=this.player.isPlaying())&&this.player.stop()}},{key:"getDocument",value:function(){return b.default.$(document)[0]}},{key:"documentIsVisible",value:function(){return"visible"===this.getDocument().visibilityState}},{key:"documentIsHidden",value:function(){return"hidden"===this.getDocument().visibilityState||this.getDocument().hidden}},{key:"onVisibilityChange",value:function(){if(this.documentIsVisible())return this.enableSyncSvsApiCalls&&
(this.logger.debug("Document visibility changed to visible"),n.default.emitMetrics({EVENT_TYPE:"visibilityChange",EVENT_TRIGGER_TYPE:"visible"},p.metricsEmitPriority.MEDIUM)),this.checkAndPlay(),void h.default.addCount("AmazonLive:Document:Visible");this.documentIsHidden()&&(this.enableSyncSvsApiCalls&&(this.logger.debug("Document visibility changed to hidden"),n.default.emitMetrics({EVENT_TYPE:"visibilityChange",EVENT_TRIGGER_TYPE:"hidden"},p.metricsEmitPriority.MEDIUM)),this.checkAndStop(),h.default.addCount("AmazonLive:Document:Hidden"))}},
{key:"onAppPause",value:function(){this.enableSyncSvsApiCalls&&(this.logger.debug("App paused"),n.default.emitMetrics({EVENT_TYPE:"appPause"},p.metricsEmitPriority.MEDIUM));this.checkAndStop();h.default.addCount("AmazonLive:App:Pause")}},{key:"onAppResume",value:function(){this.enableSyncSvsApiCalls&&(this.logger.debug("App resumed"),n.default.emitMetrics({EVENT_TYPE:"appResume"},p.metricsEmitPriority.MEDIUM));this.checkAndPlay();h.default.addCount("AmazonLive:App:Resume")}},{key:"register",value:function(){var a=
this;e.default.isDeviceMobile()&&(this.logger.debug("Register document visibilitychange handler"),this.getDocument().addEventListener("visibilitychange",this.onVisibilityChange),e.default.isMshop()&&this.enableMShopPausePlayerHandler&&z.when("mash").execute(function(b){a.logger.debug("Register mash appPause handler");b.addEventListener("appPause",a.onAppPause);a.logger.debug("Register mash appResume handler");b.addEventListener("appResume",a.onAppResume)}))}},{key:"unregister",value:function(){var a=
this;e.default.isDeviceMobile()&&(this.logger.debug("Unregister document visibilitychange handler"),this.getDocument().removeEventListener("visibilitychange",this.onVisibilityChange),e.default.isMshop()&&this.enableMShopPausePlayerHandler&&z.when("mash").execute(function(b){b&&(a.logger.debug("Unregister mash appPause handler"),b.removeEventListener("appPause",a.onAppPause),a.logger.debug("Unregister mash appResume handler"),b.removeEventListener("appResume",a.onAppResume))}))}}]),a}();f.default=
d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(12)),h=c(a(9)),k=c(a(5)),l=c(a(103)),m=c(a(44)),n=c(a(6)),p=a(2),q=a(4);a={broadcastId:d.default.string.isRequired,
showButton:d.default.bool.isRequired,isPlaying:d.default.bool.isRequired,play:d.default.func.isRequired,stop:d.default.func.isRequired,onMouseEnter:d.default.func.isRequired,isLive:d.default.bool.isRequired,isLoading:d.default.bool.isRequired};d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;var b;b=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
b=!b||"object"!=typeof b&&"function"!=typeof b?this:b;return b.logger=new k.default("PlayButton"),b.state={isLoading:a.isLoading},b.doButtonAction=(0,q.guardErrorWrapper)(b.doButtonAction.bind(b)),b.onKeyUp=(0,q.guardErrorWrapper)(b.onKeyUp.bind(b)),b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.PureComponent),g(c,[{key:"componentWillReceiveProps",value:function(a){var b=this;a.isLoading!==this.props.isLoading&&(this.clearLoadingToFalseTimout(),a.isLoading?(this.setState({isLoading:!0}),this.setLoadingToFalseTimeout=(0,p.setTimeout)(function(){b.setState({isLoading:!1})},15E3)):this.setState({isLoading:!1}))}},{key:"componentWillUnmount",value:function(){this.clearLoadingToFalseTimout()}},{key:"onKeyUp",value:function(a){13===
a.keyCode&&32===a.keyCode&&this.doButtonAction(a)}},{key:"getGoToLiveText",value:function(){return this.goToLiveText||(this.goToLiveText=h.default.translate("amazon-live-go-to-live","Watch Live")),this.goToLiveText}},{key:"doButtonAction",value:function(a){a.preventDefault();a.stopPropagation();this.state.isLoading||(this.props.isPlaying?this.stop():this.play())}},{key:"play",value:function(a){a||(m.default.addCount("AmazonLivePlayer:ClickToPlay"),l.default.emitPlayButtonClickedSushi(this.props.broadcastId));
this.props.play()}},{key:"stop",value:function(a){a||(m.default.addCount("AmazonLivePlayer:ClickToPause"),l.default.emitPauseButtonClickedSushi(this.props.broadcastId));this.props.stop()}},{key:"clearLoadingToFalseTimout",value:function(){this.setLoadingToFalseTimeout&&(clearTimeout(this.setLoadingToFalseTimeout),this.setLoadingToFalseTimeout=null)}},{key:"render",value:function(){var a=this.props,c=a.onMouseEnter,d=a.showButton,f=a.isPlaying,a=a.isLive,p=this.state.isLoading,c=(0,q.guardErrorWrapper)(c);
return b.default.createElement("div",{className:(0,e.default)("play-button-container",{mobile:n.default.isDeviceMobile(),hide:!p&&!d})},b.default.createElement("div",{className:(0,e.default)("amznlv-react-player-play-button-new",this.buttonBackgroundClassname,this.buttonStateClassname,{mobile:n.default.isDeviceMobile()}),role:"button",tabIndex:"0",onMouseEnter:c,onClick:this.doButtonAction,onKeyUp:this.onKeyUp,"aria-label":"Play",title:f?h.default.translate("amazon-live-video-now-playing","video now playing"):
h.default.translate("amazon-live-video-now-paused","video now paused"),id:"amazonlive-play-button"},b.default.createElement("div",{className:(0,e.default)("amznlv-react-player-play-button-inner",this.buttonStateClassname),onMouseEnter:c})),!f&&!p&&a&&b.default.createElement("div",{className:"go-to-live",onMouseEnter:c},this.getGoToLiveText()))}},{key:"buttonStateClassname",get:function(){return this.props.isPlaying?"pause":this.state.isLoading?"loading":"play"}},{key:"buttonBackgroundClassname",get:function(){return this.state.isLoading||
!n.default.isDeviceMobile()?"transparent":"grey"}}]),c}();d.propTypes=a;f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d=f.hideTooltip=function(a){z.when("a-tooltip").execute(function(d){(d=d.get(a))&&d.hide()})};f.default={hideTooltip:d}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=
!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(9)),h=c(a(6)),k=c(a(8)),l=c(a(5)),m=c(a(24));a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=
typeof a?this:a;return a.logger=new l.default("messaging-overlay: "),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"getDaysDifference",value:function(a,b){return Math.round(Math.abs((a-b)/864E5))}},
{key:"getOverlayMessaging",value:function(a){switch(a){case m.default.PRE_LIVE:case m.default.FUTURE:return this.futureStatus;case m.default.GRACE_PERIOD:return this.gracePeriodStatus;case m.default.POST_LIVE:return this.postLiveStatus;case m.default.CONNECTION_ISSUES:return this.connectionErrorMessage;default:return""}}},{key:"isStartTimeToday",value:function(){var a=new Date(this.props.startTime),b=new Date;try{return a.toDateString()===b.toDateString()}catch(c){this.logger.error(c)}return 0===
this.getDaysDifference(b,a)}},{key:"nth",value:function(a){if(3<a&&21>a)return"th";switch(a%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}},{key:"render",value:function(){var a=this.props,c=a.broadcastStatus,a=a.title,d=h.default.isDeviceMobile()?"small":"large",e=h.default.isDeviceMobile()?"mini":"medium",f=this.getOverlayMessaging(c),p=[m.default.PRE_LIVE,m.default.FUTURE,m.default.GRACE_PERIOD,m.default.POST_LIVE,m.default.CONNECTION_ISSUES].includes(c);return b.default.createElement("div",
null,p&&b.default.createElement("div",{className:"broadcast-title"},b.default.createElement("div",{className:"broadcast-overlay-title"},b.default.createElement(k.default.Text,{cssClass:"broadcast-preshow-text",textSize:d},a)),f&&b.default.createElement("div",{className:"broadcast-overlay-time"},b.default.createElement(k.default.Text,{cssClass:"broadcast-preshow-text",textSize:e},f))),c===m.default.LIVE&&b.default.createElement("div",{className:"broadcast-title"},a))}},{key:"connectionErrorMessage",
get:function(){return e.default.translate("amazon-live-technical-issues-message","${channelTitle} has encountered an error...stay tuned",{channelTitle:this.props.channelTitle})}},{key:"daysAgo",get:function(){var a=" day",b=this.getDaysDifference(new Date,new Date(this.props.startTime));return 1<b&&(a+="s"),b+a}},{key:"hoursAgo",get:function(){var a=" hour",b=Math.ceil(Math.abs(new Date-new Date(this.props.startTime))/36E5);return 1<b&&(a+="s"),b+a}},{key:"startDate",get:function(){var a=this.props.startTime,
b=void 0;try{var c=new Date(a),b=c.toLocaleDateString("en-US",{month:"long",day:"numeric"}),b=b+this.nth(c.getDate())}catch(d){this.logger.error(d),b=(new Date(a)).toLocaleDateString()}return b}},{key:"startTime",get:function(){var a=this.props.startTime,b=void 0;try{b=(new Date(a)).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"})}catch(c){this.logger.error(c),b=(new Date(a)).toLocaleTimeString()}return b}},{key:"futureStatus",get:function(){var a=this.props.channelTitle;return this.isStartTimeToday()?
e.default.translate("amazon-live-today-stream-message","Livestream at ${startTime} Today",{startTime:this.startTime}):a?e.default.translate("amazon-live-future-stream-message","${channelTitle} livestreaming at ${startTime} ${startDate}",{channelTitle:a,startTime:this.startTime,startDate:this.startDate}):""}},{key:"gracePeriodStatus",get:function(){return e.default.translate("amazon-live-grace-period-ingress-message","Livestream will begin soon")}},{key:"postLiveStatus",get:function(){var a=this.props,
b=a.channelTitle,c=a.startTime;return a.isVod?b?this.isStartTimeToday()?e.default.translate("amazon-live-past-hours-stream-message","${channelTitle} was live ${hoursAgo} ago",{channelTitle:b,hoursAgo:this.hoursAgo}):8>this.getDaysDifference(new Date,new Date(c))?e.default.translate("amazon-live-past-days-stream-message","${channelTitle} was live ${daysAgo} ago",{channelTitle:b,daysAgo:this.daysAgo}):e.default.translate("amazon-live-past-date-stream-message","${channelTitle} was live on ${startDate}",
{channelTitle:b,startDate:this.startDate}):"":e.default.translate("amazon-live-post-ingress-message")}}]),c}();a.propTypes={broadcastStatus:d.default.oneOf(Object.keys(m.default)),startTime:d.default.number,title:d.default.string,channelTitle:d.default.string,isVod:d.default.bool};a.defaultProps={broadcastStatus:"UNKNOWN",startTime:void 0,title:void 0,channelTitle:void 0,isVod:void 0};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.UNMUTE_OVERLAY_CLASS_NAME="unmute-overlay";
f.CONTROL_OVERLAY_CLASS_NAME="amznlv-react-player-control-panel";f.EXPAND_OVERLAY_CLASS_NAME="expand-overlay"},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ConnectedFollowMeWeb=f.FollowMeWebUtils=f.FollowMeWeb=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&
a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(1)),e=c(a(0)),h=a(3),k=c(a(9)),l=c(a(322)),m=c(a(319)),n=c(a(172)),p=c(a(6)),q=c(a(2));d=a(23);var t=a(15),u=a(4),v=a(21),w=function(){};a=f.FollowMeWeb=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;a=(b.__proto__||Object.getPrototypeOf(b)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:
a;return a.state={isFollowMeActive:!1},a.setDomElement=a.setDomElement.bind(a),a.restore=(0,u.guardErrorWrapper)(a.restore.bind(a)),a.dismiss=(0,u.guardErrorWrapper)(a.dismiss.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}(b,e.default.Component),g(b,[{key:"componentDidMount",value:function(){var a=this.props,b=a.emitImpressionMetrics;a.isFollowMeWebEnabled&&(a=this.onScrollPast.bind(this),n.default.onScrollElementIntoViewport(this.domElement,a,w,50,60),b({},v.metricsEmitPriority.LOW))}},{key:"onScrollPast",value:function(){this.props.isScrollDockingEnabled&&this.dock()}},{key:"getContainerBoundingRect",value:function(){return this.domElement.getBoundingClientRect()}},{key:"setDomElement",value:function(a){a&&(this.domElement=
a)}},{key:"unDock",value:function(){this.setState({isFollowMeActive:!1})}},{key:"dock",value:function(){var a=this.props,b=a.placeholderBackgroundImageUrl,c=a.onDocked,d=a.emitClickMetrics,e=this.state.isFollowMeActive;a.isDockingEnabled&&!e&&(this.setState({isFollowMeActive:!0,placeholder:{backgroundImage:"url("+b+")"}}),c&&c(),d({EVENT_TRIGGER_TYPE:"docked"}))}},{key:"restore",value:function(){var a=this.props,b=a.onRestore,a=a.emitClickMetrics;b&&(this.unDock(),b());p.default.isMobileWeb()&&this.domElement.scrollIntoView({behavior:"smooth"});
a({EVENT_TRIGGER_TYPE:"restore"})}},{key:"dismiss",value:function(){if(this.state.isFollowMeActive){var a=this.props,b=a.onDismiss,a=a.emitClickMetrics;this.unDock();b();a({EVENT_TRIGGER_TYPE:"dismiss"})}}},{key:"renderChildren",value:function(){var a=this.state.isFollowMeActive;return e.default.createElement("div",{className:"follow-me-web-container"},e.default.createElement(l.default,{displayClass:a?"follow-me-web-docked":"",isDraggable:a,margin:5,animateOnDraggable:!0,dismissable:t.followMeWebConfig.dismissable,
onDismiss:this.dismiss,onClick:t.followMeWebConfig.clickToRestore?this.restore:null,initialCorner:t.followMeWebConfig.defaultCorner},this.props.children,t.followMeWebConfig.showOverlay&&a&&this.renderOverlay()))}},{key:"renderOverlay",value:function(){var a=this.props;return e.default.createElement(m.default,{onDismiss:this.dismiss,onRestore:a.onRestore?this.restore:void 0,toggleMute:a.toggleMute})}},{key:"renderPlaceHolder",value:function(){var a=this.state,b=a.placeholder;if(a.isFollowMeActive)return a=
k.default.translate("amazonlive-portal-pinnable-placeholder-text","This video is playing in picture in picture"),e.default.createElement("div",{className:"follow-me-placeholder",style:b},e.default.createElement("div",{className:"follow-me-placeholder-overlay"},e.default.createElement("div",{className:"follow-me-placeholder-image"}),e.default.createElement("div",{className:"follow-me-placeholder-text"},a)))}},{key:"render",value:function(){var a=this.props,b=a.children;return a.isFollowMeWebEnabled?
e.default.createElement("div",{className:"follow-me-web-container",ref:this.setDomElement},this.renderPlaceHolder(),this.renderChildren()):e.default.createElement("div",null,b)}}]),b}();a.propTypes={isFollowMeWebEnabled:b.default.bool.isRequired,onDismiss:b.default.func.isRequired,onRestore:b.default.func,toggleMute:b.default.func.isRequired,isDockingEnabled:b.default.bool,placeholderBackgroundImageUrl:b.default.string.isRequired,onDocked:b.default.func,isScrollDockingEnabled:b.default.bool,emitImpressionMetrics:b.default.func,
emitClickMetrics:b.default.func};a.defaultProps={isScrollDockingEnabled:!1,isDockingEnabled:!1,emitImpressionMetrics:function(){},emitClickMetrics:function(){},onRestore:null,onDocked:null};var y=f.FollowMeWebUtils={isFollowMeWebEnabled:function(a){var b=a["widget-options"]||{},c=p.default.isDeviceDesktop()&&q.default.isWeblabEnabled(a.weblab.followMeDesktopDisplay);a=p.default.isMobileWeb()&&q.default.isWeblabEnabled(a.weblab.followMeMwebDisplay);return!!b.isFollowMeWebEnabled&&(c||a)}};a=f.ConnectedFollowMeWeb=
(0,h.connect)(function(a){return{isFollowMeWebEnabled:y.isFollowMeWebEnabled(a),isDockingEnabled:a.player.playing,isScrollDockingEnabled:a.player.playerEngaged||!a.player.muted}},null,null,{withRef:!0})(a);f.default=(0,d.enableSushiMetrics)("followMeWeb")(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.mapDispatchToProps=void 0;var g=c(a(0));d=a(3);var b=c(a(6)),e=a(168),h=c(a(318)),k=c(a(317)),l=a(2),m=a(15),n=a(14);a=f.mapDispatchToProps=
function(a){return{setShouldDisplayUnmuteAnywhereOverlay:function(b){b=(0,n.setShouldDisplayUnmuteAnywhereOverlay)(b);a(b)}}};f.default=(0,d.connect)(function(a){var b=a["widget-options"],c=b.embedded,d=b.enableDestinationIngress;return{isMuted:a.player.muted,isClosedCaptionOn:a.player.closedCaptionEnabled,isClosedCaptionAvailable:a.player.closedCaptionAvailable,shouldDisplayUnmuteAnywhereOverlay:a.player.displayUnmuteEverywhereOverlay||!1,enableExpandablePlayer:!0===b.enableExpandablePlayer,playerExpanded:!0===
a.player.expanded,enableDockPlayer:e.FollowMeWebUtils.isFollowMeWebEnabled(a),isEmbedded:!!c,enableIframeFullscreen:(0,l.isWeblabEnabled)(a.weblab.enableIframeFullscreen),enableExpandableViewInAdSlotVod:m.playerConfig.vodFullScreen&&(0,l.isWeblabEnabled)(a.weblab.enableExpandableViewInAdSlotVod),isDestinationIngressEnabled:!1!==d&&(0,l.isWeblabEnabled)(a.weblab.enableDestinationIngress)}},a)(function(a){var c=b.default.isDeviceMobile()?h.default:k.default;return g.default.createElement(c,a)})},function(d,
f,a){function c(a){(0,n.logError)(void 0,Error("unexpected VideoJs Twitch tech call "+a))}function g(){return c("autoplay"),!1}function b(){c("setAutoplay")}function e(a,b){("T3"!==b&&["on","one"].forEach(function(b){var c=a[b];c&&(a[b]=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];a=b[b.length-1];return"function"==typeof a&&(a.wrapper||(a.wrapper=(0,p.guardErrorWrapper)(a)),b[b.length-1]=a.wrapper),c.apply(this,b)})}),"T2"!==b&&function(){var b=a.off;b&&(a.off=function(){for(var a=
arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];a=c[c.length-1];return"function"==typeof a&&a.wrapper&&(c[c.length-1]=a.wrapper),b.apply(this,c)})}(),"T1"!==b)&&(b=a.trigger)&&(a.trigger=(0,p.guardErrorWrapper)(b))}Object.defineProperty(f,"__esModule",{value:!0});f.patchTwitchTech=f.TWITCH_TECH_NAME=void 0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?
"symbol":typeof a},k=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();f.noOpAutoplay=g;f.noOpSetAutoplay=b;f.guardVideojs=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return r.videojs&&r.videojs.guarded?r.videojs:(Object.keys(t).forEach(function(b){var c=a.getComponent(b);
c&&t[b].filter(function(a){return"function"==typeof c.prototype[a]}).forEach(function(a){c.prototype[a]=v(c.prototype[a])})}),u.filter(function(b){return"function"==typeof a[b]}).forEach(function(b){a[b]=v(a[b])}),function(b){var c=a.getComponent("Component");["setTimeout","setInterval"].forEach(function(a){var b=c.prototype[a];b&&(c.prototype[a]=function(a){for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b.call.apply(b,[this,(0,p.guardErrorWrapper)(a)].concat(d))})})}(),
function(a,b){var c=a.getComponent("Component"),d=a.getComponent("Player"),f=c.prototype.ready,p=d.prototype.initChildren;c.prototype.ready=function(){this.guarded||this instanceof d||(this.guarded=!0,e(this,b));for(var a=arguments.length,c=Array(a),p=0;p<a;p++)c[p]=arguments[p];return f.apply(this,c)};d.prototype.initChildren=function(){this.guarded||(this.guarded=!0,e(this,b));for(var a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];return p.apply(this,c)}}(a,b),r.videojs=a,r.videojs.guarded=
!0,a)};f.guardTwitchTech=function(a,b){a=a.tech(!0);if(a=b?a.Di:a.Ei)if(b=b?a.Xt:a.Wt)b=b.constructor,"function"==typeof b&&(a=b.prototype.emit)&&!a.guarded&&(b.prototype.emit=(0,p.guardErrorWrapper)(a))};var l=function(a){return a&&a.__esModule?a:{default:a}}(a(77)),m=a(5),n=a(268),p=a(4),q=f.TWITCH_TECH_NAME="TwitchWhiteLabel",t={Component:["addClass","removeClass","hasClass","toggleClass"],MuteToggle:["updateIcon_"],Player:["createEl","enterFullWindow","exitFullWindow"]},u=["addClass","removeClass",
"hasClass"];f.patchTwitchTech=function(a){(a=a.getTech(q))&&(a.prototype.autoplay=a.prototype.autoplay||g,a.prototype.setAutoplay=a.prototype.setAutoplay||b)};var v=function(a){return function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return p.guardError.apply(void 0,[a.bind(this)].concat(c))}};a=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.enableSvsPlayer,c=void 0===c?void 0:c,d=b.patchVideoJs,d=void 0!==d&&d,e=b.patchVideoJsEvents,
e=void 0===e?void 0:e,b=b.upgradeSvsPlayer,b=void 0!==b&&b;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.enableSvsPlayer=c;this.patchVideoJs=d;this.patchVideoJsEvents=e;this.upgradeSvsPlayer=b;this.promises={}}return k(a,[{key:"downloadTwitchTech",value:function(){var a=this;return this.promises.downloadTwitchTech?this.promises.downloadTwitchTech:(z.now("amazonlive-twitch-tech-download").execute(function(b){"object"===(void 0===b?"undefined":h(b))?a.promises.downloadTwitchTech=
new Promise(function(a){return z.when("amazonlive-twitch-tech-downloaded").execute(a)}):function(){var b=a.upgradeSvsPlayer?"//cvp.twitch.tv/2.8.1/videojs-hls-tech.min.js":"//cvp.twitch.tv/2.6.3/videojs-hls-tech.min.js";a.promises.downloadTwitchTech=new Promise(function(a){return z.load.js(b,a)})}()}),this.promises.downloadTwitchTech)}},{key:"brilaReady",value:function(){return l.default.loadAuiComponent("amazonlive-need-brila","brila")}},{key:"videojsReady",value:function(){return"T3"!==this.enableSvsPlayer?
l.default.loadAuiComponent("amazonlive-need-brila","brila-videojs").then(function(a){return a.obj}):l.default.loadAuiComponent(null,"amazonlive-videojs")}},{key:"videoJsWithTwitchReady",value:function(){var a=this;return this.promises.videoJsWithTwitchReady||(this.promises.videoJsWithTwitchReady=Promise.all([this.videojsReady(),this.downloadTwitchTech()]).then(function(b){if(!Array.isArray(b))if(Symbol.iterator in Object(b)){var c=[],e=!0,f=!1,p=void 0;try{for(var n,g=b[Symbol.iterator]();!(e=(n=
g.next()).done)&&(c.push(n.value),1!==c.length);e=!0);}catch(l){f=!0,p=l}finally{try{!e&&g.return&&g.return()}finally{if(f)throw p;}}b=c}else throw new TypeError("Invalid attempt to destructure non-iterable instance");b=b[0];return a.patchVideoJs&&(b=d.exports.guardVideojs(b,a.patchVideoJsEvents)),r.registerTwitchTechForVideoJs(b,{logLevel:(0,m.getLogLevel)()}),d.exports.patchTwitchTech(b),b}).catch(p.guardRejection))}}]),a}();a.TWITCH_TECH_NAME=q;f.default=a},function(d,f,a){Object.defineProperty(f,
"__esModule",{value:!0});d={};var c=f.BadgeTypes=d.BadgeTypes={NO_LIVE_BADGE:"NO_LIVE_BADGE",LIVE_BADGE:"LIVE_BADGE",LIVE_VIEWER_BADGE:"LIVE_VIEWER_BADGE"},g=[c.LIVE_VIEWER_BADGE,c.LIVE_BADGE,c.NO_LIVE_BADGE];f.fromWeblabOverride=d.BadgeTypeWeblabOverride=function(a){return a?c.LIVE_VIEWER_BADGE:c.LIVE_BADGE};f.fromWidgetOptionOverride=d.BadgeTypesConverter=function(a,c){return c&&(c=c.toUpperCase()),g.indexOf(c)<g.indexOf(a)?a:c};f.isLiveBadgeEnable=d.isLiveBadgeEnable=function(a){return a!==c.NO_LIVE_BADGE};
f.isLiveViewerBadgeEnable=d.isLiveViewerBadgeEnable=function(a){return a===c.LIVE_VIEWER_BADGE};f.default=d},function(d,f,a){var c=function(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100,f=function m(){g.isWithinViewport(a,100-d)||(c(),g.unsubscribe(m))};return Globals.$(r).scroll(f),f},g={unsubscribe:function(a){Globals.$(r).unbind("scroll",a)},onScrollToElement:function(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100,f=function m(){g.isWithinViewport(a,
d)&&(c(),g.unsubscribe(m))};return Globals.$(r).scroll(f),f},onScrollPastElement:function(a,d,f,k){g.onScrollToElement(a,function(){c(a,d,f)},k)},onScrollElementIntoViewport:function(a,d,f){var k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:50,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:60,m=function(){"function"==typeof f&&f();c(a,n,k)},n=function(){"function"==typeof d&&d();g.onScrollToElement(a,m,l)};g.onScrollPastElement(a,n,k,l)},isWithinViewport:function(a,c){var d=a.getBoundingClientRect();
a=Math.max(0,Math.min(Globals.$(r).height(),d.bottom)-Math.max(0,d.top));d=d.height*c/100;return 0==c?a>d:a>=d}};d.exports=g},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||
!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=c(a(77));a={isInline:d.default.bool,isExpanded:d.default.bool,isDeviceMobile:d.default.bool};d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={},a.isChatLoaded=!1,a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"loadChatWidget",value:function(){var a=this;return this.state.ChatComponent?
e.default.createElement(this.state.ChatComponent,g({key:"amazonlive-chat"},this.props)):(this.isChatLoaded||(this.isChatLoaded=!0,h.default.loadAuiComponent("amazonlive-need-chat","amazonlive-chat").then(function(b){a.setState({ChatComponent:b})})),e.default.createElement("div",{className:"amaznlv-chat-empty"}))}},{key:"render",value:function(){return this.loadChatWidget()}}]),c}();d.propTypes=a;d.defaultProps={isInline:!1,isExpanded:!1,isDeviceMobile:!1};f.default=d},function(d,f,a){Object.defineProperty(f,
"__esModule",{value:!0});d=f.wrapUrl=function(a){return'url("'+a.replace(/['"]/g,"\\$\x26")+'")'};a=f.getScaleForContainer=function(a,d){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(1<b||a>d){var e=Math.round(1E3*d/a)/1E3;return"scale("+(b?Math.min(e,b):e)+")"}return""};f.default={wrapUrl:d,getScaleForContainer:a}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||
!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,d,f){return d&&a(c.prototype,d),f&&a(c,f),c}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(22));d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return c(a,null,[{key:"create",value:function(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"#amazonlive-react-page";z.when("A").execute(function(f){var g=f.$('\x3cdiv id\x3d"'+
c+'"\x3e\x3c/div\x3e');f.$(d).after(g);z.register(a.loadedEventName(c))})}},{key:"render",value:function(c,d){var f=a.loadedEventName(c);z.when(f).execute(function(){g.default.render(d,document.getElementById(c))})}},{key:"loadedEventName",value:function(a){return a+"-loaded"}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.Overlay=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];
e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0));d=c(a(1));var e=c(a(117)),h=a(3),k=c(a(8)),l=c(a(175)),m=a(38),n=a(4),p=c(a(371)),q=void 0,t=function(a){q||(l.default.create("amznlv-live-overlay-frame",a),l.default.render("amznlv-live-overlay-frame",b.default.createElement(u,{key:"singleton-overlay",animation:"slide-up"})),q=!0)},u=f.Overlay=function(a){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.preventDefault=a.preventDefault.bind(a),a.onClickHandler=a.onClickHandler.bind(a),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,null,[{key:"show",value:function(a,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"slide-up";t(d);l.default.render("amznlv-live-overlay-frame",b.default.createElement(c,{key:"singleton-overlay",animation:e},a))}},{key:"close",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:"slide-up";t(a);l.default.render("amznlv-live-overlay-frame",b.default.createElement(c,{key:"singleton-overlay",animation:d}))}}]),g(c,[{key:"onClickHandler",value:function(){var a=this;(0,n.guardError)(function(){return c.close(0,a.props.animation)})}},{key:"preventDefault",value:function(a){a.preventDefault()}},{key:"render",value:function(){var a=m.stateManager.getStore(),c=(0,p.default)(a.getState());return b.default.createElement(h.Provider,{store:a},b.default.createElement(k.default.Context,
null,b.default.createElement("div",{id:"amzlv-overlay-container"},b.default.createElement(e.default,{transitionName:"fade-partial",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.props.children&&b.default.createElement("div",{id:"amzlv-overlay-frame",role:"presentation",key:this.props.children.key,onClick:this.onClickHandler,onWheel:this.preventDefault,onTouchMove:this.preventDefault})),b.default.createElement("div",{id:"amzlv-overlay-dialog"},b.default.createElement(e.default,{transitionName:this.props.animation,
transitionEnterTimeout:300,transitionLeaveTimeout:300},this.props.children&&b.default.createElement("div",{className:"amzlv-dialog-card",key:this.props.children.key},b.default.createElement("span",{className:"a-icon a-icon-close-white",key:"icon",onClick:this.onClickHandler}),this.props.children,c&&b.default.createElement("div",{className:"amzlv-cover-bottom-notch"})))))))}}]),c}();u.propTypes={animation:d.default.string.isRequired};f.default={show:u.show,close:u.close}},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.addToCart=f.canAddToCart=f.isItemAlreadyInCart=f.isWaitingForData=f.isLightningDeal=void 0;var g=c(a(9));d=c(a(5));var b=a(78),e=a(19),h=c(a(66)),k=c(a(375)),l=new Set([e.CustomerStates.INCART,e.CustomerStates.CLAIMED,e.CustomerStates.INWAITLIST]),m=new Set([e.DealStates.AVAILABLE,e.DealStates.WAITLIST]),n=new d.default("AddToCartClaimDeal"),p=f.isLightningDeal=function(a){return a&&a.dealType===e.DealTypes.LIGHTNING_DEAL||
!1};a=f.isWaitingForData=function(a,b){return!(!p(a)||!h.default.isRecognizedCustomer()||b&&(b._lastError||b.customerState&&b.itemState))};d=f.isItemAlreadyInCart=function(a,b){if(!p(a)||!b||b.customerState!==e.CustomerStates.INCART)return!1;a=new Date;return!!(b._incartEnds&&a<b._incartEnds)};var q=f.canAddToCart=function(a,b){return p(a)&&b&&m.has(b.itemState)?b.customerState===e.CustomerStates.INCART?(a=new Date,!!(b._incartEnds&&a>b._incartEnds)):!l.has(b.customerState):!1},t=f.addToCart=function(a){var c=
a.product,d=a.details,f=a.deal,p=a.callback;a=(0,b.getReftag)("amazonlive_carousel_addtocart_deal",c,d);var m=function(a,b){var d=void 0,m=void 0;a&&1005===parseInt(a.errorCode)&&(d=g.default.translate("amazonlive-portal-atc-already-res-error-text","Deal already in cart"),n.warn("Lightning Deal already in cart: "+c.asin+"/"+f.dealId),m={customerState:e.CustomerStates.INCART});n.error("Added to cart failed: "+b);p({hasError:!0,errorMessage:d,dealItemStatus:m})};n.debug("Adding to cart: "+c.asin+" / "+
f.dealId);k.default.claimDeal(c.asin,f.dealId,function(a){if(a&&1===parseInt(a.isClaimed)){var b=parseInt(a.currentCartQuantity);n.debug("Added to cart with quantity: "+b);var c=a.dealItemStatus;return c?c.msCacheTtl=a.msCacheTtl:n.warn("dealItemStatus not present"),void p({hasError:!1,cartQuantity:b,dealItemStatus:c})}if(a&&a.dealItemStatus&&a.dealItemStatus.customerState===e.CustomerStates.INWAITLIST)return n.debug("Joined waitlist"),void p({hasError:!1,isWaitlisted:!0,dealItemStatus:a.dealItemStatus});
m(a,"response.isClaimed not 1")},m,a)};f.default={isLightningDeal:p,isWaitingForData:a,isItemAlreadyInCart:d,canAddToCart:q,addToCart:t}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0)),b=a(8),e=c(a(9));f.default=function(a){return g.default.createElement("div",{className:"va-live-product-deal-checking"},g.default.createElement(b.Spinner,{spinnerSize:"small",cssClass:"va-live-product-deal-spinner"}),g.default.createElement(b.Text,
{textSize:"mini"},e.default.translate("csld-checking_deal_status_alt","Checking Deal Status")))}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}Object.defineProperty(f,"__esModule",{value:!0});f.SingleProductActions=void 0;var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||
!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(0));d=c(a(1));var h=a(3),k=c(a(9)),l=c(a(379)),m=c(a(178)),n=c(a(373)),p=c(a(31)),q=c(a(49)),t=a(110),u=c(a(177)),v=c(a(41)),w=c(a(2)),y=a(19);a=f.SingleProductActions=function(a){function c(){var a,b,d;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;for(var f=arguments.length,p=Array(f),n=0;n<f;n++)p[n]=arguments[n];
return b=d=g(this,(a=c.__proto__||Object.getPrototypeOf(c)).call.apply(a,[this].concat(p))),d.renderSpinning=function(){return e.default.createElement(m.default,null)},g(d,b)}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),
b(c,[{key:"waitingForData",value:function(){return this.props.lightningDealsAddToCartEnabled&&u.default.isWaitingForData(this.props.deal,this.props.dealItemStatus)}},{key:"isItemAlreadyInCart",value:function(){return this.props.lightningDealsAddToCartEnabled&&u.default.isItemAlreadyInCart(this.props.deal,this.props.dealItemStatus)}},{key:"isCustomerInWaitlist",value:function(){return this.props.dealItemStatus&&this.props.dealItemStatus.customerState===y.CustomerStates.INWAITLIST}},{key:"canAddToCart",
value:function(){if(!this.props.deal)return this.props.product.canAddToCart;var a=v.default.isDealPrimeExclusive(this.props.deal),b=this.props.deal.primeAccessType;return!("PRIME_ONLY_DOTD"===b||"PRIME_ONLY_BD"===b)&&(!(!v.default.canAddToCartDeal(this.props.deal)||this.props.isPrimeMemberCheckEnabled&&(!this.props.isPrimeProductCheckEnabled||a)&&!this.props.hasCustomerPrimeEarlyAccess)||this.props.lightningDealsAddToCartEnabled&&u.default.canAddToCart(this.props.deal,this.props.dealItemStatus,this.props.customerId)&&
(!this.props.isPrimeMemberCheckEnabled||this.props.isPrimeProductCheckEnabled&&!a||this.props.hasCustomerPrimeEarlyAccess))}},{key:"renderCustomerInWaitlist",value:function(){return e.default.createElement("div",null,k.default.translate(this.props.inWaitlistText,"You are on the Waitlist for this item."))}},{key:"renderAlreadyInCart",value:function(){var a=this;return e.default.createElement(n.default,{checkoutExpiration:this.props.dealItemStatus&&this.props.dealItemStatus._incartEnds,onExpired:function(){a.forceUpdate()}})}},
{key:"renderDisabled",value:function(){return e.default.createElement(l.default,{product:this.props.product,details:this.props.details,enabled:!1})}},{key:"renderAddToCart",value:function(){return e.default.createElement(l.default,{product:this.props.product,deal:this.props.deal,dealItemStatus:this.props.dealItemStatus,details:this.props.details,broadcastId:this.props.broadcastId,onCall:this.props.onCallingAddToCart,onAddToCart:this.props.onAddToCart,addToCartResultMessageButtonTimeOut:this.props.addToCartResultMessageButtonTimeOut})}},
{key:"renderSeeDetails",value:function(){return e.default.createElement("div",{className:"va-live-product-see-details"},e.default.createElement(p.default,{details:this.props.details,broadcastId:this.props.broadcastId,deal:this.props.deal,item:this.props.product,componentName:"productButton"},e.default.createElement(q.default,{buttonSuffix:"see-details"},k.default.translate("amazon-live-details-button-text","See details"))))}},{key:"render",value:function(){return this.props.enabled?this.waitingForData()?
this.renderSpinning():this.isItemAlreadyInCart()?this.renderAlreadyInCart():this.isCustomerInWaitlist()?this.renderCustomerInWaitlist():this.canAddToCart()?this.renderAddToCart():this.renderSeeDetails():this.renderDisabled()}}]),c}();a.propTypes={product:t.ProductPropType.isRequired,deal:d.default.object,details:t.ItemDetailsPropType.isRequired,broadcastId:d.default.string,enabled:d.default.bool,onCallingAddToCart:d.default.func,onAddToCart:d.default.func,addToCartResultMessageButtonTimeOut:d.default.number,
isPrimeMemberCheckEnabled:d.default.bool.isRequired,isPrimeProductCheckEnabled:d.default.bool.isRequired,hasCustomerPrimeEarlyAccess:d.default.bool.isRequired,lightningDealsAddToCartEnabled:d.default.bool,dealItemStatus:d.default.object,customerId:d.default.string,inWaitlistText:d.default.string};a.defaultProps={broadcastId:"",enabled:!0,onCallingAddToCart:function(){},onAddToCart:function(){},lightningDealsAddToCartEnabled:!1,inWaitlistText:"gb_you_are_on_waitlist"};f.default=(0,h.connect)(function(a,
b){return{isPrimeMemberCheckEnabled:a.weblab&&w.default.isWeblabEnabled(a.weblab.primeMemberCheck),isPrimeProductCheckEnabled:a.weblab&&"T2"===a.weblab.primeMemberCheck,hasCustomerPrimeEarlyAccess:!!a["customer-context"].hasPrimeEarlyAccess,lightningDealsAddToCartEnabled:a.weblab&&w.default.isWeblabEnabled(a.weblab.enableLightningDealsAddToCart),dealItemStatus:b.deal&&w.default.getNestedValue(a,"perks.dealItemsStatus."+b.product.asin),customerId:a.metrics&&a.metrics.customerId}})(a)},function(d,f,
a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingCarouselProductActions=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=a(3),h=c(a(9)),k=c(a(6)),l=c(a(2)),m=c(a(179)),n=a(110),p=c(a(372)),q=c(a(365)),t=c(a(31)),
u=c(a(49));a=f.ShoppingCarouselProductActions=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.seeDetailsClicked=a.seeDetailsClicked.bind(a),a.chooseOptionsClicked=a.chooseOptionsClicked.bind(a),a}return function(a,b){if("function"!=
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"isBuyableMultiItemWithOneProductOption",value:function(){return!(!this.isBuyableMultiItem()||!this.props.product.variationMatrix.indexedProducts)&&1===Object.keys(this.props.product.variationMatrix.indexedProducts).length}},
{key:"isBuyableMultiItem",value:function(){return!this.props.product.singularItem&&this.props.product.variationMatrix&&this.props.product.variationMatrix.dimensions.length<=this.props.maxSupportedDimensionSize}},{key:"getProduct",value:function(){if(this.isBuyableMultiItemWithOneProductOption()){var a=Object.keys(this.props.product.variationMatrix.indexedProducts);return this.props.product.variationMatrix.indexedProducts[a[0]]}return this.props.product}},{key:"canRenderSeeDetailsButton",value:function(){return!(!this.props.product.variationMatrix||
!this.props.product.variationMatrix.throttled)||!!this.props.enabled&&(!!this.props.isShopNowButtonForAddToCartEnabled||this.props.isEmbeddedRequest&&(!this.props.isDisplayAdsAddToCartEnabled||this.props.isDisplayAds&&k.default.isDeviceMobile()&&this.canChooseOptions()))}},{key:"seeDetailsClicked",value:function(){var a=this.props,b=a.product;r.open("https://"+(a.marketplaceName+b.productLink)+"/"+b.asin,"_blank")}},{key:"renderSeeDetailsButton",value:function(){return b.default.createElement("div",
{className:"va-live-product-see-details"},b.default.createElement(t.default,{details:this.props.details,broadcastId:this.props.broadcastId,deal:this.props.deal,item:this.props.product,componentName:"productButton"},b.default.createElement(u.default,{buttonSuffix:"see-details"},h.default.translate("amazon-live-details-button-text","See details"))))}},{key:"canChooseOptions",value:function(){return this.props.enabled&&this.isBuyableMultiItem()&&!this.isBuyableMultiItemWithOneProductOption()}},{key:"chooseOptionsClicked",
value:function(){var a=this.props,b=a.onOptionClicked;a.forceChooseOptionsToDetails?this.seeDetailsClicked():b()}},{key:"renderChooseOptions",value:function(){var a=k.default.isDeviceMobile()?p.default:q.default;return b.default.createElement(a,{product:this.props.product,details:this.props.details,onOptionClicked:this.chooseOptionsClicked,broadcastId:this.props.broadcastId,deal:this.props.deal})}},{key:"renderSingleProductActionButton",value:function(a,c){return b.default.createElement(m.default,
{product:a,deal:c,details:this.props.details,broadcastId:this.props.broadcastId,enabled:this.props.enabled,onAddToCart:this.props.onAddToCart})}},{key:"render",value:function(){return this.canRenderSeeDetailsButton()?this.renderSeeDetailsButton():this.canChooseOptions()?this.renderChooseOptions():this.renderSingleProductActionButton(this.getProduct(),this.props.deal)}}]),c}();a.propTypes={product:n.ProductPropType.isRequired,details:n.ItemDetailsPropType.isRequired,onAddToCart:d.default.func,onOptionClicked:d.default.func,
broadcastId:d.default.string,deal:d.default.object,maxSupportedDimensionSize:d.default.number,isEmbeddedRequest:d.default.bool,isShopNowButtonForAddToCartEnabled:d.default.bool,marketplaceName:d.default.string.isRequired,enabled:d.default.bool,isDisplayAdsAddToCartEnabled:d.default.bool,forceChooseOptionsToDetails:d.default.bool.isRequired,isDisplayAds:d.default.bool};a.defaultProps={maxSupportedDimensionSize:3,isEmbeddedRequest:!1,isShopNowButtonForAddToCartEnabled:!1,isDisplayAdsAddToCartEnabled:!1,
enabled:!0,isDisplayAds:!1};f.default=(0,e.connect)(function(a,b){var c=a["widget-options"]||{};b=!b.inExpandedPlayer&&"desktopAd300x250"===a["component-id"];return{isEmbeddedRequest:c.embedded||!1,isShopNowButtonForAddToCartEnabled:c.shopNowButtonForAddToCart||!1,marketplaceName:c.marketplaceName||"",isDisplayAdsAddToCartEnabled:a.weblab&&l.default.isWeblabEnabled(a.weblab.displayAdsAddToCart),forceChooseOptionsToDetails:b,isDisplayAds:c.displayAds||!1}})(a)},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=a(2);a={displayFunc:d.default.func,endDate:d.default.instanceOf(Date).isRequired,onFinish:d.default.func};d=function(a){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={countdownInSec:a.getCountdownInSec()},a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,null,[{key:"getDateDiffInSec",value:function(a,b){a=b.getTime()-a.getTime();return Math.ceil(a/1E3)}},{key:"getFormattedTimeHash",value:function(a){var b=Math.floor(a%86400/3600),c=Math.floor(a%3600/60),d=Math.floor(a%60);return{days:Math.floor(a/86400),hours:10>b?"0"+b:""+b,minutes:10>c?"0"+c:""+c,seconds:10>d?"0"+d:""+d}}}]),g(c,[{key:"getCountdownInSec",
value:function(){var a=new Date,a=this.props.endDate?c.getDateDiffInSec(a,this.props.endDate):0;return Math.max(0,a)}},{key:"componentDidMount",value:function(){var a=this;this.interval=(0,e.setInterval)(function(){var b=a.getCountdownInSec();a.setState({countdownInSec:b});0>=a.state.countdownInSec&&(clearInterval(a.interval),a.props.onFinish())},1E3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var a=c.getFormattedTimeHash(this.state.countdownInSec);
return this.props.displayFunc(a)}}]),c}();d.propTypes=a;d.defaultProps={displayFunc:function(a){var c=a.days;return b.default.createElement("div",null,(c?c+"d ":"")+a.hours+":"+a.minutes+":"+a.seconds)},onFinish:function(){}};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);
Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0));d=c(a(1));var e=c(a(181)),h=a(19);a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={ended:a.props.deal.endDate<=
new Date},a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"renderClaimBar",value:function(){return void 0===this.props.deal.percentClaimed?b.default.createElement("div",null):b.default.createElement("div",
{className:"claim-bar "+(this.state.ended?"ended":"")},b.default.createElement("div",{className:"claim-bar-inner",style:{width:this.props.deal.percentClaimed+"%"}}))}},{key:"renderDealEndsTime",value:function(){var a=this,c=this.state.ended?b.default.createElement("span",null,"00:00:00"):b.default.createElement(e.default,{endDate:this.props.deal.endDate,displayFunc:function(a){if(!a)return b.default.createElement("span",null);var c=a.days;return b.default.createElement("span",{className:"amazonlive-shopping-carousel-deal-countdown"},
(c?c+"d ":"")+a.hours+":"+a.minutes+":"+a.seconds)},onFinish:function(){a.setState({ended:!0})}});return b.default.createElement("div",{className:"time-ends "+(this.state.ended?"ended":"")},b.default.createElement("span",null,"Ends in ",c))}},{key:"renderClaimInfo",value:function(){return void 0===this.props.deal.percentClaimed?b.default.createElement("div",null):b.default.createElement("div",{className:"claim-info "+(this.state.ended?"ended":"")}," ",this.props.deal.percentClaimed,"% Claimed")}},
{key:"render",value:function(){var a=this.props.deal.dealType===h.DealTypes.LIGHTNING_DEAL,c=this.props.deal.dealType===h.DealTypes.BEST_DEAL;return b.default.createElement("div",{className:"amazonlive-shopping-carousel-deal-info"},a&&this.renderClaimBar(),b.default.createElement("div",{className:"deal-info-container"},a&&this.renderClaimInfo(),!c&&this.renderDealEndsTime()))}}]),c}();a.propTypes={deal:d.default.object.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?
a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(8)),h=c(a(184));a={numFullStars:d.default.number.isRequired,hasHalfStar:d.default.bool.isRequired,numReviews:d.default.number.isRequired};d=function(a){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"render",value:function(){return b.default.createElement("span",{className:"shopping-carousel-product-star-review"},b.default.createElement(e.default.ReviewStars,{iconSize:"mini",numFullStars:this.props.numFullStars,hasHalfStar:this.props.hasHalfStar}),b.default.createElement(e.default.Text,{textSize:"small",textColor:"base",cssClass:"amazonlive-shopping-carousel-product-info-num-reviews"},
b.default.createElement("span",null,h.default.formatNumber(this.props.numReviews))))}}]),c}();d.propTypes=a;f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=a(2);f.default={formatNumber:function(a){if("number"!=typeof a)return a;try{return a.toLocaleString((0,c.getLocale)())}catch(b){return a.toString()}}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ProductDetails=f.getDefaultDealsLayout=
void 0;d=c(a(1));var g=c(a(0)),b=c(a(12)),e=a(8),h=c(a(184)),k=c(a(112)),l=c(a(111)),m=c(a(183)),n=c(a(182)),p=c(a(31)),q=a(41),t=a(19),u=a(15),v=c(a(380));a={product:d.default.object.isRequired,details:d.default.object.isRequired,layout:d.default.func,deal:d.default.object,isSingleDoubleCardSingleItem:d.default.bool,broadcastId:d.default.string,inExpandedPlayer:d.default.bool};var w=f.getDefaultDealsLayout=function(a){if(a&&(0,q.showDealInfo)(a.dealType)){var b=u.carouselConfig.productDetailsLightningLayout,
c=u.carouselConfig.productDetailsDOTDLayout;switch(a.dealType){case t.DealTypes.LIGHTNING_DEAL:return b;case t.DealTypes.DEAL_OF_THE_DAY:return c;default:return}}return v.default};d=f.ProductDetails=function(a){var c=a.isSingleDoubleCardSingleItem,d=a.product,f=a.details,q=a.broadcastId,v=a.deal,F=a.layout,H=a.inExpandedPlayer,E=u.carouselConfig.productDetailsLayout,G=u.carouselConfig.primeBadgeSize;a=g.default.createElement(k.default,{product:d,details:f,broadcastId:q,deal:v,singleDoubleCardSingleItem:c});
var f=0<d.totalReviewCount?g.default.createElement("span",{className:"amazonlive-shopping-carousel-product-review"},g.default.createElement(p.default,{item:d,details:f,broadcastId:q,deal:v,componentName:"productReview",ariaLabel:function(){var a=d.starCount;return d.hasHalfStar&&(a+=" and a half "),a+"stars. "+h.default.formatNumber(d.totalReviewCount)+" reviews"}()},g.default.createElement(m.default,{numFullStars:d.starCount,hasHalfStar:d.hasHalfStar,numReviews:d.totalReviewCount,includePrimeBadge:d.eligibleForPrimeShipping}))):
void 0,q=g.default.createElement("div",{className:"amazonlive-shopping-carousel-product-price"},g.default.createElement(l.default,{price:d.formattedPrice,listPrice:d.formattedListPrice,isOutOfStock:d.outOfStock,deal:v})),G=d.eligibleForPrimeShipping?g.default.createElement("span",{className:"amazonlive-shopping-carousel-product-prime-badge"},g.default.createElement(e.Icon,{iconType:"prime",iconSize:G})):void 0,I=v&&g.default.createElement(n.default,{deal:v}),F=F||!E||H?w(v):E;return g.default.createElement(F,
{productTitle:a,customerReview:f,productPrice:q,productDeal:I,badge:G,isSingleDoubleCardSingleItem:c,className:(0,b.default)({"al-lo-ld":v&&v.dealType===t.DealTypes.LIGHTNING_DEAL,"al-lo-dotd":v&&v.dealType===t.DealTypes.DEAL_OF_THE_DAY})})};d.propTypes=a;d.defaultProps={deal:null,layout:null,isSingleDoubleCardSingleItem:!1,broadcastId:"",inExpandedPlayer:!1};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||
function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=c(a(2)),k=(c(a(6)),c(a(31))),l=c(a(383)),m=a(79);a=function(a){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.touchAsClick=h.default.isIOSDevice(),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"getImage",value:function(){switch(this.props.style){case "forceCardExpand":return(0,m.getStyledImage)({imageUrl:this.props.product.formattedImageUrl,baseWidth:140,baseHeight:140});case "minimalWidget":return(0,m.getStyledImage)({imageUrl:this.props.product.formattedImageUrl,baseWidth:127,baseHeight:152});case "desktopBrandTile":return(0,m.getStyledImage)({imageUrl:this.props.product.formattedImageUrl,
baseWidth:102,baseHeight:124});default:return(0,m.getStyledImage)({imageUrl:this.props.product.formattedImageUrl,baseWidth:95,baseHeight:95})}}},{key:"isFirstImage",value:function(){return 0===this.props.details.position}},{key:"renderImage",value:function(){var a=this.getImage(),a={srcSet:a.srcSet,src:a.src,className:"amazonlive-shopping-carousel-card-image","aria-label":this.props.product.title};return this.isFirstImage()?e.default.createElement(l.default,g({},a,{scope:"AmazonLiveFirstCarouselImage"})):
e.default.createElement("img",g({},a,{alt:""}))}},{key:"render",value:function(){var a=this.props;return e.default.createElement(k.default,{item:a.product,details:a.details,broadcastId:a.broadcastId,deal:a.deal,componentName:"productImage",touchToClick:this.touchAsClick},this.renderImage())}}]),c}();a.propTypes={product:d.default.object.isRequired,details:d.default.object.isRequired,broadcastId:d.default.string,deal:d.default.object,style:d.default.oneOf(["base","minimalWidget","desktopBrandTile",
"forceCardExpand"])};a.defaultProps={broadcastId:"",deal:{},style:"base"};f.default=a},,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0)),b=a(4);a=function(a){var c=a.onCapturingClick,d=a.onBubblingClick;a=a.children;return g.default.createElement("div",{role:"presentation",className:"amznlv-react-interaction-detector",onClick:(0,b.guardErrorWrapper)(d),onClickCapture:(0,b.guardErrorWrapper)(c)},a)};a.propTypes=
{onCapturingClick:d.default.func,onBubblingClick:d.default.func};a.defaultProps={onCapturingClick:function(){},onBubblingClick:function(){}};f.default=a},function(d,f,a){function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,
e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=function(a){return a&&a.__esModule?a:{default:a}}(a(32)),e=function(){function a(b,c,d,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.x=b;this.y=c;this.width=Math.max(d,0);this.height=Math.max(e,0)}return g(a,[{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+
this.height}},{key:"area",get:function(){return this.width*this.height}}]),a}();e.fromViewport=function(){var a=b.default.getWindow();return new e(a.scrollX||a.pageXOffset,a.scrollY||a.pageYOffset,a.document.documentElement.clientWidth,a.document.documentElement.clientHeight)};e.fromElement=function(a){a=a.getBoundingClientRect();var b=e.fromViewport();return new e(a.left+b.left,a.top+b.top,a.width,a.height)};e.fromIntersection=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];
var a=Math.max.apply(Math,c(b.map(function(a){return a.left}))),d=Math.max.apply(Math,c(b.map(function(a){return a.top}))),f=Math.min.apply(Math,c(b.map(function(a){return a.right}))),b=Math.min.apply(Math,c(b.map(function(a){return a.bottom})));return new e(a,d,f-a,b-d)};f.default=e},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||
!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(118)),e=c(a(32)),h=a(223),k=a(4),l=function(){return e.default.getWindow()},m={leading:!0,trailing:!1},n=function(a,b){a&&a.forEach(function(a){a.events.forEach(function(c){b(a.element,c)})})};d=function(){function a(c,d,e){var f=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).customEvents;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
!0;this.viewportCheck=c;this.inViewCallback=d;this.outOfViewCallback=e;this.customEvents=f;this.calculateIsVisibleImmediate=(0,k.guardErrorWrapper)((0,b.default)(this.calculateIsVisible,250,m).bind(this));this.calculateIsVisibleDelayed=(0,k.guardErrorWrapper)((0,b.default)(this.calculateIsVisible,250).bind(this))}return g(a,[{key:"calculateIsVisible",value:function(){var a=this.viewportCheck();!0!==this.isVisible&&a?(this.isVisible=!0,this.inViewCallback()):!1===this.isVisible||a||(this.isVisible=
!1,this.outOfViewCallback())}},{key:"start",value:function(){var a=this;this.calculateIsVisible();z.when("mash").execute(function(b){b&&b.addEventListener&&(b.addEventListener("appPause",a.calculateIsVisibleImmediate),b.addEventListener("appResume",a.calculateIsVisibleImmediate))});e.default.isSafeFrame()?e.default.getWindow().addEventListener(h.VIEWABILITY_CHANGE_EVENT,this.calculateIsVisibleDelayed):(l().document.addEventListener("visibilitychange",this.calculateIsVisibleImmediate),l().addEventListener("resize",
this.calculateIsVisibleDelayed),l().addEventListener("scroll",this.calculateIsVisibleDelayed));n(this.customEvents,function(b,c){b.addEventListener(c,a.calculateIsVisibleDelayed)})}},{key:"stop",value:function(){var a=this;this.isVisible=void 0;z.when("mash").execute(function(b){b&&b.removeEventListener&&(b.removeEventListener("appPause",a.calculateIsVisibleImmediate),b.removeEventListener("appResume",a.calculateIsVisibleImmediate))});e.default.isSafeFrame()?e.default.getWindow().removeEventListener(h.VIEWABILITY_CHANGE_EVENT,
this.calculateIsVisibleDelayed):(l().document.removeEventListener("visibilitychange",this.calculateIsVisibleImmediate),l().removeEventListener("resize",this.calculateIsVisibleDelayed),l().removeEventListener("scroll",this.calculateIsVisibleDelayed));n(this.customEvents,function(b,c){b.removeEventListener(c,a.calculateIsVisibleDelayed)})}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=
arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=function(a){return a&&a.__esModule?a:{default:a}}(a(28)),e=a(87),h=a(21);d=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},
d=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).beforeEmitMetrics,d=void 0===d?function(){}:d;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.widgetName=b;this.payload=c||{};this.beforeEmitMetrics=d;this.emits={};this.emitMetrics=this.emits.emitMetrics=this.emitMetrics.bind(this);this.emitImpressionMetrics=this.emits.emitImpressionMetrics=this.emitImpressionMetrics.bind(this);this.emitWidgetLoadLatency=this.emits.emitWidgetLoadLatency=this.emitWidgetLoadLatency.bind(this);
this.emitClickMetrics=this.emits.emitClickMetrics=this.emitClickMetrics.bind(this);this.emitErrorMetrics=this.emits.emitErrorMetrics=this.emitErrorMetrics.bind(this);this.getOnClickMetricsHandler=this.emits.getOnClickMetricsHandler=this.getOnClickMetricsHandler.bind(this)}return g(a,[{key:"setWidgetPayload",value:function(){this.payload=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})||{}}},{key:"emitMetrics",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{},d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h.metricsEmitPriority.LOW,a=a||{};this.beforeEmitMetrics();b.default.emitMetrics(c({WIDGET:this.widgetName},this.payload,a,{JSON_PAYLOAD:c({},this.payload.JSON_PAYLOAD,a.JSON_PAYLOAD)}),d)}},{key:"emitImpressionMetrics",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h.metricsEmitPriority.LOW,a=a||{};this.emitMetrics(c({},a,{EVENT_TYPE:"impression"}),
b)}},{key:"emitWidgetLoadLatency",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h.metricsEmitPriority.MEDIUM,a=a||{};this.emitMetrics(c({},a,{EVENT_TYPE:"impression",INT_PAYLOAD:(0,e.getLatencyTimeFromHTMLPrint)(),STRING_PAYLOAD:"clientSideLatency"}),b)}},{key:"emitClickMetrics",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
h.metricsEmitPriority.HIGH,a=a||{};this.emitMetrics(c({},a,{EVENT_TYPE:"click"}),b)}},{key:"emitErrorMetrics",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h.metricsEmitPriority.MEDIUM,a=a||{};this.emitMetrics(c({},a,{EVENT_TYPE:"error"}),b)}},{key:"getOnClickMetricsHandler",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},b=this,c=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{},d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=d.stopPropagation,f=void 0===e||e,d=d.preventDefault,g=void 0===d||d;return function(d){a(d);f&&d&&d.stopPropagation();g&&d&&d.preventDefault();b.emitClickMetrics(c)}}},{key:"emitMetricsMethods",get:function(){return this.emits}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a={productTitle:d.default.element.isRequired,
productPrice:d.default.element.isRequired,productDeal:d.default.element,customerReview:d.default.element,className:d.default.string,isSingleDoubleCardSingleItem:d.default.bool,badge:d.default.element};d=function(a){var c=!a.productDeal&&a.badge;return a.isSingleDoubleCardSingleItem?b(a,c):g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-gateway "+a.className},g.default.createElement("div",{className:"al-lo-price"},a.productPrice),g.default.createElement("div",{className:"al-lo-deal"},
a.productDeal),g.default.createElement("div",{className:"al-lo-title"},a.productTitle),c&&g.default.createElement("div",{className:"al-lo-badge"},a.badge),g.default.createElement("div",{className:"al-lo-review"},a.customerReview))};var b=function(a,b){return g.default.createElement("div",{className:"al-lo-single-double-card-carousel-single-item-product-details al-lo-gateway "+a.className},g.default.createElement("div",{className:"al-lo-title"},a.productTitle),g.default.createElement("div",{className:"al-lo-review"},
a.customerReview),g.default.createElement("div",{className:"al-lo-price"},a.productPrice),b&&g.default.createElement("div",{className:"al-lo-badge"},a.badge),g.default.createElement("div",{className:"al-lo-deal"},a.productDeal))};d.propTypes=a;b.propTypes=a;f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.FlexProductLayout=void 0;d=c(a(1));var g=c(a(0)),b=c(a(9)),e=c(a(12));a=a(27);var h=f.FlexProductLayout=function(a){var c=
a.notification,d=a.dealBadge,f=a.productImage,p=a.productDetails,q=a.productActions,h=a.highlighted,u=a.eventDealBadge;a=a.removeActionButton;var v=b.default.translate("amazon-live-on-air-now")||"On now";return g.default.createElement("div",{className:"flex-product-layout"},h&&g.default.createElement("div",{className:"highlighted-text"},v),g.default.createElement("div",{className:"notification"},c),g.default.createElement("div",{className:"deal-badge"},d),g.default.createElement("div",{className:"image"},
f),g.default.createElement("div",{className:(0,e.default)("details",{"has-event-deal-badge":u})},u,p,!a&&q))};h.propTypes={notification:d.default.element,dealBadge:d.default.element,productImage:d.default.element.isRequired,productDetails:d.default.element.isRequired,productActions:d.default.element,highlighted:d.default.bool,eventDealBadge:d.default.element,removeActionButton:d.default.bool};h.defaultProps={notification:null,dealBadge:null,productActions:null,highlighted:!1,eventDealBadge:null,removeActionButton:!1};
f.default=(0,a.connectForRemoveActionButtonFeature)(h)},,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0)),b=c(a(9)),e=c(a(12));a=function(a){var c=a.customTileImage,d=a.customTileDetails,f=a.highlighted;a=a.eventDealBadge;var n=b.default.translate("amazon-live-on-air-now")||"On now";return g.default.createElement("div",{className:"flex-custom-tile"},f&&g.default.createElement("div",{className:"highlighted-text"},
n),g.default.createElement("div",{className:"image"},c),g.default.createElement("div",{className:(0,e.default)("details",{"has-event-deal-badge":a})},a,d))};a.propTypes={highlighted:d.default.bool,customTileImage:d.default.element.isRequired,customTileDetails:d.default.element.isRequired,eventDealBadge:d.default.element};a.defaultProps={highlighted:!1,eventDealBadge:null};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"product-details-mobile-flex"+(a.customerReview?"":" no-review")},g.default.createElement("div",{className:"title"},a.productTitle),a.customerReview&&g.default.createElement("div",{className:"review"},a.customerReview),g.default.createElement("div",{className:"price"},a.productPrice),g.default.createElement("div",{className:"deal"},a.productDeal))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,
productDeal:d.default.element,customerReview:d.default.element};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(a){a="compact"!==a;var d=document.querySelector(".flex\x3e.carousel-wrapper"),d=d?d.offsetWidth:92;return{slickSettings:{speed:a?400:0,swipe:a,centerPadding:"0",slidesToShow:1,variableWidth:!0},increaseCardWidthForVariation:!0,responsiveSingleCard:!a,cssLayout:"al-default-carousel-container-layout",cardWidth:a?271:d}}},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"amaznlv-mobile-overlay-static-volume-controls "+(a.isActive?"overlay-active":"")},g.default.createElement("div",{className:a.className},g.default.createElement("div",{className:"amaznlv-react-player-gradient-top"}),a.isLive&&g.default.createElement("div",{className:"amaznlv-react-player-gradient-bottom"}),a.controlPanelInfo,g.default.createElement("div",
{className:"amazonlive-player-control-buttons"},a.closedCaptionButton,a.collapseButton)),g.default.createElement("div",{className:"amaznlv-player-static-controls"},g.default.createElement("div",{className:"amazonlive-player-control-buttons"},a.volumeButton)))};a.propTypes={className:d.default.string.isRequired,controlPanelInfo:d.default.element,closedCaptionButton:d.default.element,collapseButton:d.default.element,isLive:d.default.bool.isRequired,volumeButton:d.default.element,isActive:d.default.bool};
a.defaultProps={controlPanelInfo:void 0,closedCaptionButton:void 0,collapseButton:void 0,volumeButton:void 0,isActive:void 0};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"amaznlv-mobile-overlay-title-controls "+(a.isActive?"overlay-active":"")},g.default.createElement("div",{className:a.className},g.default.createElement("div",{className:"amaznlv-react-player-gradient-top"}),
a.isLive&&g.default.createElement("div",{className:"amaznlv-react-player-gradient-bottom"}),a.controlPanelInfo),g.default.createElement("div",{className:"amaznlv-player-static-controls"},g.default.createElement("div",{className:"amazonlive-player-control-buttons"},a.volumeButton,a.closedCaptionButton,a.collapseButton)))};a.propTypes={className:d.default.string.isRequired,controlPanelInfo:d.default.element,closedCaptionButton:d.default.element,collapseButton:d.default.element,isLive:d.default.bool.isRequired,
volumeButton:d.default.element,isActive:d.default.bool};a.defaultProps={controlPanelInfo:void 0,closedCaptionButton:void 0,collapseButton:void 0,volumeButton:void 0,isActive:void 0};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}f=c(a(489));var g=c(a(488)),b=c(a(487)),e=c(a(486)),h=c(a(485)),k=c(a(484)),l=c(a(483)),m=c(a(482)),n=c(a(481));a={PageContext:a(480),FixedGridRow:a(479),FixedGridColumn:a(478),GridRow:a(477),GridColumn:a(476),Text:a(475),Button:a(474),DropdownOption:a(473),
DropdownGroup:a(472),Dropdown:a(471),Alert:f.default,Price:l.default,PriceRange:n.default,PriceDash:m.default,Section:b.default,Link:g.default,Icon:k.default,ReviewStars:h.default,Spinner:e.default};d.exports=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return{slickSettings:{swipeToSlide:!1,slidesToShow:1,slidesToScroll:1,centerMode:!1,centerPadding:"0"},increaseCardWidthForVariation:!0,cssLayout:"al-default-carousel-container-layout",cardWidth:310}}},,
,,,,,,,,,,,,,,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.POST_MESSAGE_EVENT_NAME="message";f.VIEWABILITY_CHANGE_EVENT="viewabilityChanged"},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a){return a&&a.__esModule?a:{default:a}}(a(32));f.default={registerSafeFrameMessageEventListener:function(a,b){c.default.getWindow().addEventListener(a,b)},dispatchCustomEvent:function(a,b,c){a=new CustomEvent(a,{detail:b});c.dispatchEvent(a)},postStatusChangeEvent:function(a){c.default.getWindow().parent.postMessage(JSON.stringify(a),
"*")}}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=new (function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.cachedAsins={};this.cachedChildAsins={}}return c(a,[{key:"addProduct",
value:function(a){this.cachedAsins[a.asin]=a;this.cacheChildAsins(a)}},{key:"addProducts",value:function(a){a.forEach(this.addProduct.bind(this))}},{key:"hasProduct",value:function(a){return void 0!==this.cachedAsins[a]}},{key:"hasChildProduct",value:function(a){return void 0!==this.cachedChildAsins[a]}},{key:"getProduct",value:function(a){return this.cachedAsins[a]}},{key:"getProducts",value:function(){return this.cachedAsins}},{key:"getChildProducts",value:function(){return this.cachedChildAsins}},
{key:"getChildProduct",value:function(a){return this.cachedChildAsins[a]}},{key:"cacheChildAsins",value:function(a){var c=this;a&&a.variationMatrix&&a.variationMatrix.indexedProducts&&Object.values(a.variationMatrix.indexedProducts).forEach(function(a){c.cachedChildAsins[a.asin]=a})}},{key:"clear",value:function(){this.cachedAsins={};this.cachedChildAsins={}}}]),a}());f.productsCache=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
f.shoppingCarouselStateHandler=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(5));var b=c(a(2)),e=a(225),h=a(38),k=c(a(575)),l=c(a(574)),m=c(a(28)),n=new d.default("ShoppingCarouselStateHandler");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
!0;this.stateChangeHandlers=[]}return g(a,[{key:"addStateChangeHandler",value:function(a){this.stateChangeHandlers.push(a);n.debug("Added state change handler.")}},{key:"removeStateChangeHandler",value:function(a){a=this.stateChangeHandlers.indexOf(a);this.stateChangeHandlers.splice(a,1);n.debug("Removed state change handler.")}},{key:"updateData",value:function(a){var b=a.data,c=a.s3CacheTreatment,d=a.isInternal;this.isLive=a.isLive;this.s3CacheTreatment=c;this.isInternal=d;this.broadcastAsin=b.broadcastAsin;
this.currentHash=b.hash;this.selectedSegmentIndex=0;this.productAjaxHandler=new k.default(b.productsUrl);this.reloadAjaxHandler=new k.default(b.reloadUrl);this.initializeS3CacheLoader(b);this.loadData(b);this.dispatchState();this.loadProductsAsync()}},{key:"setLive",value:function(a){this.isLive=a}},{key:"getState",value:function(a){return a&&a!==this.broadcastAsin?{initialized:!1}:{initialized:!0,segments:this.segments,selectedSegmentIndex:this.selectedSegmentIndex,highlight:this.getHighlightInformation()}}},
{key:"processNewHashAsync",value:function(a){var b=this;return a&&a!==this.currentHash?(n.debug("Carousel data has changed and will be reloaded. Previous hash was "+this.currentHash+" and it changed to "+a),this.currentHash=a,this.fetchCarouselDataAsync().then(function(a){return b.loadData(a),b.dispatchState(),b.loadProductsAsync()})):(n.debug("Carousel hash has not changed."),Promise.resolve())}},{key:"processNewHighlight",value:function(a){a!==this.highlightedSegmentItemId&&(n.debug("New item to be highlighted. Previous segmentItemId was "+
this.highlightedSegmentItemId+" and it changed to "+a),this.highlightedSegmentItemId=a,this.dispatchState())}},{key:"shouldUseS3Loader",value:function(){return this.s3CacheLoader&&(this.isLive&&"T1"===this.s3CacheTreatment||"T2"===this.s3CacheTreatment)}},{key:"loadProductsAsync",value:function(){return this.fetchProductsDataAsync().then(e.productsCache.addProducts.bind(e.productsCache)).then(this.fillPreloadedProductsFromCache.bind(this)).then(this.dispatchState.bind(this)).then(this.carouselDataVerifier.bind(this))}},
{key:"carouselDataVerifier",value:function(){var a=h.stateManager.getStore().getState();if(b.default.isWeblabEnabled(b.default.getNestedValue(a,"weblab.carouselDataErrorMetrics"))){var a=(a=this.getState())&&a.segments&&a.segments[0]&&a.segments[0].segmentItems,c=0;(a&&a.forEach(function(a){var b=a.product;"PRODUCT"!==a.type||b||(c+=1)}),0<c)&&m.default.emitMetrics({WIDGET:"carousel",EVENT_TYPE:"error",EVENT_TRIGGER_TYPE:"carouselProductDataError",INT_PAYLOAD:c})}}},{key:"fetchCarouselDataAsync",
value:function(){return this.shouldUseS3Loader()?this.s3CacheLoader.getCarouselDataAsync(this.broadcastAsin,this.currentHash):this.reloadAjaxHandler.getDataAsPromise(this.broadcastAsin)}},{key:"fetchProductsDataAsync",value:function(){var a=this.getAllAsinsMissingInCache();return 0===a.length?Promise.resolve([]):(n.debug("Fetching product data for asins",a),this.shouldUseS3Loader()?this.s3CacheLoader.getProductsDataAsync(this.broadcastAsin,this.currentHash):this.productAjaxHandler.getDataAsPromise(a))}},
{key:"loadData",value:function(a){var b=a.segments;a=a.preloadProducts;var c=void 0===a?{}:a;a=Object.keys(c);n.debug("Preloaded product data for asins from carousel data",a);a.forEach(function(a){e.productsCache.addProduct(c[a])});b.forEach(function(a){a.segmentItems.forEach(function(a){"PRODUCT"===a.type&&(a.product=e.productsCache.getProduct(a.asin))})});this.segments=b}},{key:"dispatchState",value:function(){n.debug("Dispatching state data");var a=this.getState();this.stateChangeHandlers.forEach(function(b){"function"==
typeof b&&b(a)})}},{key:"fillPreloadedProductsFromCache",value:function(){this.segments.forEach(function(a){a.segmentItems.forEach(function(a){"PRODUCT"!==a.type||a.product||(a.product=e.productsCache.getProduct(a.asin))})})}},{key:"getAllAsinsMissingInCache",value:function(){var a=[];return this.segments.forEach(function(b){b.segmentItems.forEach(function(b){"PRODUCT"!==b.type||b.product||a.push(b.asin)})}),a}},{key:"getHighlightInformation",value:function(){for(var a={firstHighlight:!1},b=0;b<this.segments.length;b+=
1)for(var c=0;c<this.segments[b].segmentItems.length;c+=1)if(this.segments[b].segmentItems[c].segmentItemId===this.highlightedSegmentItemId){a.segmentIndex=b;a.segmentItemIndex=c;a.firstHighlight=!0;break}return a}},{key:"initializeS3CacheLoader",value:function(a){if("T1"===this.s3CacheTreatment||"T2"===this.s3CacheTreatment){var c=this.isInternal&&b.default.getQueryParameter(r.location.href,"carouselDataS3CacheUrlOverride")||a.carouselDataS3CacheUrl;a=this.isInternal&&b.default.getQueryParameter(r.location.href,
"productsDataS3CacheUrlOverride")||a.productsDataS3CacheUrl;c&&a&&(this.s3CacheLoader=new l.default(c,a))}}}]),a}();f.shoppingCarouselStateHandler=new a;f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d=function(a){return"amazonlive-react-"+a+"-data"};d={PREFIX:"amazonlive-react-",POSTFIX:"-data",PLAYLIST:d("playlist"),BROADCAST_EVENTS:d("broadcast-events"),POLLER:d("poller"),ENDPOINTS:d("endpoints"),CHAT:d("chat"),MEDIACLIENT:d("mediaclient"),SHOPPING_CAROUSEL:d("shopping-carousel"),
SHOPPING_CAROUSEL_V2:d("shopping-carousel-v2"),SHOW_INGRESS:d("show-ingress"),SHOW:d("show"),STRING_TRANSLATIONS:"amazonlive-react-string-translations",WEBLAB:d("weblab"),WIDGET_OPTIONS:d("widget-options"),METRICS:d("metrics"),POLL:d("poll"),CUSTOMER_CONTEXT:"amazonlive-react-customer-context"};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.buildAjaxRequestParams=f.callAPI=void 0;var g=c(a(13)),b=a(2),e=c(a(579)),
h=c(a(127)),k=new (c(a(5)).default)("Deals AJAX");d=f.callAPI=function(a,c){var d=new Date,f=0,q=c.retry,t=c.error;delete c.error;delete c.retry;a.ajaxTimeout&&(c.timeout=a.ajaxTimeout);var u={apiName:a.name},v=function(a){var b=0<f;u.latency=(new Date).getTime()-d.getTime();e.default.recordAPIRequest(b,a,u)};!function y(){c.url=(0,b.updateQueryString)(c.url,"nocache",(new Date).getTime());var d=c.success;c.success=function(a,e,f){if("function"==typeof f.getResponseHeader&&f.getResponseHeader(h.default.CSRF_TOKEN_KEY)){var g=
f.getResponseHeader(h.default.CSRF_TOKEN_KEY);k.debug("New token: "+g);h.default.setApiToken(g)}!0;a&&a.forceRefresh?(k.debug("Reloading page for API "+u.apiName),r.location.reload()):a&&(0,b.parseBool)(a.retry)?(k.debug("Retry flag detected for API "+u.apiName),c.error()):(k.debug("Succeed API "+u.apiName),v(!0),d(a,e,f))};c.error=function(d,g){(v(!1),c.url=(0,b.updateQueryString)(c.url,"retrying",1),"timeout"===g&&e.default.recordAPITimeout(f),(f+=1)>a.maxRetries)?(g="Request failing for "+u.apiName+
".",f&&(g=g+" Retry number: "+f),k.debug(g),t(Error(g+" / "+JSON.stringify(d)))):("function"==typeof q&&q(),d=Math.pow(2,f-1)*(a.baseRetryInterval+(0,b.getRandomInteger)(-1E3,1E3)),k.debug("Failed API "+u.apiName+", retrying in "+d+" ms"),(0,b.setTimeout)(y,d))};k.debug("Hitting API "+u.apiName+" "+c.url);g.default.A.$.ajax(c)}()};a=f.buildAjaxRequestParams=function(a,b,c,d,e){a={success:c.success,error:c.error,retry:c.retry,url:a,type:"POST",dataType:"json"};return e&&(a.dataType=e),c.beforeSend&&
(a.beforeSend=c.beforeSend),a.data=d?JSON.stringify(b):b,a};f.default={callAPI:d,buildAjaxRequestParams:a}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a){return a&&a.__esModule?a:{default:a}}(a(2));f.default=function(a,b,d){var f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"T1",k=4<arguments.length&&void 0!==arguments[4]&&arguments[4],k=(a["widget-options"]||{})[d]||k,f=a.weblab&&c.default.isWeblabEnabled(a.weblab[b])&&a.weblab[b]===f;return k&&f}},
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;r.ueLogError&&r.ueLogError(c,{logLevel:a,attribution:"AmazonLiveReactAssets",message:b})};f.logFatal=function(a){return c("FATAL",a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0)};f.logError=function(a){return c("ERROR",a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0)};f.logWarning=
function(a){return c("WARN",a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0)}},function(d,f,a){function c(a){try{return eval(a),!0}catch(b){return!1}}Object.defineProperty(f,"__esModule",{value:!0});f.isBrowserSupported=function(){var d;d=c('"use strict"; () \x3d\x3e {};');var b=c('"use strict"; class dummy {};'),e="function"==typeof r.Promise,f="function"==typeof(r.Object&&r.Object.assign),k="function"==typeof r.Array.prototype.indexOf;if(d=d&&b&&e&&f&&k)a(733),a(732),a(731);return d}},
,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.triviaDependencies=void 0;d=c(a(0));var g=c(a(1)),b=c(a(12)),e=c(a(2)),h=c(a(6)),k=c(a(52)),l=c(a(5)),m=c(a(23)),n=c(a(8));a=c(a(15));f.triviaDependencies={react:d.default,"prop-types":g.default,classnames:b.default,"common-utils":e.default,"state-utils":h.default,"ajax-promise":k.default,logger:l.default,metrics:m.default,aui:n.default,config:a.default}},function(d,f,a){Object.defineProperty(f,
"__esModule",{value:!0});f.default={MESSAGE_SENT:"MESSAGE_SENT",MESSAGE_RECEIVED:"MESSAGE_RECEIVED",DUMP_MESSAGES:"DUMP_MESSAGES",MESSAGE_FILTERED:"MESSAGE_FILTERED",MESSAGE_REMOVED:"MESSAGE_REMOVED",RESET_MESSAGES:"RESET_MESSAGES",CURRENT_USER_BANNED:"CURRENT_USER_BANNED",PEN_NAME_UPDATED:"PEN_NAME_UPDATED",PEN_NAME_INVALID:"PEN_NAME_INVALID",CHATROOM_JOINED:"CHATROOM_JOINED"}},function(d,f,a){function c(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);return b.default=a,b}function g(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.chatDependencies=void 0;d=g(a(0));var b=g(a(1)),e=g(a(22)),h=c(a(3)),k=g(a(2)),l=g(a(6)),m=g(a(52)),n=g(a(5)),p=g(a(8)),q=g(a(175)),t=a(38),u=g(a(28)),v=g(a(67)),w=g(a(62)),y=c(a(116)),B=g(a(18)),A=g(a(176)),x=g(a(24)),C=g(a(156)),D=g(a(274)),F=g(a(23)),H=c(a(4));a=a(21);f.chatDependencies={react:d.default,"prop-types":b.default,"common-utils":k.default,"state-utils":l.default,
"ajax-promise":m.default,logger:n.default,"react-redux":h,aui:p.default,"dom-renderer":q.default,"react-dom":e.default,"state-manager":t.stateManager,"metrics-helper":u.default,"aui-trigger-events":v.default,"shopping-carousel-highlight-metrics":w.default,"enabled-component":y,"load-status":B.default,overlay:A.default,"broadcast-status":x.default,"chat-drawer":C.default,"messaging-events":D.default,metrics:F.default,guard:H,"metrics-emit-priority":a.metricsEmitPriority}},function(d,f,a){d=a(275);
a=a(273);a=[d.chatDependencies,a.triviaDependencies];r.AmazonLiveExports||(r.AmazonLiveExports={});for(var c in a){d=a[c];for(var g in d)r.AmazonLiveExports.hasOwnProperty(g)||(r.AmazonLiveExports[g]=d[g])}!0},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.getAllRemoteStates=f.getAllPageStates=void 0;var c=a(13),g=function(a){return a&&a.__esModule?a:{default:a}}(a(227)),b=function(a){return{key:a.replace(g.default.POSTFIX,""),data:c.A.state(g.default.PREFIX+a)||{}}},e=function(a){return{weblab:a("weblab-data"),
auiPageContext:a("aui-page-context"),widgetOptions:a("widget-options-data"),metrics:a("metrics-data"),customerContext:a("customer-context"),poll:a("poll-data"),vibesEvents:a("vibes-events-data"),endpoints:a("endpoints-data")}};f.getAllPageStates=function(){return e(b)};f.getAllRemoteStates=function(a){return e(function(b){return{key:b.replace(g.default.POSTFIX,""),data:a[g.default.PREFIX+b]||{}}})}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",
{value:!0});f.FlexFullscreenWidget=void 0;var g=c(a(0));d=c(a(1));var b=a(3),e=c(a(12)),h=c(a(30)),k=c(a(82)),l=c(a(73)),m=c(a(74)),n=c(a(2));a=f.FlexFullscreenWidget=function(a){var b=a.backgroundImageUrls,c=a.expanded,d=a.brandImageUrl,f=a.enableMobileFullscreen;a=c?null:g.default.createElement(k.default,{carouselLayout:"compact"});var n=d?g.default.createElement(l.default,{maxWidth:300,imageUrl:d}):null,d=(0,e.default)("flex-container-common",{"has-brand-image":d,"flex-container":!f,compact:!c}),
b=m.default.select(b.at1x,b.at2x),b={backgroundImage:b?"url("+b+")":""},c=(0,e.default)("flex-common",{expanded:c,compact:!c,"flex-override":!f||!c,flex:!f});return g.default.createElement("div",{className:d,style:b},n,g.default.createElement("div",{className:"aspect-ratio"},g.default.createElement("div",{className:c},g.default.createElement("div",{className:"player-container"},g.default.createElement(h.default,null)),g.default.createElement("div",{className:"carousel-wrapper"},a))))};a.propTypes=
{brandImageUrl:d.default.string,backgroundImageUrls:d.default.shape({at1x:d.default.string,at2x:d.default.string}),expanded:d.default.bool,enableMobileFullscreen:d.default.bool};a.defaultProps={brandImageUrl:"",backgroundImageUrls:{at1x:"",at2x:""},expanded:!1,enableMobileFullscreen:!1};f.default=(0,b.connect)(function(a){var b=a["widget-options"]||{};return{expanded:a.player.expanded,brandImageUrl:b.brandImageUrl,backgroundImageUrls:b.backgroundImageUrls,enableMobileFullscreen:n.default.isWeblabEnabled(n.default.getNestedValue(a,
"weblab.enableMobileFullscreen"))}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0));d=a(3);var e=c(a(1)),h=c(a(12)),k=a(2),l=c(a(30)),m=c(a(82)),n=c(a(73)),p=c(a(74)),q=
c(a(104));a=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"setRef",value:function(a){this.ref=a}},{key:"getBackgroundImageUrl",value:function(){var a=this.props.backgroundImageUrls;return(a=p.default.select(a.at1x,a.at2x))?"url("+a+")":""}},{key:"getDestinationIngress",value:function(){return this.props.isDestinationIngressEnabled&&b.default.createElement(q.default,null)}},{key:"render",
value:function(){var a=this.props,c=a.expanded,d=a.brandImageUrl,a=c?null:b.default.createElement(m.default,{carouselLayout:"compact"}),e=d?b.default.createElement(n.default,{maxWidth:300,imageUrl:d}):null,d=(0,h.default)("flex-container","flex-container-common",{"has-brand-image":d,compact:!c}),f={backgroundImage:this.getBackgroundImageUrl()},c=(0,h.default)("flex","flex-common","flex-override",{expanded:c,compact:!c});return b.default.createElement("div",{className:d,style:f},e,b.default.createElement("div",
{className:"aspect-ratio"},b.default.createElement("div",{className:c,ref:this.setRef.bind(this)},b.default.createElement("div",{className:"player-container"},b.default.createElement(l.default,null)),b.default.createElement("div",{className:"carousel-wrapper"},a))),b.default.createElement(q.default,null))}}]),c}();a.propTypes={brandImageUrl:e.default.string,backgroundImageUrls:e.default.shape({at1x:e.default.string,at2x:e.default.string}),expanded:e.default.bool,isDestinationIngressEnabled:e.default.bool};
a.defaultProps={brandImageUrl:"",backgroundImageUrls:{at1x:"",at2x:""},expanded:!1,isDestinationIngressEnabled:!0};f.default=(0,d.connect)(function(a){var b=a["widget-options"]||{};return{expanded:a.player.expanded,brandImageUrl:b.brandImageUrl,backgroundImageUrls:b.backgroundImageUrls,isDestinationIngressEnabled:!1!==b.enableDestinationIngress&&(0,k.isWeblabEnabled)(a.weblab.enableDestinationIngress)}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0)),e=c(a(155)),h=c(a(30)),k=c(a(25));d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.size.width=414,a.size.height=125,a.maxScale=1,a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default),g(c,[{key:"render",value:function(){var a=this.style;return a.transformOrigin=
a["transform-origin"],delete a["transform-origin"],b.default.createElement("div",{className:"amzlv-ad-details",style:a,ref:this.setDomRef},b.default.createElement("div",{className:"amzlv-ad-details-player-container"},b.default.createElement(h.default,null)),b.default.createElement("div",{className:"amzlv-ad-details-carousel-container"},k.default.getShoppingCarouselWidget()))}}]),c}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",
{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0)),e=c(a(155)),h=c(a(30)),k=c(a(25));d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.size.height=250,a.size.width=300,a.maxScale=2,a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default),g(c,[{key:"render",value:function(){var a=this.style;return a.transformOrigin=
a["transform-origin"],delete a["transform-origin"],b.default.createElement("div",{className:"amzlv-ad-gateway",style:a,ref:this.setDomRef},b.default.createElement("div",{className:"amzlv-ad-gateway-player-container"},b.default.createElement(h.default,null)),b.default.createElement("div",{className:"amzlv-ad-gateway-carousel-container"},k.default.getShoppingCarouselWidget()))}},{key:"transformOrigin",get:function(){return"top left"}}]),c}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?
a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.AdMiniWidget=void 0;var g=c(a(0));d=c(a(1));var b=a(3),e=c(a(12)),h=a(61),k=c(a(2)),l=c(a(25));a=f.AdMiniWidget=function(a){var b=a.shouldShowChatInPlayer;a=a.playerExpanded;return g.default.createElement("div",{className:"ad-mini"},g.default.createElement("div",{className:(0,e.default)("player-container",{expanded:a,collapsed:!a})},l.default.getPlayerComponent(b)),l.default.getShoppingCarouselWidget())};a.propTypes={playerExpanded:d.default.bool,
shouldShowChatInPlayer:d.default.bool};a.defaultProps={shouldShowChatInPlayer:!1,playerExpanded:!1};f.default=(0,b.connect)(function(a){var b=k.default.isWeblabEnabled(k.default.getNestedValue(a,"weblab.enableIframeFullscreen")),c=k.default.getNestedValue(a,"player.expanded");a=(0,h.isChatEnabled)(a);return{playerExpanded:c,shouldShowChatInPlayer:b&&c&&a}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.AdDetailsWidget=void 0;
var g=c(a(0));d=c(a(1));var b=a(3),e=c(a(12)),h=a(61),k=c(a(2)),l=c(a(25));a=f.AdDetailsWidget=function(a){var b=a.shouldShowChatInPlayer;a=a.playerExpanded;return g.default.createElement("div",{className:"amzlv-ad-details"},g.default.createElement("div",{className:(0,e.default)("amzlv-ad-details-player-container",{expanded:a,collapsed:!a})},l.default.getPlayerComponent(b)),g.default.createElement("div",{className:"amzlv-ad-details-carousel-container"},l.default.getShoppingCarouselWidget()))};a.propTypes=
{playerExpanded:d.default.bool,shouldShowChatInPlayer:d.default.bool};a.defaultProps={playerExpanded:!1,shouldShowChatInPlayer:!1};f.default=(0,b.connect)(function(a){var b=k.default.isWeblabEnabled(k.default.getNestedValue(a,"weblab.enableIframeFullscreen")),c=k.default.getNestedValue(a,"player.expanded");a=(0,h.isChatEnabled)(a);return{playerExpanded:c,shouldShowChatInPlayer:b&&c&&a}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0)),e=c(a(9)),h=c(a(30)),k=c(a(25)),l=c(a(156)),m=c(a(6)),n=a(4);d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={device:a.device},a.setBrandTile=a.setBrandTile.bind(a),a.updateResize=(0,n.guardErrorWrapper)(a.updateResize.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}(c,b.default.Component),g(c,[{key:"componentDidMount",value:function(){this.updateResize();r.addEventListener("resize",this.updateResize)}},{key:"componentWillUnmount",value:function(){r.removeEventListener("resize",this.updateResize)}},{key:"getPlayerComponent",value:function(){var a={};"desktop"===this.state.device&&(a=[],a.push({content:k.default.getChatWidget(),containerCss:{top:"0",bottom:"0",width:"355px"}}),a={underControlPanelConfig:a});return b.default.createElement("div",{className:"al-brand-tile-player-container"},
b.default.createElement(h.default,a))}},{key:"getCarouselComponent",value:function(){return b.default.createElement("div",{className:"mobile"===this.state.device?"al-brand-tile-carousel-container":"al-brand-tile-desktop-carousel-container"},k.default.getShoppingCarouselWidget())}},{key:"getChatComponent",value:function(){if("desktop"===this.state.device)return b.default.createElement("div",null);var a={open:e.default.translate("amazonlive-portal-chat-show-less","show less"),closed:e.default.translate("amazonlive-portal-chat-show-more",
"show more")};return b.default.createElement(l.default,{text:a},b.default.createElement("div",{className:"al-brand-tile-chat-container"},k.default.getChatWidget(!0)))}},{key:"setBrandTile",value:function(a){this.brandTile=a}},{key:"updateResize",value:function(){var a=this.device;this.state.stateDevice!==a&&this.setState({device:a})}},{key:"render",value:function(){var a=this.getPlayerComponent(),c=this.getCarouselComponent(),d=this.getChatComponent();return b.default.createElement("div",{className:"al-brand-tile",
ref:this.setBrandTile},b.default.createElement("div",{className:"al-brand-tile-content"},a,c,d))}},{key:"device",get:function(){return m.default.isDeviceMobile()?"mobile":"desktop"}}]),c}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.WrappedTileWidget=void 0;var g=c(a(0)),b=c(a(1));d=a(3);var e=c(a(18)),h=c(a(284));a={ready:b.default.bool};b=f.WrappedTileWidget=function(a){return a.ready?g.default.createElement(h.default,
a):g.default.createElement("div",null)};b.propTypes=a;b.defaultProps={ready:void 0};d=(0,d.connect)(function(a){return{ready:a.playlist&&a.playlist.loadStatus===e.default.SUCCESS}})(b);f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.FlexTitleLink=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,
e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=a(8),h=a(23),k=a(4);a=f.FlexTitleLink=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;var b;b=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!=typeof b&&"function"!=typeof b?this:b;return b.navigate=b.navigate.bind(b),b.onClick=
(0,k.guardErrorWrapper)(a.getOnClickMetricsHandler(b.navigate,{EVENT_TRIGGER_TYPE:"titleLink"}).bind(b)),b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"navigate",value:function(){r.location.href=
this.props.url}},{key:"render",value:function(){var a=this.props;return b.default.createElement("div",{className:"title-link",onClick:this.onClick},b.default.createElement(e.Link,{url:a.url},a.text))}}]),c}();a.propTypes={url:d.default.string.isRequired,text:d.default.string.isRequired,getOnClickMetricsHandler:d.default.func};a.defaultProps={getOnClickMetricsHandler:function(){return function(){}}};f.default=(0,h.enableSushiMetrics)("flexTitleLink")(a)},function(d,f,a){function c(a){return a&&a.__esModule?
a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0)),b=a(8),e=c(a(286));a=function(a){var c=a.linkUrl,d=a.linkText;return g.default.createElement("div",{className:"amzlv-banner-title"},g.default.createElement(b.Text,{cssClass:"amzlv-banner-title-text"},a.title),c&&d&&g.default.createElement(e.default,{url:c,text:d}))};a.propTypes={title:d.default.string.isRequired,linkUrl:d.default.string,linkText:d.default.string};a.defaultProps={linkUrl:"",linkText:""};f.default=
a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}Object.defineProperty(f,"__esModule",{value:!0});var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,
c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=c(a(12)),k=c(a(25)),l=c(a(30)),m=c(a(157)),n=c(a(73)),p=c(a(287)),q=c(a(74));a={ready:d.default.bool.isRequired,title:d.default.string,showChat:d.default.bool,isChatEnabled:d.default.bool,isChatEnabledInExpandedView:d.default.bool,playerExpanded:d.default.bool,enableSkeletonLoading:d.default.bool,brandImageUrl:d.default.string,backgroundImageUrls:d.default.shape({at1x:d.default.string,at2x:d.default.string}),titleLinkUrl:d.default.string,titleLinkText:d.default.string};
d=function(a){function c(){var a,b,d;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;for(var f=arguments.length,p=Array(f),n=0;n<f;n++)p[n]=arguments[n];return b=d=g(this,(a=c.__proto__||Object.getPrototypeOf(c)).call.apply(a,[this].concat(p))),d.getCarouselComponent=function(){return e.default.createElement("div",{className:"amzlv-banner-carousel-container",key:"amzlv-banner-carousel-container"},k.default.getShoppingCarouselWidget())},g(d,b)}return function(a,
b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.PureComponent),b(c,[{key:"getPlayerComponent",value:function(){var a=void 0;return this.shouldShowChat()&&(a=[]).push({content:k.default.getChatWidget(),containerCss:{top:"0",bottom:"0",
width:"355px","-webkit-mask-image":"linear-gradient(to top, #FFFFFF 0%, #FFFFFF 80%, transparent 95%, transparent 100%)","mask-image":"linear-gradient(to top, #FFFFFF 0%, #FFFFFF 80%, transparent 95%, transparent 100%)"}}),e.default.createElement("div",{className:"amzlv-banner-player-container",key:"amzlv-banner-player-container"},e.default.createElement(l.default,{underControlPanelConfig:a}))}},{key:"getChatComponent",value:function(){return e.default.createElement("div",{className:"amzlv-banner-chat-container "+
this.hideChatComponentClassname,key:"amzlv-banner-chat-container"},k.default.getChatWidget())}},{key:"getBackgroundImageUrl",value:function(){var a=this.props.backgroundImageUrls;return q.default.select(a.at1x,a.at2x)}},{key:"shouldShowChat",value:function(){var a=this.props,b=a.isChatEnabled,c=a.isChatEnabledInExpandedView;return a.playerExpanded&&(b||c)}},{key:"render",value:function(){var a=this.props,b=a.enableSkeletonLoading,c=a.brandImageUrl,d=a.title,f=a.titleLinkText,g=a.titleLinkUrl,a=a.ready,
l={},g=g?encodeURI(r.location.origin+g):void 0,q=this.getBackgroundImageUrl();return q&&(l.backgroundImage="url("+q+")"),e.default.createElement("div",{className:(0,h.default)("amzlv-flex-banner","al-flex-banner-vertical-carousel",{"skeleton-loading":!a&&b,"has-brand-image":c,"has-title":d.trim()}),style:l},d&&e.default.createElement(p.default,{title:d,linkText:f,linkUrl:g}),e.default.createElement(m.default,{key:"amazonlive-banner-widget"},c&&e.default.createElement(n.default,{maxWidth:300,imageUrl:c}),
this.shouldShowChat()&&this.getChatComponent(),this.getPlayerComponent(),this.getCarouselComponent()))}},{key:"hideChatComponentClassname",get:function(){return this.props.showChat?"":"hide"}}]),c}();d.propTypes=a;d.defaultProps={title:"",showChat:!1,isChatEnabled:!1,isChatEnabledInExpandedView:!1,playerExpanded:!1,enableSkeletonLoading:!1,brandImageUrl:"",backgroundImageUrls:{at1x:"",at2x:""},titleLinkUrl:"",titleLinkText:""};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}
Object.defineProperty(f,"__esModule",{value:!0});d=a(3);var g=c(a(288)),b=c(a(18)),e=c(a(2)),h=a(61),k=c(a(75));a=(0,d.connect)(function(a){var c=a.playlist.data,d=a.weblab&&e.default.isWeblabEnabled(a.weblab.enableSkeletonLoading);if(a.playlist.loadStatus!==b.default.SUCCESS||a["string-translations"].loadStatus!==b.default.SUCCESS||void 0===c.playlist||0>=c.playlist.length)return{ready:!1,enableSkeletonLoading:d};var f=a["widget-options"]||{},g=f.title,t=(0,h.isChatEnabled)(a),u=(0,h.isChatEnabledInExpandedView)(a),
c=c.playlist[c.asinToBroadcastMap[a.currentBroadcast.asin]].isChatEnabled,v=(0,k.default)(a);return{ready:!0,title:g,titleLinkText:f.flexBannerTitleLinkText,titleLinkUrl:f.flexBannerTitleLinkUrl,isChatEnabled:t,isChatEnabledInExpandedView:u,brandImageUrl:f.brandImageUrl,backgroundImageUrls:f.backgroundImageUrls,isAskQuestionEnabled:v,showChat:c,playerExpanded:a.player&&a.player.expanded,enableSkeletonLoading:d}})(g.default);f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});
var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return c(a,null,[{key:"get2xDPIMediaQuery",value:function(){return r.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)")}}]),
a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(74)),h=c(a(25)),k=c(a(30)),l=c(a(157)),m=c(a(73));a={brandImageUrl:d.default.string,backgroundImageUrls:d.default.shape({at1x:d.default.string.isRequired,
at2x:d.default.string}),className:d.default.string};d=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"getBackgroundImageUrl",value:function(){var a=this.props.backgroundImageUrls;return e.default.select(a.at1x,a.at2x)}},{key:"getStyle",value:function(){return{backgroundImage:"url("+this.getBackgroundImageUrl()+")",backgroundSize:"cover"}}},{key:"getBrandComponent",value:function(){return b.default.createElement("div",
{className:"amzlv-banner-branding-container"},this.props.brandImageUrl&&b.default.createElement(m.default,{maxWidth:102,imageUrl:this.props.brandImageUrl}))}},{key:"getPlayerComponent",value:function(){return b.default.createElement("div",{className:"amzlv-banner-player-container"},b.default.createElement(k.default,null))}},{key:"getCarouselComponent",value:function(){return b.default.createElement("div",{className:"amzlv-banner-carousel-container"},h.default.getShoppingCarouselWidget())}},{key:"render",
value:function(){var a=this.getStyle(),c=this.getBrandComponent(),d=this.getPlayerComponent(),e=this.getCarouselComponent();return b.default.createElement("div",{className:"amzlv-hero-banner "+this.props.className,style:a},b.default.createElement(l.default,null,c,d,e))}}]),c}();d.propTypes=a;d.defaultProps={brandImageUrl:void 0,backgroundImageUrls:void 0,className:void 0};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
var g=c(a(0));d=a(3);var b=c(a(291)),e={at1x:""},h={className:"al-hero-banner-vertical-carousel"},k={className:"al-hero-banner-one-product-carousel"};a=(0,d.connect)(function(a){a=a["widget-options"]||{};var b="oneProduct"===(a.carousel||{}).layout?k:h;return{brandImageUrl:a.brandImageUrl||"",backgroundImageUrls:a.backgroundImageUrls||e,className:b&&b.className}})(function(a){return g.default.createElement(b.default,a)});f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});
var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,d,f){return d&&a(c.prototype,d),f&&a(c,f),c}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(0));d=function(a){function d(a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");a=(d.__proto__||Object.getPrototypeOf(d)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(d,g.default.Component),c(d,[{key:"render",value:function(){return g.default.createElement("div",{className:"amznlv-react-card"},
this.props.children)}}]),d}();d.propTypes={};d.defaultProps={};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0)),b=(c(a(13)),c(a(8)),c(a(2)),c(a(293))),e=c(a(25));f.default=function(a){return g.default.createElement("div",{className:"amazonlive-react-carousel-page"},g.default.createElement(b.default,null,e.default.getShoppingCarouselWidget()))}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}
Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0)),b=c(a(64));f.default=function(a){return g.default.createElement("div",{className:"amazonlive-react-embedded-page"},g.default.createElement(b.default,null))}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0)),b=c(a(64));f.default=function(a){return g.default.createElement("div",{className:"amazonlive-react-show-page"},g.default.createElement(b.default,null))}},
function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0)),b=c(a(64));f.default=function(){return g.default.createElement(b.default,null)}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ShowBackgroundWidget=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(1)),e=c(a(0));d=a(3);var h=c(a(9)),k=c(a(8)),l=c(a(18));a={showData:b.default.object};b=f.ShowBackgroundWidget=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=
typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.default.Component),g(b,[{key:"render",value:function(){return this.props.isReady?e.default.createElement("div",{className:"amazonlive-react-show-empty"},
e.default.createElement(k.default.GridRow,{cssClass:"amazonlive-react-show-empty-text",textSize:"medium",spacing:"medium"},this.getMessage())):e.default.createElement("div",null)}},{key:"getMessage",value:function(){return(h.default.translate("amazon-live-channel-no-stream-message")||"No streams by {1} are available").replace("{1}",this.props.showData.title)}}]),b}();b.propTypes=a;f.default=(0,d.connect)(function(a){return{isReady:a.show.data&&a.show.loadStatus===l.default.SUCCESS,showData:a.show.data}})(b)},
function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(12)),h=c(a(30)),k=c(a(25));a=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"getPlayerComponent",value:function(){var a={},c=this.props,d=c.isChatEnabledInExpandedView;if(c.isChatEnabled||d)a=[],a.push({content:k.default.getChatWidget(),containerCss:{top:"0",bottom:"0",width:"355px","-webkit-mask-image":"linear-gradient(to top, #FFFFFF 0%, #FFFFFF 80%, transparent 95%, transparent 100%)","mask-image":"linear-gradient(to top, #FFFFFF 0%, #FFFFFF 80%, transparent 95%, transparent 100%)"}}),a={underControlPanelConfig:a};return b.default.createElement(h.default,
a)}},{key:"getCarouselComponent",value:function(){if(this.props.isCarouselEnabled)return k.default.getShoppingCarouselWidget()}},{key:"render",value:function(){var a=this.props,c=a.ready,a=a.enableSkeletonLoading,c=(0,e.default)("amazonlive-react-lightbox",{loading:!c,"skeleton-loading":!c&&a}),a=this.getPlayerComponent(),d=this.getCarouselComponent();return b.default.createElement("div",{className:c},a,d)}}]),c}();a.propTypes={isChatEnabled:d.default.bool,isChatEnabledInExpandedView:d.default.bool,
isCarouselEnabled:d.default.bool,ready:d.default.bool.isRequired,enableSkeletonLoading:d.default.bool};a.defaultProps={isChatEnabled:!0,isChatEnabledInExpandedView:!1,isCarouselEnabled:!0,enableSkeletonLoading:!1};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||
"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(f,"__esModule",{value:!0});f.SubscribeWidget=f.SubscribeInternalWidget=void 0;var h=function(){function a(b,c){for(var d=
0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var k=c(a(0)),l=a(3),m=c(a(9)),n=c(a(2)),p=c(a(87)),q=a(4),t=f.SubscribeInternalWidget=function(a){function c(a){g(this,c);a=b(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return a.clickSubscribeButton=(0,q.guardErrorWrapper)(a.clickSubscribeButton.bind(a)),a}return e(c,
k.default.Component),h(c,[{key:"componentDidMount",value:function(){r.P.load.js("https://www.amazon.com/follow/follow_button.js")}},{key:"isSubscribed",value:function(){return document.getElementById("amazonlive-subscribe-button").getElementsByClassName("pr-fb-following").length}},{key:"clickSubscribeButton",value:function(){this.isSubscribed()&&this.showOverlay()}},{key:"showOverlay",value:function(){var a=this,b=m.default.translate("amazonlive-portal-subscribe-overlay-message","Receive notifications when livestreams by this brand begin").replace("{1}",
this.props.showTitle);n.default.isIOSDevice()&&z.when("mash").execute(function(c){cordova.require("cordova/exec")(function(){p.default.emitSubscribePushNotificationSignup(a.props.broadcastId,"success")},function(){p.default.emitSubscribePushNotificationSignup(a.props.broadcastId,"failure")},"PushNotificationsIOS","invokePushNotificationInterstitial",[b,"","",["COMMUNITY:community"]])})}},{key:"render",value:function(){return k.default.createElement("div",{className:"amazonlive-subscribe-button",id:"amazonlive-subscribe-button",
onClick:this.clickSubscribeButton},k.default.createElement("div",{className:"amazon-follow","data-type":this.props.followEntityType,"data-ref":"al_sw_f_15_12","data-entity-id":this.props.followEntityId,"data-fade-duration":1,"data-tooltip":"hide","data-suggestion-tooltip":"hide"}))}}]),c}();a=f.SubscribeWidget=function(a){function c(){return g(this,c),b(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return e(c,k.default.Component),h(c,[{key:"render",value:function(){return this.props.followEntityId&&
this.props.followEntityType?k.default.createElement(t,this.props):k.default.createElement("div",null)}}]),c}();a.propTypes={followEntityId:d.default.string,followEntityType:d.default.string,showTitle:d.default.string};f.default=(0,l.connect)(function(a){return{followEntityId:a.show.data.followEntityId,followEntityType:a.show.data.followEntityType,broadcastId:a.chat.data.broadcastId}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
f.Banner=void 0;var g=c(a(1)),b=c(a(0));d=a(3);var e=c(a(2)),h=c(a(300)),k=c(a(158));a={showTitle:g.default.string.isRequired,isSubscribeEnabled:g.default.bool.isRequired};g=f.Banner=function(a){return b.default.createElement("div",{className:"amazonlive-banner"},b.default.createElement("div",{className:"amazonlive-banner-show-title"},b.default.createElement("span",null,a.showTitle)),!0===a.isSubscribeEnabled&&b.default.createElement(h.default,{showTitle:a.showTitle}))};g.propTypes=a;d=(0,d.connect)(function(a){var b=
e.default.getNestedValue(a,"widget-options.bannerState")===k.default.FOLLOW_BANNER,c=e.default.getNestedValue(a,"widget-options.title");return void 0===c&&(c=b?a.show.data.title:""),{isSubscribeEnabled:b,showTitle:c}})(g);f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.enableSushiMetricsArgs=f.mapEmitMetricsToProps=void 0;var c=function(a){return a&&a.__esModule?a:{default:a}}(a(62)),g=a(21);d=f.mapEmitMetricsToProps=function(a){return{emitVideoPlayMetric:function(c){a({EVENT_TYPE:"videoPlay",
INT_PAYLOAD:c||"",STRING_PAYLOAD:"ttff"},g.metricsEmitPriority.HIGH)},emitVodPlayInViewportMetrics:function(){a({EVENT_TYPE:"vodPlayInViewport"},g.metricsEmitPriority.HIGH)},emitRequestPlayMetric:function(){a({EVENT_TYPE:"requestPlay"},g.metricsEmitPriority.LOW)},emitPlayerUnsupportedBrowserMetric:function(){a({EVENT_TYPE:"unsupportedBrowser"},g.metricsEmitPriority.MEDIUM)},emitVideoErrorMetric:function(c){a({EVENT_TYPE:"videoError",STRING_PAYLOAD:c},g.metricsEmitPriority.MEDIUM)},emitMuteMetrics:function(c){a({EVENT_TYPE:"mute",
EVENT_TRIGGER_TYPE:c},g.metricsEmitPriority.MEDIUM)},emitUnmuteMetrics:function(c){a({EVENT_TYPE:"unmute",EVENT_TRIGGER_TYPE:c},g.metricsEmitPriority.HIGH)},emitViewDurationMetrics:function(c){a({EVENT_TYPE:"duration",INT_PAYLOAD:Math.ceil(c)},g.metricsEmitPriority.HIGH)}}};f.enableSushiMetricsArgs=["vodPlayer",function(a){var d=a.id;a=a.videoContentId;return{PROMOTED_ITEM_ID:c.default.getHightlightedAsin(),BROADCAST_ID:d,ASIN:a}},d,{autoImpression:!1}]},function(d,f,a){function c(a){return a&&a.__esModule?
a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.VideojsPlayer=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(1)),e=c(a(0)),h=a(3),k=c(a(13)),l=a(15),m=c(a(5)),n=c(a(169)),p=c(a(164)),q=c(a(163)),t=a(6),u=c(a(24));d=a(302);var v=a(23),w=a(170),y=c(w),B=c(a(86)),A=c(a(159)),
x=a(84),C=a(2),D=a(4),F=a(14),H=c(a(161)),E=c(a(162)),G=a(160);a={id:b.default.string.isRequired,videoContentId:b.default.string.isRequired,videoSourceUrl:b.default.string.isRequired,slateImageUrl:b.default.string.isRequired,title:b.default.string,broadcastStatus:b.default.oneOf(Object.keys(u.default)),startTime:b.default.number,autoPlay:b.default.bool,muted:b.default.bool,enableMShopPausePlayerHandler:b.default.bool,channelTitle:b.default.string,isVod:b.default.bool,emitPlayerUnsupportedBrowserMetric:b.default.func.isRequired,
emitVideoErrorMetric:b.default.func.isRequired,emitRequestPlayMetric:b.default.func.isRequired,emitVideoPlayMetric:b.default.func.isRequired,emitViewDurationMetrics:b.default.func.isRequired,emitMuteMetrics:b.default.func.isRequired,emitUnmuteMetrics:b.default.func.isRequired,setPlayerTimeOffsetMS:b.default.func.isRequired,emitVodPlayInViewportMetrics:b.default.func.isRequired,enableAccurateVodWatchDuration:b.default.bool,setPlayerMutedState:b.default.func.isRequired,isVodViewportPlayer:b.default.bool,
isVodViewportMetrics:b.default.bool,enableExpandablePlayer:b.default.bool,enableMobileFullscreen:b.default.bool,setPlayerExpanded:b.default.func,enableIframeFullscreen:b.default.bool,patchVideoJs:b.default.string,patchVideoJsEvents:b.default.string,patchTwitchTech:b.default.string,upgradeSvsPlayer:b.default.bool};var I=-1,b=f.VideojsPlayer=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;var c;c=(b.__proto__||Object.getPrototypeOf(b)).call(this,
a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!=typeof c&&"function"!=typeof c?this:c;return c.setState=c.setState.bind(c),c.playerId=I+=1,c.playerDomId="amznlv-react-videojs-player-"+c.playerId,c.isPlayerInstanceReady=!1,c.logger=new m.default("VideojsPlayer: "+c.playerId),c.playCountedFlag=!1,c.wrappedPlayButtonPlay=(0,D.guardErrorWrapper)(c.wrappedPlayButtonPlay.bind(c)),c.wrappedPlayButtonStop=(0,D.guardErrorWrapper)(c.wrappedPlayButtonStop.bind(c)),
c.play=(0,D.guardErrorWrapper)(c.play.bind(c)),c.stop=(0,D.guardErrorWrapper)(c.stop.bind(c)),c.onUnload=(0,D.guardErrorWrapper)(c.onUnload.bind(c)),c.addUnloadHandler=(0,D.guardErrorWrapper)(c.addUnloadHandler.bind(c)),c.onExpandExpandableContainer=c.onExpandExpandableContainer.bind(c),c.onCollapseExpandableContainer=c.onCollapseExpandableContainer.bind(c),c.setExpandableContainerRef=c.setExpandableContainerRef.bind(c),c.setExpandedPlayerDimension=c.setExpandedPlayerDimension.bind(c),c.expandPlayer=
(0,D.guardErrorWrapper)(c.expandPlayer.bind(c)),c.collapsePlayer=(0,D.guardErrorWrapper)(c.collapsePlayer.bind(c)),c.lastPlayerTimeOffsetMS=0,c.showControlOverlay=(0,D.guardErrorWrapper)(c.showControlOverlay.bind(c)),c.hideControlOverlay=(0,D.guardErrorWrapper)(c.hideControlOverlay.bind(c)),c.videoJsUtils=new y.default({patchVideoJs:"T2"===a.patchVideoJs||"T3"===a.patchVideoJs,patchVideoJsEvents:a.patchVideoJsEvents,upgradeSvsPlayer:a.upgradeSvsPlayer}),c.videoJsUtils.downloadTwitchTech(),c.state=
{twitchTechInitialized:!1,playing:!1,muted:c.props.muted,isControlOverlayActive:!1,ended:!1,mouseOnPlayButton:!1,loading:!1,expanded:!1},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.default.Component),g(b,[{key:"componentDidMount",
value:function(){var a=this;Promise.all([this.videoJsUtils.brilaReady(),this.videoJsUtils.videoJsWithTwitchReady()]).then(function(b){if(!Array.isArray(b))if(Symbol.iterator in Object(b)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,p=b[Symbol.iterator]();!(d=(g=p.next()).done)&&(c.push(g.value),1!==c.length);d=!0);}catch(n){e=!0,f=n}finally{try{!d&&p.return&&p.return()}finally{if(e)throw f;}}b=c}else throw new TypeError("Invalid attempt to destructure non-iterable instance");return a.initWithBrila(b[0])}).catch(D.guardRejection);
this.initializeViewportBoundsHandler();this.registerControlOverlayEvents();this.showControlOverlay();k.default.$(r).bind("resize",this.setExpandedPlayerDimension)}},{key:"componentWillReceiveProps",value:function(){this.state.playing||this.showControlOverlay()}},{key:"componentDidUpdate",value:function(a,b){!b.expanded&&this.state.expanded&&this.setExpandedPlayerDimension()}},{key:"componentWillUnmount",value:function(){if(this.playerInstance){this.playerInstance.off();var a=this.playerInstance&&
this.playerInstance.brilaMetrics();a&&"function"==typeof a.dispose&&a.dispose();this.isPlayerInstanceReady&&this.playerInstance.dispose()}this.visibilityHandler&&this.visibilityHandler.unregister();this.stopViewportTimer();this.stopViewportBoundsHandler();k.default.$(r).unbind("resize",this.setExpandedPlayerDimension);this.props.enableAccurateVodWatchDuration&&this.onUnload()}},{key:"onUnload",value:function(){this.playerInstance&&(this.playerInstance.trigger("pause"),this.props.emitViewDurationMetrics(this.getViewDuration()),
this.brilaOnBeforeUnload&&(this.brilaOnBeforeUnload(),r.onbeforeunload=this.brilaOnBeforeUnload))}},{key:"onExpandChange",value:function(a){var b=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],c=this.state.expanded,d=this.props.setPlayerExpanded,e=this.playerId,f=this.setState;(0,G.onExpandChange)({expanded:c,setPlayerExpanded:d,shouldExpand:a,emitMetric:b,id:e,setState:f})}},{key:"onExpandExpandableContainer",value:function(){this.onExpandChange(!0)}},{key:"onCollapseExpandableContainer",
value:function(){this.onExpandChange(!1)}},{key:"setExpandedPlayerDimension",value:function(){(0,G.setExpandablePlayerDimension)(this.state.expanded,this.props.enableIframeFullscreen,this.setState)}},{key:"setExpandableContainerRef",value:function(a){this.expandableContainer=a&&a.getWrappedInstance()}},{key:"getBrilaPluginConfigs",value:function(){var a={controlBar:{fullscreenToggle:!1},loadingSpinner:!1,controls:!0,playsinline:!0,muted:this.props.muted,autoplay:this.props.autoPlay};return a.techOrder=
[y.default.TWITCH_TECH_NAME],{player:a,hotkeys:{volumeStep:.2,seekStep:10,skipInitialFocus:!0,enableInactiveFocus:!1}}}},{key:"getVSEConfig",value:function(){return{contentId:this.props.videoContentId,foresterMetadataParams:{client:"AmazonLive",method:"PostStream",requestId:r.ue_id||"",marketplaceId:r.ue_mid||"",session:r.ue_sid||""},videoAds:{isEngineEnabled:!1}}}},{key:"getViewDuration",value:function(){var a=this.playerInstance&&this.playerInstance.brilaMetrics();return a&&a.totalDuration||0}},
{key:"expandPlayer",value:function(){var a=this.props,b=a.enableMobileFullscreen,a=a.enableExpandablePlayer,c=this.expandableContainer,d=this.onExpandExpandableContainer;(0,G.expandPlayer)({enableMobileFullscreen:b,expandableContainer:c,onExpandExpandableContainer:d,enableExpandablePlayer:a,expanded:this.state.expanded})}},{key:"collapsePlayer",value:function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],b=this.props,c=b.enableMobileFullscreen,d=b.enableIframeFullscreen,b=b.enableExpandablePlayer,
e=this.expandableContainer,f=this.hideControlOverlay,g=this.onExpandChange;(0,G.collapsePlayer)({enableMobileFullscreen:c,enableIframeFullscreen:d,expandableContainer:e,hideControlOverlay:f,enableExpandablePlayer:b,expanded:this.state.expanded,onExpandChange:g,emitMetric:a})}},{key:"addUnloadHandler",value:function(){this.brilaOnBeforeUnload=r.onbeforeunload;r.onbeforeunload=this.onUnload}},{key:"stopViewportTimer",value:function(){this.viewportStarted&&(this.viewportStarted=!1,this.viewportMonitorAreaTimer.stop())}},
{key:"addPlayerEventListeners",value:function(){var a=this;this.playerInstance.on("error",function(){var b=a.playerInstance.error().code;4===b?a.props.emitPlayerUnsupportedBrowserMetric():a.props.emitVideoErrorMetric(b);a.stopViewportBoundsHandler();a.setState({playing:!1,loading:!1})});this.playerInstance.on("requestplay",function(){a.state.ended&&(a.playerInstance.currentTime(0),a.setState({ended:!1}),k.default.$(".amazonlive-common .vjs-poster").hide());a.requestPlayTimestamp||(a.requestPlayTimestamp=
Date.now(),a.props.emitRequestPlayMetric())});this.playerInstance.on("playing",function(){if(!a.playCountedFlag){var b=void 0;a.requestPlayTimestamp&&(b=Date.now()-a.requestPlayTimestamp);a.props.emitVideoPlayMetric(b);a.playCountedFlag=!0}a.viewportStarted||(a.initializeViewportHandler(),a.viewportMonitorAreaTimer.start(),a.viewportStarted=!0);a.setState({muted:a.playerInstance.muted()});a.setState({playing:!0,loading:!1});a.state.mouseOnPlayButton||a.hideControlOverlay()});this.playerInstance.on("timeupdate",
function(){var b=1E3*Math.floor(a.playerInstance.currentTime());b!==a.lastPlayerTimeOffsetMS&&(a.lastPlayerTimeOffsetMS=b,a.props.setPlayerTimeOffsetMS(b));.25>Math.abs(a.playerInstance.currentTime()-a.playerInstance.duration())&&(a.setState({playing:!1}),a.props.emitViewDurationMetrics(a.getViewDuration()),a.stop(),k.default.$(".amazonlive-common .vjs-poster").fadeIn(),a.setState({ended:!0}))});this.playerInstance.on("pause",function(){a.setState({playing:!1,loading:!1});a.props.isVodViewportMetrics&&
a.stopViewportTimer();a.props.emitViewDurationMetrics(a.getViewDuration());a.showControlOverlay()});this.playerInstance.on("volumechange",(0,D.guardErrorWrapper)(function(){var b=a.state.muted,c=a.playerInstance.muted(),d=null;a.state.twitchTechInitialized||(c=b,b=!b,d="video");a.setState({muted:c});a.props.setPlayerMutedState(c,a.playerInstance.volume());!b&&c&&a.props.emitMuteMetrics(d||"userClick");b&&!c&&a.props.emitUnmuteMetrics(d||"userClick")}))}},{key:"initializeViewportBoundsHandler",value:function(){var a=
this;this.props.isVodViewportPlayer&&!this.isViewportMonitored&&(this.isViewportMonitored=!0,this.viewportBoundsHandler=new A.default(this.videoDom,function(){a.wrappedPlayViewportCallback()},function(){a.wrappedStopViewportCallback()},200,200),this.viewportBoundsHandler.start())}},{key:"initializeViewportHandler",value:function(){var a=this;this.viewportMonitorAreaTimer=new B.default(this.videoDom,function(){a.props.emitVodPlayInViewportMetrics()},{targetTime:2E3})}},{key:"addTwitchEventListeners",
value:function(){var a=this,b=this.playerInstance.tech_;b.addEventListener(b.PlayerEvent.INITIALIZED,(0,D.guardErrorWrapper)(function(){a.logger.debug("Twitch Tech Initialized.");a.setState({twitchTechInitialized:!0})}))}},{key:"displayControlBar",value:function(){this.playerInstance&&this.playerInstance.userActive(!0)}},{key:"hideControlBar",value:function(){this.playerInstance&&this.playerInstance.userActive(!1)}},{key:"hideControlOverlay",value:function(){this.state.isControlOverlayActive&&this.state.playing&&
(this.setState({isControlOverlayActive:!1}),this.hideControlBar())}},{key:"initWithBrila",value:function(a){var b=this;this.logger.debug("Initialize with Brila.");this.playerInstance=a.embed(this.playerDomId,this.getVSEConfig(),this.getBrilaPluginConfigs());"T2"!==this.props.patchTwitchTech&&"T3"!==this.props.patchTwitchTech||(0,D.guardError)(w.guardTwitchTech,this.playerInstance,this.props.upgradeSvsPlayer);this.addPlayerEventListeners();this.addTwitchEventListeners();this.playerInstance.src(this.props.videoSourceUrl);
this.playerInstance.poster(this.props.slateImageUrl);this.visibilityHandler=new q.default(this,this.props.enableMShopPausePlayerHandler);this.visibilityHandler.register();this.props.enableAccurateVodWatchDuration&&this.addUnloadHandler();this.playerInstance.ready((0,D.guardErrorWrapper)(function(){b.logger.debug("Brila VideoJS VOD player is ready.");b.isPlayerInstanceReady=!0}))}},{key:"isLive",value:function(){return"LIVE"===this.props.broadcastStatus}},{key:"isPlaying",value:function(){return this.playerInstance&&
!this.playerInstance.paused()}},{key:"wrappedPlayButtonPlay",value:function(){this.stoppedByUser=!1;this.play()}},{key:"play",value:function(){this.setState({loading:!0});this.playerInstance&&this.playerInstance.play()}},{key:"registerControlOverlayEvents",value:function(){var a=this;(0,t.isDeviceMobile)()?k.default.$(this.controlActivate).click((0,D.guardErrorWrapper)(function(b){a.showControlOverlay();a.displayControlBar();b.preventDefault();b.stopPropagation()})):(k.default.$(this.controlActivate).mouseenter(this.showControlOverlay),
k.default.$(this.controlActivate).mouseleave(this.hideControlOverlay),k.default.$(".amazonlive-common .play-button-container").mouseenter((0,D.guardErrorWrapper)(function(){a.setState({mouseOnPlayButton:!0})})),k.default.$(".amazonlive-common .play-button-container").mouseleave((0,D.guardErrorWrapper)(function(){a.setState({mouseOnPlayButton:!1})})))}},{key:"showControlOverlay",value:function(){this.setState({isControlOverlayActive:!0});(0,t.isDeviceMobile)()&&(clearTimeout(this.hideControlOverlayTimeout),
this.hideControlOverlayTimeout=(0,C.setTimeout)(this.hideControlOverlay,2E3));this.displayControlBar()}},{key:"showPlayButton",value:function(){return this.state.isControlOverlayActive||!this.state.playing}},{key:"wrappedPlayButtonStop",value:function(){this.stoppedByUser=!0;this.stop()}},{key:"stop",value:function(){this.setState({loading:!0});this.playerInstance&&this.playerInstance.pause()}},{key:"wrappedPlayViewportCallback",value:function(){this.stoppedByUser||(this.stoppedByViewportMonitor=
!1,this.setState({loading:!0}),this.play())}},{key:"isPlayerMuted",value:function(){return this.state.muted||0===this.playerInstance.volume()}},{key:"wrappedStopViewportCallback",value:function(){this.isPlayerMuted()&&(0,x.isViewportVisible)()&&!this.stoppedByUser&&(this.stoppedByViewportMonitor=!0,this.stop())}},{key:"stopViewportBoundsHandler",value:function(){this.isViewportMonitored&&(this.isViewportMonitored=!1,this.viewportBoundsHandler.stop())}},{key:"renderControlOverlay",value:function(){return e.default.createElement(n.default,
{title:this.props.title,startTime:this.props.startTime,hideControlOverlay:this.hideControlOverlay,showControlOverlay:this.showControlOverlay,isActive:this.state.isControlOverlayActive,isLive:this.isLive(),broadcastStatus:this.props.broadcastStatus,channelTitle:this.props.channelTitle,isVod:this.props.isVod,expandPlayer:this.expandPlayer,collapsePlayer:this.collapsePlayer})}},{key:"renderControlOverlayActivate",value:function(){var a=this;return e.default.createElement("div",{className:"amznlv-react-player-control-activate videojs-control-activate",
ref:function(b){a.controlActivate=b}})}},{key:"renderPlayButton",value:function(){return e.default.createElement(p.default,{showButton:this.showPlayButton(),play:this.wrappedPlayButtonPlay,stop:this.wrappedPlayButtonStop,isPlaying:this.state.playing,isLoading:this.state.loading,onMouseEnter:this.showControlOverlay,isLive:this.isLive(),broadcastId:this.props.id})}},{key:"renderExpandedContent",value:function(){this.logger.debug("renderExpandedContent");var a=this.props.enableMobileFullscreen&&(0,t.isDeviceMobile)()?
"100%":this.state.expandedPlayerWidth+"px";return this.logger.debug("width: "+a),e.default.createElement(E.default,{width:a})}},{key:"render",value:function(){var a=this,b='\n          \x3cvideo id\x3d"'+this.playerDomId+'" class\x3d"video-js vjs-fill"/\x3e\n        ',c=this.state,d=c.expanded,c=c.expandedPlayerWidth;return e.default.createElement(H.default,{onExpand:this.onExpandExpandableContainer,onCollapse:this.onCollapseExpandableContainer,ref:this.setExpandableContainerRef},e.default.createElement("div",
{className:"amznlv-react-player amznlv-react-videojs-player","data-playing":this.state.playing,"data-muted":this.state.muted,style:{width:this.props.enableMobileFullscreen&&(0,t.isDeviceMobile)()||l.playerConfig.expandOnInteraction||!d?"100%":c+"px"}},e.default.createElement("div",{className:"amznlv-react-aspectratio"},!this.state.twitchTechInitialized&&e.default.createElement("div",{className:"amznlv-react-videojs-player-slate",style:{backgroundImage:"url("+this.props.slateImageUrl+")"}}),e.default.createElement("div",
{className:"amznlv-react-player-inner"},this.renderPlayButton(),this.renderControlOverlay(),this.renderControlOverlayActivate(),e.default.createElement("div",{className:"amznlv-react-player-video-area",dangerouslySetInnerHTML:{__html:b},ref:function(b){a.videoDom=b}})))),d&&this.renderExpandedContent())}}]),b}();b.propTypes=a;b.defaultProps={title:void 0,broadcastStatus:void 0,startTime:void 0,autoPlay:void 0,muted:void 0,enableMShopPausePlayerHandler:void 0,channelTitle:void 0,isVod:void 0,enableAccurateVodWatchDuration:!1,
isVodViewportPlayer:!1,isVodViewportMetrics:!1,enableExpandablePlayer:!1,enableMobileFullscreen:!1,setPlayerExpanded:function(){},enableIframeFullscreen:!1,patchVideoJs:void 0,patchVideoJsEvents:void 0,patchTwitchTech:void 0,upgradeSvsPlayer:!1};h=(0,h.connect)(function(a){return{patchVideoJs:(0,C.getNestedValue)(a,"weblab.patchVideoJs"),patchVideoJsEvents:(0,C.getNestedValue)(a,"weblab.patchVideoJsEvents"),patchTwitchTech:(0,C.getNestedValue)(a,"weblab.patchTwitchTech"),upgradeSvsPlayer:(0,C.isWeblabEnabled)((0,
C.getNestedValue)(a,"weblab.upgradeSvsPlayer"))}},function(a){return{setPlayerMutedState:function(b,c){a(b?(0,F.mute)(c):(0,F.unmute)(c))}}})(b);f.default=v.enableSushiMetrics.apply(void 0,function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}(d.enableSushiMetricsArgs))(h)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingNotificationImage=void 0;var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=
c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(0)),b=a(225),e=a(79),h=a(4),k=[255,255,255];d=f.ShoppingNotificationImage=function(a){function d(a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");!0;var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a));return c.getImage=function(a){var c={baseWidth:60,baseHeight:60,needAutoCrop:!1,borderSize:300,borderColor:k};return b.productsCache.hasProduct(a)?(c.imageUrl=b.productsCache.getProduct(a).formattedImageUrl,(0,e.getStyledImage)(c)):b.productsCache.hasChildProduct(a)?(c.imageUrl=b.productsCache.getChildProduct(a).formattedImageUrl,(0,e.getStyledImage)(c)):""},c.handleError=function(){c.setState({hasError:!0})},
c.state={hasError:!1},c.handleError=(0,h.guardErrorWrapper)(c.handleError.bind(c)),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(d,g.default.Component),c(d,[{key:"render",value:function(){var a=this.getImage(this.props.asin);
return a&&!this.state.hasError?g.default.createElement("img",{className:"amznlv-react-shopping-notification-particle",src:a.src,srcSet:a.srcSet,onError:this.handleError,style:{animationDelay:this.props.delay+"s",WebkitAnimationDelay:this.props.delay+"s",MozAnimationDelay:this.props.delay+"s"}}):g.default.createElement("div",{className:"a-loading-static-inner"})}}]),d}();d.propTypes={asin:g.default.PropTypes.string.isRequired,delay:g.default.PropTypes.number.isRequired};f.default=d},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}function g(a,b){var c={},d;for(d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingNotification=void 0;var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(0)),h=c(a(1)),k=a(3),
l=c(a(37)),m=c(a(12)),n=c(a(6)),p=c(a(50)),q=c(a(304));d=a(23);var t=a(2),u=a(4);a=f.ShoppingNotification=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;a.particleList=[];a.state={keyFrameCSS:""};var b=a.props.getOnClickMetricsHandler;
return a.getOnClickMetricsHandler=(0,u.guardErrorWrapper)(b.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"shouldComponentUpdate",value:function(a){if(this.props.vibesEvents&&a.vibesEvents){var b=
this.props,c=b.vibesEvents,b=g(b,["vibesEvents"]),d=a.vibesEvents;a=g(a,["vibesEvents"]);var e=c.events,c=(g(c,["events"]),d.events);return g(d,["events"]),!(0,l.default)(e,c)||!(0,l.default)(b,a)}return!1}},{key:"componentDidUpdate",value:function(){var a=this.keyFrameCSS;this.state.keyFrameCSS!==a&&this.setState({keyFrameCSS:a})}},{key:"startPosStyle",value:function(a){return{left:Math.floor(Math.random()*Math.floor(65))+"%",animationDelay:a+"s",WebkitAnimationDelay:a+"s",MozAnimationDelay:a+"s"}}},
{key:"renderNotificationParticle",value:function(a){var b=this,c=a.events,d=a.endTime,f=this.props.vibesConfig&&Object.keys(this.props.vibesConfig),g=this.props.vibesConfig&&this.props.vibesConfig.maxParticleCount?this.props.vibesConfig.maxParticleCount:10,n=g,m=1;c.filter(function(a){var c=p.default.parseItem(a,d),c=c.asin&&f&&-1<f.indexOf(c.eventType)&&!p.default.isFiredEventId(a.id);return c||b.props.removeVibesEvents(a.id),c}).forEach(function(a){for(var c=p.default.parseItem(a,d),f=c.delay,h=
b.props.vibesConfig&&b.props.vibesConfig[c.eventType]?b.props.vibesConfig[c.eventType]:0,k=c.asin,c=function(c){if(m>g)return"break";m++;var d=a.id+c;f+=.3;b.particleList.push({id:d,dom:e.default.createElement("div",{key:d,className:"amznlv-react-single-shopping-notification "+b.deviceTypeClassName,style:b.startPosStyle(f)},e.default.createElement(q.default,{asin:k,delay:f}))});(0,t.setTimeout)(function(){b.particleList=b.particleList.filter(function(a){return a.id!==d});c!=h-1&&0!=--n||b.props.removeVibesEvents(a.id)},
2500+1E3*f)},l=0;l<h&&"break"!==c(l);l++);});var h=[];return this.particleList.forEach(function(a){h.push(a.dom)}),h}},{key:"render",value:function(){var a=this.props.enableMetrics,b=a?this.getOnClickMetricsHandler():void 0;return e.default.createElement("div",{role:"presentation",className:(0,m.default)("amznlv-react-shopping-notification-area",{"has-metrics":a}),onClick:b},this.props.vibesEvents&&this.props.vibesEvents.events&&0<this.props.vibesEvents.events.length&&this.renderNotificationParticle(this.props.vibesEvents),
e.default.createElement("style",null,this.state.keyFrameCSS))}},{key:"keyFrameCSS",get:function(){var a=0<this.props.playerWidth?9*this.props.playerWidth/16:0;return"@keyframes amazonLiveShoppingNotificationUpDown {\n            0% { opacity: 1; }\n            70% { transform: translatey(-"+.6*a+"px); -webkit-transform: translatey(-"+.6*a+"px); -moz-transform: translatey(-"+.7*a+"px); opacity: 1; }\n            100% { transform: translatey(-"+.9*a+"px); -webkit-transform: translatey(-"+.9*a+"px); -moz-transform: translatey(-"+
.9*a+"px); opacity: 0; }\n        }"}},{key:"deviceTypeClassName",get:function(){return n.default.isDeviceMobile()?"mobile":"desktop"}}]),c}();a.propTypes={vibesEvents:h.default.object,removeVibesEvents:h.default.func,vibesConfig:h.default.object,playerWidth:h.default.number,getOnClickMetricsHandler:h.default.func.isRequired,enableMetrics:h.default.bool};a.defaultProps={vibesEvents:null,removeVibesEvents:null,vibesConfig:null,playerWidth:null,enableMetrics:!1};a=(0,k.connect)(function(a){return{enableMetrics:(0,
t.isWeblabEnabled)(a.weblab.enableShoppingNotificationMetrics)}})(a);f.default=(0,d.enableSushiMetrics)("shoppingNotification")(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ConnectedShoppingNotification=void 0;var g=c(a(0)),b=c(a(1));d=a(3);var e=a(2),h=c(a(50)),k=c(a(305)),l=a(14);a={vibesEvents:b.default.object,removeVibesEvent:b.default.func.isRequired,vibesConfig:b.default.object,playerWidth:b.default.number,isPlayerExpanded:b.default.bool,
enableShoppingNotificationAfterPlayerPlaying:b.default.bool.isRequired,enableShoppingNotification:b.default.bool,isPlayerPlaying:b.default.bool,isLive:b.default.bool,isDisplayAds:b.default.bool,enableVibesExpandableViewOnly:b.default.bool};b=f.ConnectedShoppingNotification=function(a){var b=a.vibesConfig,c=a.isPlayerPlaying,d=a.isLive,e=a.vibesEvents,f=a.removeVibesEvent,l=a.playerWidth;return h.default.shouldDisplayShoppingNotification({isVibesEnabledByWeblab:a.enableShoppingNotification,shouldRender:a.enableShoppingNotificationAfterPlayerPlaying?
c:d,vibesConfig:b,isDisplayAds:a.isDisplayAds,enableVibesExpandableViewOnly:a.enableVibesExpandableViewOnly,isPlayerExpanded:a.isPlayerExpanded})?g.default.createElement(k.default,{vibesEvents:e,removeVibesEvents:f,playerWidth:l,vibesConfig:b}):g.default.createElement("div",null)};b.propTypes=a;b.defaultProps={vibesEvents:{},vibesConfig:{},playerWidth:1,isPlayerExpanded:!1,isPlayerPlaying:!1,isLive:!1,isDisplayAds:!1,enableVibesExpandableViewOnly:!1,enableShoppingNotification:!1};f.default=(0,d.connect)(function(a){return{vibesEvents:a.weblab&&
(0,e.isWeblabEnabled)(a.weblab.showVibesMenu)&&(0,e.getNestedValue)(a,"vibes-events.data")||{},vibesConfig:a["widget-options"].vibesConfig,enableShoppingNotification:(0,e.isWeblabEnabled)(a.weblab.shoppingNotificationEvent),enableShoppingNotificationAfterPlayerPlaying:(0,e.isWeblabEnabled)((0,e.getNestedValue)(a,"weblab.enableShoppingNotificationAfterPlayerPlaying")),enableVibesExpandableViewOnly:(0,e.isWeblabEnabled)((0,e.getNestedValue)(a,"widget-options.enableVibesExpandableViewOnly")),isDisplayAds:(0,
e.isWeblabEnabled)((0,e.getNestedValue)(a,"widget-options.displayAds"))}},function(a){return{removeVibesEvent:function(b){b=(0,l.removeVibesEvents)(b);a(b)}}})(b)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.PollWidget=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,
c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=a(0),e=c(b);d=c(a(1));var h=a(3),k=a(2),l=a(14),m=c(a(77)),n=c(a(43));a=f.PollWidget=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={},a}return function(a,b){if("function"!=
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.Component),g(c,[{key:"componentDidMount",value:function(){this.loadTraviaComponent()}},{key:"componentDidUpdate",value:function(){this.loadTraviaComponent()}},{key:"loadTraviaComponent",value:function(){var a=this;
!this.state.TriviaComponent&&this.shouldRenderPoll()&&m.default.loadAuiComponent("amazonlive-need-trivia","amazonlive-trivia").then(function(b){a.setState({TriviaComponent:b})})}},{key:"shouldRenderPoll",value:function(){return this.props.poll.data&&this.props.poll.data.id&&this.props.playerPlaying}},{key:"render",value:function(){if(!this.state.TriviaComponent||!this.shouldRenderPoll())return e.default.createElement("div",null);var a=this.props,b=a.poll,c=b.data,d=a.followMeDocked;return e.default.createElement(this.state.TriviaComponent,
{id:c.id,type:"poll",poll:c,collapsed:b.collapsed||d,voteUrl:b.voteUrl,getVoteUrl:b.getVoteUrl,treatment:a.treatment,withPageLoad:b.withPageLoad,customerChoices:b.customerChoices,collapsePoll:a.collapsePoll,setCustomerChoice:a.setCustomerChoice,playerExpanded:a.playerExpanded})}}]),c}();a.propTypes={poll:d.default.object,collapsePoll:d.default.func.isRequired,playerPlaying:d.default.bool,playerExpanded:d.default.bool,followMeDocked:d.default.bool.isRequired,treatment:d.default.string.isRequired,setCustomerChoice:d.default.func.isRequired};
a.defaultProps={poll:{},playerPlaying:!1,playerExpanded:!1};f.default=(0,h.connect)(function(a){return{poll:a.poll,playerPlaying:(0,k.getNestedValue)(a,"player.playing"),playerExpanded:(0,k.getNestedValue)(a,"player.expanded"),followMeDocked:(0,k.getNestedValue)(a,"followMe.dockState")===n.default.DOCKED,treatment:(0,k.getNestedValue)(a,"weblab.enablePoll")}},function(a){return{collapsePoll:function(){var b=(0,l.collapsePoll)();a(b)},setCustomerChoice:function(b,c){b=(0,l.setCustomerChoice)(b,c);
a(b)}}})(a)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d=function(a){return a&&a.__esModule?a:{default:a}}(a(5));var c=a(4),g=new d.default("BrowserFullscreenUtils"),b={getDocument:function(){return r.document},getBrowserFullscreenElement:function(){var a=b.getDocument();return a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement},exitBrowserFullscreen:function(){if(g.debug("Exiting fullscreen"),b.getBrowserFullscreenElement()){var a=b.getDocument();"function"!=
typeof a.cancelFullScreen?"function"!=typeof a.mozCancelFullScreen?"function"!=typeof a.webkitCancelFullScreen?g.debug("No available cancelFullScreen method"):a.webkitCancelFullScreen():a.mozCancelFullScreen():a.cancelFullScreen()}else g.debug("Not in fullscreen mode.")},enterBrowserFullscreen:function(a){var c=b.getBrowserFullscreenElement();if(c){if(c===a)return void g.debug("Already in fullscreen with the same element.");b.exitBrowserFullscreen()}g.debug("Entering fullscreen");"function"!=typeof a.requestFullscreen?
"function"!=typeof a.mozRequestFullScreen?"function"!=typeof a.webkitRequestFullscreen?g.debug("No available requestFullscreen method"):a.webkitRequestFullscreen(Element&&Element.ALLOW_KEYBOARD_INPUT):a.mozRequestFullScreen():a.requestFullscreen()},addFullScreenChangeListener:function(a){var d=b.getDocument();a=(0,c.guardErrorWrapper)(a);d.addEventListener("fullscreenchange",a);d.addEventListener("mozfullscreenchange",a);d.addEventListener("webkitfullscreenchange",a);d.addEventListener("MSFullscreenChange",
a)},removeFullscreenChangeListener:function(a){var d=b.getDocument();a=(0,c.guardErrorWrapper)(a);d.removeEventListener("fullscreenchange",a);d.removeEventListener("mozfullscreenchange",a);d.removeEventListener("webkitfullscreenchange",a);d.removeEventListener("MSFullscreenChange",a)}};f.default=b},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.PlayerEngagedDetector=void 0;d=c(a(1));var g=c(a(0)),b=a(3),e=a(15),h=c(a(192)),k=c(a(6)),
l=a(14);a=f.PlayerEngagedDetector=function(a){var b=a.isMuted,c=a.isMobile,d=a.toggleMute,f=a.playing,k=a.shouldDisplayUnmuteAnywhereOverlay,l=a.expanded,w=a.toggleExpand,y=a.setPlayerEngaged;return g.default.createElement(h.default,{onBubblingClick:function(){!l&&e.playerConfig.expandOnInteraction&&w();b&&f&&(k||c)&&d()},onCapturingClick:function(){y()}},a.children)};a.propTypes={isMuted:d.default.bool.isRequired,isMobile:d.default.bool.isRequired,toggleMute:d.default.func.isRequired,playing:d.default.bool,
shouldDisplayUnmuteAnywhereOverlay:d.default.bool.isRequired,expanded:d.default.bool,toggleExpand:d.default.func.isRequired,setPlayerEngaged:d.default.func};a.defaultProps={playing:!1,expanded:!1,setPlayerEngaged:function(){}};f.default=(0,b.connect)(function(a){return{isMuted:a.player.muted,expanded:a.player.expanded,isMobile:k.default.isDeviceMobile(),shouldDisplayUnmuteAnywhereOverlay:a.player.displayUnmuteEverywhereOverlay||!1}},function(a){return{setPlayerEngaged:function(){var b=(0,l.setPlayerEngaged)();
a(b)}}})(a)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.claimPromotion=void 0;var c=function(a){return a&&a.__esModule?a:{default:a}}(a(52));f.claimPromotion=function(a){var b=a.callback;a=function(a,b,c){return decodeURIComponent("/gp/promotions/vpc?ie\x3dUTF8")+"\x26promoId\x3d"+decodeURIComponent(b)+"\x26source\x3d"+decodeURIComponent("amazonlive_pinned_message")}(0,a.promoId);return c.default.doGetRequest(a).catch(function(a){return b({hasNetworkError:!0}),a}).then(function(a){return a&&
(a.toUpperCase().includes("SUCCESS")||a.toUpperCase().includes("REDEEMED"))?b({hasClaimed:!0}):b({hasClaimed:!1,hasError:!1}),a})}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.shouldMessageScroll=function(a,d,b){return a&&a+d>b-15};f.renderKeyFrameStyle=function(a,d,b){var e=0;return a&&b?"@-moz-keyframes scroll-left {\n            20%   { -moz-transform: translateX(0%); }\n            75% { -moz-transform: translateX("+(e=-1*(a+d+30-b))+"px); }\n            100% { -moz-transform: translateX("+
e+"px); }\n        }\n\n        @-webkit-keyframes scroll-left {\n            0%   { -webkit-transform: translateX(0px); }\n            20%   { -webkit-transform: translateX(0px); }\n            75% { -webkit-transform: translateX("+e+"px); }\n            100% { -webkit-transform: translateX("+e+"px); }\n        }\n\n        @keyframes scroll-left {\n            0%   { \n                -moz-transform: translateX(0px);\n                -webkit-transform: translateX(0px);\n                transform: translateX(0px); \t\t\n            }\n            20%   { \n                -moz-transform: translateX(0px);\n                -webkit-transform: translateX(0px);\n                transform: translateX(0px); \t\t\n            }\n            75% { \n                -moz-transform: translateX("+
e+"px);\n                -webkit-transform: translateX("+e+"px);\n                transform: translateX("+e+"px);\n            }\n            100% { \n                -moz-transform: translateX("+e+"px);\n                -webkit-transform: translateX("+e+"px);\n                transform: translateX("+e+"px);\n            }\n        }":""}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=
0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0));d=c(a(1));var e=c(a(9)),h=a(4),k=e.default.translate("amazon-live-pinned-message-promo-legal-terms","Terms and conditions");a={promoId:d.default.string.isRequired};d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||
Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.onClickHandler=(0,h.guardErrorWrapper)(a.onclickHandler.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"onclickHandler",value:function(){r.open("https://www.amazon.com/gp/promotions/details/popup/"+this.props.promoId)}},{key:"render",value:function(){return b.default.createElement("div",{className:"amznlv-react-player-pinned-promo-legal-term",onClick:this.onClickHandler},k)}}]),c}();d.propTypes=a;f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});f.PinnedMessage=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0));d=a(3);var e=c(a(22)),h=c(a(1)),k=c(a(9)),l=c(a(37)),m=c(a(12)),n=c(a(117)),p=c(a(312)),q=c(a(6)),t=a(23),u=a(8),v=a(311),w=a(310),y=a(2),B=a(4),A=a(21),x=k.default.translate("amazon-live-pinned-message-promo-success",
"Discount applied! Add products to cart and checkout."),C=k.default.translate("amazon-live-pinned-message-promo-error","Fail to apply discount. Please try again later."),D=k.default.translate("amazon-live-pinned-message-promo-network-error","Something went wrong! Please try again later."),F=k.default.translate("amazon-live-pinned-message-promo-need-sign-in","Please Login to claim the Discount!"),H={};a=f.PinnedMessage=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
!0;var b=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return b.state={displayType:"PROMO_MESSAGE",scrollKeyFrame:"",shouldMessageScroll:!1},b.responseHandler=b.responseHandler.bind(b),b.onClickMetricsHandler=(0,B.guardErrorWrapper)(b.props.getOnClickMetricsHandler(function(){b.isClippablePromotion()&&b.claimPromotionHandler()}).bind(b)),
b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"componentDidMount",value:function(){this.props.removeUnwantedCsm&&!this.isMessageValid()||this.props.emitImpressionMetrics({},A.metricsEmitPriority.LOW)}},
{key:"componentWillReceiveProps",value:function(a){this.props.pinnedMessage.id!==a.pinnedMessage.id&&"PROMO_MESSAGE"!==this.state.displayType&&this.setDisplayType("PROMO_MESSAGE")}},{key:"shouldComponentUpdate",value:function(a,b){return!(0,l.default)(this.props,a)||!(0,l.default)(this.state,b)}},{key:"componentDidUpdate",value:function(a){this.props.removeUnwantedCsm?this.isMessageValid()&&this.props.pinnedMessage.id!==a.pinnedMessage.id&&this.props.emitImpressionMetrics({},A.metricsEmitPriority.LOW):
this.props.emitImpressionMetrics({},A.metricsEmitPriority.LOW);a=this.props.playerWidth;var b=this.pinnedMessageText&&this.pinnedMessageText.getBoundingClientRect()&&this.pinnedMessageText.getBoundingClientRect().width,c=e.default.findDOMNode(this.legalTerms),c=(c=c&&c.getBoundingClientRect()&&c.getBoundingClientRect().width)||0,d=(0,v.renderKeyFrameStyle)(b,c,a);this.state.scrollKeyFrame!==d&&this.setState({scrollKeyFrame:d,shouldMessageScroll:(0,v.shouldMessageScroll)(b,c,a)})}},{key:"onClaimPromotionSuccess",
value:function(){this.setDisplayType("PROMO_SUCCESS");this.props.emitMetrics({EVENT_TYPE:"PROMO_SUCCESS"},A.metricsEmitPriority.LOW)}},{key:"onClaimPromotionFailure",value:function(){var a=this;this.setDisplayType("PROMO_FAILURE");this.props.emitMetrics({EVENT_TYPE:"PROMO_FAILURE"},A.metricsEmitPriority.LOW);(0,y.setTimeout)(function(){a.setDisplayType("PROMO_MESSAGE")},3E3)}},{key:"onClaimPromotionNetWorkError",value:function(){var a=this;this.setDisplayType("PROMO_NETWORK_FAILURE");this.props.emitMetrics({EVENT_TYPE:"PROMO_NETWORK_FAILURE"},
A.metricsEmitPriority.LOW);(0,y.setTimeout)(function(){a.setDisplayType("PROMO_MESSAGE")},3E3)}},{key:"onClaimPromotionMissCustomerId",value:function(){this.setDisplayType("MISSING_CUSTOMER_ID");this.props.emitMetrics({EVENT_TYPE:"MISSING_CUSTOMER_ID"},A.metricsEmitPriority.LOW)}},{key:"setDisplayType",value:function(a){this.setState({displayType:a})}},{key:"getDisplayMessage",value:function(){switch(this.state.displayType){case "PROMO_SUCCESS":return b.default.createElement("div",{className:"amznlv-pinned-message-success"},
x);case "PROMO_FAILURE":return b.default.createElement("div",{className:"amznlv-pinned-message-failure"},C);case "PROMO_NETWORK_FAILURE":return b.default.createElement("div",{className:"amznlv-pinned-message-network-error"},D);case "MISSING_CUSTOMER_ID":return b.default.createElement("div",{className:"amznlv-pinned-message-miss-customer-id"},F);default:case "PROMO_MESSAGE":return b.default.createElement("div",{className:"amznlv-pinned-message-message"},this.props.pinnedMessage.message)}}},{key:"isMessageValid",
value:function(){return!!(this.props.pinnedMessage.id&&this.props.pinnedMessage.id.length&&0<this.props.pinnedMessage.id.length&&this.props.pinnedMessage.message&&this.props.pinnedMessage.message.length&&0<this.props.pinnedMessage.message.length)}},{key:"claimPromotionHandler",value:function(){if(q.default.getCustomerId()){this.setDisplayType("LOADING");var a={promoId:this.props.pinnedMessage.promoId,callback:this.responseHandler};(0,w.claimPromotion)(a)}else this.onClaimPromotionMissCustomerId()}},
{key:"responseHandler",value:function(a){var b=a.hasNetworkError;if(a.hasClaimed)this.onClaimPromotionSuccess();else{if(b)return void this.onClaimPromotionNetWorkError();this.onClaimPromotionFailure()}}},{key:"isClippablePromotion",value:function(){return!(!this.shouldDisplay()||!this.props.pinnedMessage.promoId)&&"PROMO_MESSAGE"===this.state.displayType}},{key:"shouldDisplay",value:function(){var a=this.props.pinnedMessage,b=a.id,a=a.message;return this.props.isLive&&b&&a}},{key:"renderMessageBox",
value:function(){var a=this;if("LOADING"===this.state.displayType)return b.default.createElement("div",{className:"amznlv-pinned-message-spinner"},b.default.createElement(u.Spinner,null));var c=(0,m.default)("amznlv-react-player-pinned-message-text-container",{"scroll-left":this.state.shouldMessageScroll});return b.default.createElement("div",{className:"amznlv-react-player-pinned-inner"},b.default.createElement("div",{className:c},b.default.createElement("div",{className:"amznlv-react-player-pinned-message-text",
onClick:this.onClickMetricsHandler,ref:function(b){a.pinnedMessageText=b}},this.getDisplayMessage()),this.isClippablePromotion()&&"PROMO_MESSAGE"===this.state.displayType&&b.default.createElement(p.default,{ref:function(b){a.legalTerms=b},promoId:this.props.pinnedMessage.promoId})))}},{key:"render",value:function(){return b.default.createElement(n.default,{transitionName:"transit",transitionEnterTimeout:300,transitionLeaveTimeout:500},this.shouldDisplay()?b.default.createElement("div",{className:"amznlv-react-player-pinned-message"+
(this.isClippablePromotion()?" clickable":""),key:"amznlv-react-player-pinned-message"},this.renderMessageBox(),b.default.createElement("style",null,this.state.scrollKeyFrame)):null)}}]),c}();a.propTypes={pinnedMessage:h.default.object,isLive:h.default.bool,emitImpressionMetrics:h.default.func.isRequired,getOnClickMetricsHandler:h.default.func.isRequired,emitMetrics:h.default.func.isRequired,playerWidth:h.default.number,removeUnwantedCsm:h.default.bool};a.defaultProps={pinnedMessage:H,isLive:!1,playerWidth:0,
removeUnwantedCsm:!1};a=(0,t.enableSushiMetrics)("pinnedMessage",function(a){a=a.pinnedMessage;a=void 0===a?H:a;return{STRING_PAYLOAD:a.message,JSON_PAYLOAD:{id:a.id,promoId:a.promoId}}})(a);f.default=(0,d.connect)(function(a){return{removeUnwantedCsm:(0,y.isWeblabEnabled)(a.weblab.removeUnwantedCsmForPinnedMessage)}})(a)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default={PLAY:"PLAY",STOP:"STOP"}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});f.ClosedCaptionOverlay=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=a(0),e=c(b),h=a(3),k=a(2),l=c(a(6));a=f.ClosedCaptionOverlay=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||
Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.captionContent="",a.state={isCaptionVisible:!0},a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&
(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.Component),g(c,[{key:"componentDidMount",value:function(){var a=this;this.interval=(0,k.setInterval)(function(){a.setState({isCaptionVisible:a.shouldCaptionDisplay()})},5E3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"getOverlayLeftOffsetPercent",value:function(){var a;this.props.isPlayerUnderControlOverlayEnabled?(a=this.props.playerWidth-355-306,a=100*(0<a?355+a/2:355+a)/this.props.playerWidth):
(a=this.props.playerWidth-306,a=0>a?0:100*a/2/this.props.playerWidth);return Math.round(a)+"%"}},{key:"getClassName",value:function(){var a=["amznlv-react-closedcaption-overlay"];return this.props.overPoll&&a.push("over-poll"),900>this.props.playerWidth&&a.push("small"),a.join(" ")}},{key:"shouldCaptionDisplay",value:function(){if(!this.props.isPlayerPlaying)return!0;var a=this.captionContent!==this.props.closedCaptionContent;return this.captionContent=this.props.closedCaptionContent,a}},{key:"closedCaptionStringParser",
value:function(a){if(a){a=a.split(/\r\n/g);for(var b=0;2>b;b+=1)a[b]&&(a[b]=" "+this.captionCharacterLimitCheck(a[b])+" ");return a}return{}}},{key:"captionCharacterLimitCheck",value:function(a){return a&&133<a.length&&(a=a.substring(0,133)),a}},{key:"render",value:function(){if(this.props.isClosedCaptionOn&&this.state.isCaptionVisible){var a=this.closedCaptionStringParser(this.props.closedCaptionContent);return e.default.createElement("div",{className:this.getClassName(),style:{left:this.getOverlayLeftOffsetPercent()}},
0<a.length&&e.default.createElement("div",{className:"amznlv-react-closedcaption-text-line-0"}," ",a[0],"  "),1<a.length&&e.default.createElement("div",{className:"amznlv-react-closedcaption-text-line-1"}," ",a[1]," "))}return e.default.createElement("div",{className:"amznlv-react-closedcaption-overlay-empty"})}}]),c}();a.propTypes={isClosedCaptionOn:d.default.bool.isRequired,isPlayerUnderControlOverlayEnabled:d.default.bool,playerWidth:d.default.number,closedCaptionContent:d.default.string.isRequired,
isPlayerPlaying:d.default.bool.isRequired,overPoll:d.default.bool};a.defaultProps={isPlayerUnderControlOverlayEnabled:void 0,playerWidth:void 0,overPoll:void 0};f.default=(0,h.connect)(function(a){var b=(0,k.getNestedValue)(a,"component-id"),c=(0,k.getNestedValue)(a,"player.expanded"),d=(0,k.getNestedValue)(a,"poll.collapsed"),b=(0,k.getNestedValue)(a,"poll.data")&&!d&&(l.default.isDeviceMobile()||"desktopFlexBanner"===b&&!c);return{isClosedCaptionOn:a.player.closedCaptionEnabled,overPoll:b}})(a)},
function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d=c(a(1));var b=c(a(9)),e=a(4),h=a(165);a=function(a){var c=a.tooltipPosition,d=a.collapsePlayer;a=b.default.translate("amazonlive-portal-exit-fullscreen-button-text","Exit Expanded View");var f=(0,e.guardErrorWrapper)(function(a){d();(0,h.hideTooltip)("amznlv-react-player-exit-fullscreen");a.stopPropagation();a.preventDefault()});return g.default.createElement("button",
{type:"button",id:"collapse-player-button",key:"collapse-player-button",tabIndex:"0",className:"a-declarative amznlv-react-player-exit-fullscreen-button","data-action":"a-tooltip",title:"Exit Expanded View","aria-label":a,"data-a-tooltip":JSON.stringify({position:c,content:a,name:"amznlv-react-player-exit-fullscreen"}),onClick:f})};a.propTypes={tooltipPosition:d.default.string.isRequired,collapsePlayer:d.default.func.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:
{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.DesktopControlOverlay=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(9));d=c(a(1));var e=a(0),h=c(e),k=a(4),l=c(a(24)),m=a(15),n=c(a(166)),p=a(167),q=c(a(316)),t=a(165),u=a(104);a=f.DesktopControlOverlay=function(a){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");!0;var b;b=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!=typeof b&&"function"!=typeof b?this:b;var d=b.props,e=d.setShouldDisplayUnmuteAnywhereOverlay,d=d.isMuted;return m.playerConfig.enableUnmuteAnywhere&&e(d),b.tooltipPosition=a.isEmbedded?"triggerBottom":"triggerTop",b.onClickClosedCaptionButton=(0,k.guardErrorWrapper)(b.onClickClosedCaptionButton.bind(b)),
b.onClickVolumeButton=(0,k.guardErrorWrapper)(b.onClickVolumeButton.bind(b)),b.onClickFullscreenButton=(0,k.guardErrorWrapper)(b.onClickFullscreenButton.bind(b)),b.changeVolume=(0,k.guardErrorWrapper)(b.changeVolume.bind(b)),b.showVolumeBar=(0,k.guardErrorWrapper)(b.showVolumeBar.bind(b)),b.hideVolumeBarIfMuted=(0,k.guardErrorWrapper)(b.hideVolumeBarIfMuted.bind(b)),b.onClickDockButton=(0,k.guardErrorWrapper)(b.onClickDockButton.bind(b)),b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.Component),g(c,[{key:"componentWillReceiveProps",value:function(a){var b=this.props,c=b.shouldDisplayUnmuteAnywhereOverlay,b=b.setShouldDisplayUnmuteAnywhereOverlay;!a.isMuted&&m.playerConfig.enableUnmuteAnywhere&&c&&b(!1)}},{key:"onClickClosedCaptionButton",value:function(a){var b=this.props.toggleClosedCaption;
(0,t.hideTooltip)("amznlv-react-closed-caption-control");b();a.stopPropagation()}},{key:"onClickVolumeButton",value:function(a){var b=this.props,c=b.isMuted,b=b.toggleMute;(0,t.hideTooltip)("control-panel-volume-icon"+(c?"-muted":""));b();a.stopPropagation()}},{key:"onClickFullscreenButton",value:function(a){var b=this.props.expandPlayer;(0,t.hideTooltip)("amznlv-react-player-fullscreen");b();a.stopPropagation()}},{key:"onClickDockButton",value:function(a){var b=this.props.dockPlayer;(0,t.hideTooltip)("amznlv-react-player-dock");
b();a.stopPropagation()}},{key:"getAccessibilityString",value:function(a){var c=this.props,d=c.isMuted,c=c.isClosedCaptionOn;switch(a){case "volume":return c=b.default.translate("amazonlive-portal-now-unmuted-text","now unmuted"),a=b.default.translate("amazonlive-portal-now-muted-text","now muted"),d?a:c;case "closedCaption":return d=b.default.translate("amazonlive-portal-closed-caption-enable-text","now enabled"),a=b.default.translate("amazonlive-portal-closed-caption-disable-text","now disabled"),
c?d:a}}},{key:"getTooltipText",value:function(a){var c=this.props,d=c.isMuted,c=c.isClosedCaptionOn;switch(a){case "volume":return c=b.default.translate("amazonlive-portal-unmute-text","Unmute"),a=b.default.translate("amazonlive-portal-mute-text","Mute"),d?c:a;case "closedCaption":return d=b.default.translate("amazonlive-portal-enable-closed-caption-text","Enable Closed Captions"),a=b.default.translate("amazonlive-portal-disable-closed-caption-text","Disable Closed Captions"),c?a:d;case "fullscreen":return b.default.translate("amazonlive-portal-fullscreen-button-text",
"Enter Expanded View");case "dock":return b.default.translate("amazonlive-portal-dock-button-text","Dock View")}}},{key:"changeVolume",value:function(a){(0,this.props.setVolume)(parseFloat((a.target.valueAsNumber/100).toFixed(2)));a.stopPropagation()}},{key:"showVolumeBar",value:function(){this.volumeWrapper.classList.remove("muted")}},{key:"hideVolumeBarIfMuted",value:function(){this.props.isMuted&&this.volumeWrapper.classList.add("muted")}},{key:"renderClosedCaptionButton",value:function(){var a=
this.props,c=a.showControlOverlay,d=a.isClosedCaptionOn;if(a.isClosedCaptionAvailable)return a=(0,k.guardErrorWrapper)(c),h.default.createElement("div",{className:"amznlv-react-closed-caption-control-button",onMouseEnter:a},h.default.createElement("button",{type:"button",tabIndex:"0",className:"a-declarative control-panel-closed-caption-icon"+(d?"":" disabled"),"data-action":"a-tooltip","data-a-tooltip":JSON.stringify({position:this.tooltipPosition,content:this.getTooltipText("closedCaption"),name:"amznlv-react-closed-caption-control"}),
onClick:this.onClickClosedCaptionButton,title:this.getAccessibilityString("closedCaption"),"aria-label":b.default.translate("amazonlive-portal-closed-caption-text","Closed Caption")}))}},{key:"renderVolumeButton",value:function(){var a=this.props,c=a.showControlOverlay,a=a.isMuted,c=(0,k.guardErrorWrapper)(c);return h.default.createElement("div",{className:"amznlv-react-player-volume-button",onMouseEnter:c},h.default.createElement("button",{type:"button",tabIndex:"0",className:"a-declarative control-panel-volume-icon"+
(a?" muted":""),"data-action":"a-tooltip","data-a-tooltip":JSON.stringify({position:this.tooltipPosition,content:this.getTooltipText("volume"),name:"control-panel-volume-icon"+(a?"-muted":"")}),key:"control-panel-volume-icon",onClick:this.onClickVolumeButton,title:this.getAccessibilityString("volume"),"aria-label":b.default.translate("amazonlive-portal-volume","Volume")}))}},{key:"renderVolumeInputFill",value:function(){var a=this,c=(this.volumeRef?this.volumeRef.offsetWidth:96)-5,d=this.props,e=
d.volume;return h.default.createElement("div",{className:"control-panel-volume-input"+(d.isMuted?" muted":""),ref:function(b){a.volumeWrapper=b}},h.default.createElement("input",{tabIndex:"0",type:"range",min:"0",max:"100",defaultValue:100*e,step:"1",onChange:this.changeVolume,onMouseUp:this.changeVolume,onFocus:this.showVolumeBar,onBlur:this.hideVolumeBarIfMuted,title:b.default.translate("amazonlive-portal-volume","Volume"),ref:function(b){a.volumeRef=b}}),h.default.createElement("div",{className:"control-panel-volume-input-fill",
style:{right:c*(1-e)+"px"}}))}},{key:"renderFullScreenButton",value:function(){var a=this.props,b=a.playerExpanded,c=a.enableIframeFullscreen,d=a.collapsePlayer;if(a.enableExpandablePlayer)return b?c&&m.playerConfig.enterFullscreenOnExpand?h.default.createElement(q.default,{tooltipPosition:this.tooltipPosition,collapsePlayer:d}):h.default.createElement("div",{id:"expand-player-accessibility-status",className:"expand-player-button-hidden",tabIndex:"-1","aria-label":this.getAccessibilityString("fullscreen"),
title:"Expanded view enabled"}):h.default.createElement("button",{type:"button",id:"expand-player-button",key:"expand-player-button",tabIndex:"0",className:"a-declarative amznlv-react-player-fullscreen-button","data-action":"a-tooltip",title:"Expanded view collapsed","aria-label":this.getTooltipText("fullscreen"),"data-a-tooltip":JSON.stringify({position:this.tooltipPosition,content:this.getTooltipText("fullscreen"),name:"amznlv-react-player-fullscreen"}),onClick:this.onClickFullscreenButton})}},
{key:"renderDockButton",value:function(){if(this.props.enableDockPlayer)return h.default.createElement("button",{type:"button",id:"dock-player-button",tabIndex:"0",className:"a-declarative amznlv-react-player-dock-button","data-action":"a-tooltip",title:"Dock view","aria-label":this.getTooltipText("dock"),"data-a-tooltip":JSON.stringify({position:this.tooltipPosition,content:this.getTooltipText("dock"),name:"amznlv-react-player-dock"}),onClick:this.onClickDockButton})}},{key:"renderMessageOverlay",
value:function(){if(!this.props.enableExpandableViewInAdSlotVod){var a=this.props;return h.default.createElement(n.default,{broadcastStatus:a.broadcastStatus,startTime:a.startTime,title:a.title,isVod:a.isVod,channelTitle:a.channelTitle})}}},{key:"renderDestinationIngress",value:function(){var a=this.props,b=a.playerExpanded;if(a.isDestinationIngressEnabled&&b)return h.default.createElement(u.DestinationIngress,null)}},{key:"renderTitle",value:function(){return h.default.createElement("div",{className:"broadcast-title"},
this.props.title)}},{key:"render",value:function(){var a=this.props,b=a.isActive,c=a.shouldDisplayUnmuteAnywhereOverlay,d=a.isLive,e=a.playing,f=a.hideControlOverlay,g=a.showControlOverlay,a=a.enableExpandableViewInAdSlotVod,n=m.playerConfig.enableUnmuteAnywhere,l=m.playerConfig.showTitleInOverlay,f=(0,k.guardErrorWrapper)(f),g=(0,k.guardErrorWrapper)(g),b=b?"active":"",c=n&&c&&d&&e?p.UNMUTE_OVERLAY_CLASS_NAME:"";return d?h.default.createElement("div",{className:c+" desktop",onMouseLeave:f,onMouseEnter:g},
h.default.createElement("div",{className:p.CONTROL_OVERLAY_CLASS_NAME+" desktop "+b},h.default.createElement("div",{className:"control-panel-gradient-top"}),h.default.createElement("div",{className:"control-panel-info live"},l&&this.renderTitle()),h.default.createElement("div",{className:"amazonlive-player-control-buttons"},e&&this.renderVolumeButton(),e&&this.renderVolumeInputFill(),e&&this.renderDockButton(),this.renderClosedCaptionButton(),this.renderFullScreenButton(),this.renderDestinationIngress()))):
h.default.createElement("div",{className:c+" desktop",onMouseLeave:f,onMouseEnter:g},h.default.createElement("div",{className:p.CONTROL_OVERLAY_CLASS_NAME+" desktop "+b},h.default.createElement("div",{className:"control-panel-gradient-top"}),h.default.createElement("div",{className:"control-panel-info non-live"},this.renderMessageOverlay()),a&&h.default.createElement("div",{className:"amazonlive-player-control-buttons"},this.renderFullScreenButton(),this.renderDestinationIngress())))}}]),c}();a.propTypes=
{isActive:d.default.bool.isRequired,isMuted:d.default.bool,isLive:d.default.bool,isClosedCaptionOn:d.default.bool,isClosedCaptionAvailable:d.default.bool,expandPlayer:d.default.func,collapsePlayer:d.default.func,setShouldDisplayUnmuteAnywhereOverlay:d.default.func,shouldDisplayUnmuteAnywhereOverlay:d.default.bool,enableExpandablePlayer:d.default.bool.isRequired,playing:d.default.bool,playerExpanded:d.default.bool,setVolume:d.default.func,toggleClosedCaption:d.default.func,toggleMute:d.default.func,
showControlOverlay:d.default.func,hideControlOverlay:d.default.func,volume:d.default.number,broadcastStatus:d.default.oneOf(Object.values(l.default)),startTime:d.default.number,title:d.default.string,isVod:d.default.bool,channelTitle:d.default.string,dockPlayer:d.default.func,enableDockPlayer:d.default.bool,isEmbedded:d.default.bool,enableIframeFullscreen:d.default.bool,enableExpandableViewInAdSlotVod:d.default.bool,isDestinationIngressEnabled:d.default.bool};a.defaultProps={isMuted:!1,isLive:!1,
isClosedCaptionOn:!1,isClosedCaptionAvailable:!1,expandPlayer:function(){},setShouldDisplayUnmuteAnywhereOverlay:function(){},shouldDisplayUnmuteAnywhereOverlay:!1,playing:!1,playerExpanded:!1,setVolume:function(){},toggleClosedCaption:function(){},toggleMute:function(){},showControlOverlay:function(){},hideControlOverlay:function(){},volume:0,broadcastStatus:l.default.UNKNOWN,startTime:0,title:"",isVod:!1,channelTitle:"",enableDockPlayer:!1,dockPlayer:function(){},isEmbedded:!1,enableIframeFullscreen:void 0,
collapsePlayer:void 0,enableExpandableViewInAdSlotVod:!1,isDestinationIngressEnabled:!1};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(f,"__esModule",{value:!0});f.mapStateToProps=f.MobileControlOverlay=void 0;var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=
!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(1)),h=a(0),k=c(h),l=c(a(12));d=a(3);var m=a(167),n=c(a(43)),p=a(15),q=c(a(166)),t=a(4);a=f.MobileControlOverlay=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;var b=a.props,d=b.setShouldDisplayUnmuteAnywhereOverlay,b=b.isMuted;return d(!!p.playerConfig.enableUnmuteAnywhere&&b),a.onOverlayClick=a.onOverlayClick.bind(a),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}(c,h.Component),b(c,[{key:"componentDidMount",value:function(){var a=this.props,b=a.showControlOverlay;a.showOnMount&&b()}},{key:"componentWillReceiveProps",value:function(a){var b=this.props,c=b.shouldDisplayUnmuteAnywhereOverlay,b=b.setShouldDisplayUnmuteAnywhereOverlay;!a.isMuted&&p.playerConfig.enableUnmuteAnywhere&&c&&b(!1)}},{key:"onOverlayClick",value:function(a){var b=this.props,c=b.expanded,d=b.expandPlayer,e=b.isMuted,f=b.toggleMute;b.showExpandOverlay&&!c&&(d(),e&&f(),
a.stopPropagation())}},{key:"renderClosedCaptionButton",value:function(){var a=this.props,b=a.toggleClosedCaption,c=a.isClosedCaptionOn,d=function(a){(0,t.guardError)(function(){b();a.stopPropagation()})};return a.isClosedCaptionAvailable?k.default.createElement("div",{className:"amznlv-react-closed-caption-control-button mobile",onClick:d,onKeyUp:d,role:"presentation"},k.default.createElement("span",{className:(0,l.default)("control-panel-closed-caption-icon",{disabled:!c})})):void 0}},{key:"renderCollapseButton",
value:function(){var a=this.props,b=a.showCollapseButton,c=a.collapsePlayer,a=(0,t.guardErrorWrapper)(function(a){c();a.stopPropagation()});return b?k.default.createElement("div",{className:"collapse-button",onClick:a,onKeyUp:a,role:"presentation"}):void 0}},{key:"renderControlPanelInfo",value:function(){return k.default.createElement("div",{className:"control-panel-info "+(this.props.isLive?"live":"non-live")},this.renderMessageOverlay())}},{key:"renderMessageOverlay",value:function(){var a=this.props;
return k.default.createElement(q.default,{broadcastStatus:a.broadcastStatus,startTime:a.startTime,title:a.title,isVod:a.isVod,channelTitle:a.channelTitle})}},{key:"renderVolumeButton",value:function(){var a=this.props,b=a.isMuted,a=a.toggleMute,a=(0,t.guardErrorWrapper)(a);return k.default.createElement("div",{className:"amznlv-react-player-volume-button mobile",onClick:a,onKeyUp:a,role:"presentation"},k.default.createElement("div",{className:"control-panel-volume-icon "+(b?"muted":"")}))}},{key:"render",
value:function(){var a,b=this.props,c=b.showExpandOverlay,d=b.expanded,e=b.isLive,f=b.isActive,n=b.pinnedMessage,b=p.playerConfig.showTitleInOverlay,h=p.playerConfig.overlayLayout,c=(0,l.default)("mobile",(g(a={},m.EXPAND_OVERLAY_CLASS_NAME,c&&!d),g(a,m.UNMUTE_OVERLAY_CLASS_NAME,this.shouldShowUnmuteAnywhereOverlay),a));a=(0,l.default)(m.CONTROL_OVERLAY_CLASS_NAME,"mobile",e?"live":"non-live",{active:f,"with-pinned-message":n.message});return k.default.createElement("div",{className:c,onClick:this.onOverlayClick,
role:"presentation"},k.default.createElement(h,{className:a,isLive:e,controlPanelInfo:!e||b?this.renderControlPanelInfo():void 0,volumeButton:this.shouldShowMuteIcon?this.renderVolumeButton():null,closedCaptionButton:e?this.renderClosedCaptionButton():null,collapseButton:this.renderCollapseButton(),isActive:f}))}},{key:"shouldShowMuteIcon",get:function(){var a=this.props,b=a.shouldDisplayUnmuteAnywhereOverlay,a=a.isMuted;return!!this.shouldShowVolumeControl&&!b&&(a||p.playerConfig.overlayShowMutedIcon)}},
{key:"shouldShowUnmuteAnywhereOverlay",get:function(){var a=this.props,b=a.expanded,a=a.shouldDisplayUnmuteAnywhereOverlay;return!!this.shouldShowVolumeControl&&!(p.playerConfig.expandOnInteraction&&!b)&&a}},{key:"shouldShowVolumeControl",get:function(){var a=this.props,b=a.playing;return a.isLive&&b}}]),c}();a.propTypes={isActive:e.default.bool.isRequired,isLive:e.default.bool.isRequired,pinnedMessage:e.default.object,isMuted:e.default.bool,isClosedCaptionOn:e.default.bool,isClosedCaptionAvailable:e.default.bool,
setShouldDisplayUnmuteAnywhereOverlay:e.default.func,expandPlayer:e.default.func,collapsePlayer:e.default.func,shouldDisplayUnmuteAnywhereOverlay:e.default.bool,showOnMount:e.default.bool,expanded:e.default.bool,showExpandOverlay:e.default.bool,playing:e.default.bool,showControlOverlay:e.default.func,toggleMute:e.default.func,toggleClosedCaption:e.default.func,title:e.default.string,showCollapseButton:e.default.bool,broadcastStatus:e.default.string,startTime:e.default.number,isVod:e.default.bool,
channelTitle:e.default.string};a.defaultProps={pinnedMessage:{},isMuted:void 0,isClosedCaptionOn:void 0,isClosedCaptionAvailable:!1,setShouldDisplayUnmuteAnywhereOverlay:function(){},expandPlayer:function(){},collapsePlayer:function(){},shouldDisplayUnmuteAnywhereOverlay:void 0,expanded:void 0,showExpandOverlay:void 0,showOnMount:p.playerConfig.showOverlayOnMount,playing:void 0,showControlOverlay:function(){},toggleMute:function(){},toggleClosedCaption:function(){},title:void 0,showCollapseButton:void 0,
broadcastStatus:void 0,startTime:void 0,isVod:void 0,channelTitle:void 0};e=f.mapStateToProps=function(a,b){var c=b.isLive;b=b.followMeDockState===n.default.DOCKED;return{expanded:a.player.expanded,showExpandOverlay:p.playerConfig.showExpandOverlay&&a.player.playing&&c&&!b,showCollapseButton:p.playerConfig.showExpandOverlay&&a.player.expanded}};f.default=(0,d.connect)(e)(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,
c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0));d=c(a(1));var e=c(a(12)),h=a(3),k=a(2),l=a(4);a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={active:!1},a.setDomRef=a.setDomRef.bind(a),a.show=(0,l.guardErrorWrapper)(a.show.bind(a)),a.hide=(0,l.guardErrorWrapper)(a.hide.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"setDomRef",value:function(a){this.controls=a}},{key:"clearHideTimeout",value:function(){this.hideTimeout&&clearTimeout(this.hideTimeout)}},{key:"show",value:function(){this.clearHideTimeout();this.setState({active:!0})}},{key:"hide",value:function(){var a=this;this.clearHideTimeout();this.hideTimeout=(0,k.setTimeout)(function(){a.setState({active:!1})},3E3)}},{key:"renderRestoreButton",value:function(){var a=this.props.onRestore;return a&&b.default.createElement("button",
{className:"restore-button",onClick:(0,l.guardErrorWrapper)(a),type:"button"})}},{key:"renderDismissButton",value:function(){var a=this.props.onDismiss;return a&&b.default.createElement("button",{className:"dismiss-button",onClick:(0,l.guardErrorWrapper)(a),type:"button"})}},{key:"renderVolumeButton",value:function(){var a=this.props,c=a.toggleMute,a=a.muted,d=(0,l.guardErrorWrapper)(c);return c&&b.default.createElement("button",{className:(0,e.default)("volume-button",{muted:a}),onClick:d,type:"button"})}},
{key:"render",value:function(){var a=this.state.active;return b.default.createElement("div",{className:(0,e.default)("follow-me-web-overlay",{active:a}),ref:this.setDomRef,onMouseLeave:this.hide,onMouseEnter:this.show},this.renderVolumeButton(),this.renderRestoreButton(),b.default.createElement("div",{className:"spacer"}),this.renderDismissButton())}}]),c}();a.propTypes={onDismiss:d.default.func.isRequired,toggleMute:d.default.func.isRequired,onRestore:d.default.func,muted:d.default.bool.isRequired};
a.defaultProps={onRestore:null};f.default=(0,h.connect)(function(a){return{muted:a.player.muted}})(a)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.animateElementTo=void 0;var c=a(2),g=a(4),b=function h(a,b){a.style.transition=null;a.removeEventListener("transitionend",h.bind(null,a));b()};f.animateElementTo=function(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:500,m="transform "+f+"ms cubic-bezier(0,0,0.31,1) 0ms";return new Promise(function(n){a.style.willChange=
"transform";(0,c.setTimeout)(function(){a.style.transition=m;var p=(0,c.setTimeout)(b.bind(null,a,n),f+10);a.addEventListener("transitionend",(0,g.guardErrorWrapper)(function(){clearTimeout(p);b(a,n)}));a.style.transform=d?"translateX("+d.x+"px) translateY("+d.y+"px)":null;a.style.willChange=""},10)})}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a){return a&&a.__esModule?a:{default:a}}(a(2));f.default=function(a,b,d,f){a=a.getBoundingClientRect();var k=a.x+a.width/
2,l=a.y+a.height/2,m=c.default.isIOSDevice(),n=m?document.documentElement.clientWidth:r.innerWidth,p=m?document.documentElement.clientHeight:r.innerHeight;d={x:-d,y:-f};f={};return k<n/2?(d.x+=b,f.left=b):(d.x+=n-a.width-b,f.right=b),l<p/2?(d.y+=b,f.top=b):(d.y+=p-a.height-b,m?f.top=p-a.height-b:f.bottom=b),{transform:d,viewport:f}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=
c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(321)),h=a(320),k=a(2),l=a(4),m=function(a){return a?a+"px":null};a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.dismissing=!1,a.onMouseDown=(0,l.guardErrorWrapper)(a.onMouseDown.bind(a)),a.onMouseMove=(0,l.guardErrorWrapper)(a.onMouseMove.bind(a)),a.onMouseUp=(0,l.guardErrorWrapper)(a.onMouseUp.bind(a)),a.draw=a.draw.bind(a),a.setDomElement=a.setDomElement.bind(a),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"componentDidMount",value:function(){this.updateEventListeners(this.props.isDraggable)}},{key:"componentWillReceiveProps",value:function(a){var b=this.props,c=b.isDraggable,b=b.animateOnDraggable;c!==a.isDraggable&&(b&&!c?this.setCurrentFromRect():this.updateEventListeners(a.isDraggable),c&&this.clearTransform())}},{key:"componentDidUpdate",
value:function(a){var b=this.props,c=b.isDraggable;b.animateOnDraggable&&!a.isDraggable&&c&&(this.positionInInitialCorner(),this.animateFromStartToCurrent())}},{key:"onMouseDown",value:function(a){if(!this.isDragging&&!this.isAnimating){a.preventDefault();var b=this.boundingClientRect;this.initialCorner={x:b.x,y:b.y};"number"==typeof a.clientX?(this.startX=a.clientX,this.startY=a.clientY,document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove)):(this.startX=
a.touches[0].clientX,this.startY=a.touches[0].clientY,document.addEventListener("touchend",this.onMouseUp),document.addEventListener("touchmove",this.onMouseMove));this.currentX=this.startX;this.currentY=this.startY;this.isDragging=!0;this.domElement.style.willChange="transform";requestAnimationFrame(this.draw)}}},{key:"onMouseMove",value:function(a){this.isDragging&&!this.isAnimating&&("number"==typeof a.clientX?(this.currentX=a.clientX,this.currentY=a.clientY):(this.currentX=a.touches[0].clientX,
this.currentY=a.touches[0].clientY),this.dismissing&&this.isOutOfViewport()||this.setDismissing())}},{key:"onMouseUp",value:function(){if(this.isDragging&&!this.isAnimating)if(document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchend",this.onMouseUp),document.removeEventListener("touchmove",this.onMouseMove),this.dismissing&&.4<this.getPercentOutOfViewport())this.dismiss();else{this.domElement.style.opacity=
null;var a=this.checkForClick();this.targetY=this.targetX=0;this.dismissing=this.isDragging=!1;a||(this.isAnimating=!0,this.animateToCurrentCorner())}}},{key:"onCornerAnimationComplete",value:function(){var a=this.currentCorner.viewport;this.clearTransform();this.domElement.style.top=m(a.top);this.domElement.style.right=m(a.right);this.domElement.style.bottom=m(a.bottom);this.domElement.style.left=m(a.left);this.isAnimating=!1}},{key:"setDomElement",value:function(a){this.domElement=a}},{key:"setCurrentFromRect",
value:function(){var a=this.boundingClientRect,b=a.y;this.currentX=a.x;this.currentY=b}},{key:"getPercentOutOfViewport",value:function(){var a=this.boundingClientRect,b=0;return 0>a.left?b=-a.left:0>r.innerWidth-a.right&&(b=a.right-r.innerWidth),b/a.width}},{key:"setDismissing",value:function(){var a=5>Math.abs(this.currentY-this.startY);this.dismissing=this.props.dismissable&&a&&this.isOutOfViewport()}},{key:"positionInInitialCorner",value:function(){var a=this.props,b=a.margin,a=a.initialCorner;
(a.includes("right")?this.domElement.style.right=m(b):this.domElement.style.left=m(b),0===a.indexOf("bottom"))?(0,k.isIOSDevice)()?(a=this.domElement.getBoundingClientRect(),this.domElement.style.top=m(document.documentElement.clientHeight-a.height-b)):this.domElement.style.bottom=m(b):this.domElement.style.top=m(b)}},{key:"checkForClick",value:function(){var a=this.props.onClick;if(a){var b={x:this.startX,y:this.startY},c={x:this.currentX,y:this.currentY};if(10>(0,k.distanceBetween)(b,c))return a(),
!0}return!1}},{key:"isOutOfViewport",value:function(){var a=this.boundingClientRect,b=0>a.left;return 0>r.innerWidth-a.right||b}},{key:"dismiss",value:function(){var a,b=this;a=this.boundingClientRect;var c=this.props,d=c.onDismiss,c=c.animationLength;a=0<a.left?a.width+50:-a.width-50;this.isDragging=!1;this.domElement.style.transform="translateX("+a+"px)";(0,k.setTimeout)(function(){b.dismissing=!1;d()},c)}},{key:"animateToCurrentCorner",value:function(){var a=this,b=this.domElement,c=b.offsetLeft,
b=b.offsetTop,d=this.props,f=d.margin,d=d.animationLength;this.currentCorner=(0,e.default)(this.domElement,f,c,b);c=this.currentCorner.transform;(0,h.animateElementTo)(this.domElement,c,d).then(function(){a.onCornerAnimationComplete()})}},{key:"draw",value:function(){this.isDragging&&(requestAnimationFrame(this.draw),this.domElement.style.transform=this.screenTransform,this.domElement.style.opacity=this.dismissing?1-this.getPercentOutOfViewport():null)}},{key:"clearTransform",value:function(){this.domElement.style.transition=
"none";this.domElement.style.transform=null;this.domElement.style.top=null;this.domElement.style.right=null;this.domElement.style.bottom=null;this.domElement.style.left=null;this.domElement.style.opacity=null;this.domElement.style["will-change"]=null}},{key:"animateFromStartToCurrent",value:function(){var a=this,b=this.boundingClientRect,c=b.y,d=this.props,e=d.isDraggable,d=d.animationLength;this.startX=b.x;this.startY=c;this.domElement.style.transform=this.screenTransform;(0,h.animateElementTo)(this.domElement,
null,d).then(function(){a.updateEventListeners(e)})}},{key:"updateEventListeners",value:function(a){a?(this.domElement.addEventListener("touchstart",this.onMouseDown),this.domElement.addEventListener("mousedown",this.onMouseDown)):(this.domElement.removeEventListener("touchstart",this.onMouseDown),this.domElement.removeEventListener("mousedown",this.onMouseDown))}},{key:"render",value:function(){var a=this.props;return b.default.createElement("div",{className:a.displayClass,ref:this.setDomElement,
role:"presentation"},a.children)}},{key:"screenX",get:function(){return this.currentX-this.startX}},{key:"screenY",get:function(){return this.dismissing?0:this.currentY-this.startY}},{key:"screenTransform",get:function(){return"translateX("+this.screenX+"px) translateY("+this.screenY+"px)"}},{key:"boundingClientRect",get:function(){return this.domElement.getBoundingClientRect()}}]),c}();a.propTypes={displayClass:d.default.string,isDraggable:d.default.bool,margin:d.default.number,animateOnDraggable:d.default.bool,
onClick:d.default.func,dismissable:d.default.bool,onDismiss:d.default.func,initialCorner:d.default.oneOf(["top-left","top-right","bottom-left","bottom-right"]),animationLength:d.default.number};a.defaultProps={displayClass:"",isDraggable:!1,margin:5,animateOnDraggable:!1,onClick:null,dismissable:!1,onDismiss:function(){},initialCorner:"bottom-right",animationLength:500};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=
c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,d,f){return d&&a(c.prototype,d),f&&a(c,f),c}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(0));d=function(a){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var a=(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(d,g.default.Component),c(d,[{key:"getBroadcastLatency",value:function(){return 0}},{key:"getCaptionsAvailable",value:function(){}},
{key:"setClosedCaptionMetric",value:function(){}},{key:"setClosedCaptionStatus",value:function(){}},{key:"setMuted",value:function(){}},{key:"setVolume",value:function(){}},{key:"emitMuteMetrics",value:function(){}},{key:"play",value:function(){}},{key:"preload",value:function(){}},{key:"reload",value:function(){}},{key:"stop",value:function(){}},{key:"stopPreload",value:function(){}}]),d}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",
{value:!0});f.SvsVideoJsPlayer=f.SET_MUTED_ALLOWED_PLAYER_STATUSES=void 0;var g=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,n=a[Symbol.iterator]();!(d=(g=n.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{!d&&n.return&&n.return()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=
c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(1)),h=c(a(0)),k=a(3),l=c(a(37)),m=c(a(13)),n=c(a(118)),p=a(2),q=c(a(6)),t=c(a(5)),u=c(a(128)),v=c(a(323));d=a(23);var w=a(170),y=c(w),B=c(a(62)),A=a(21),x=a(4),C=f.SET_MUTED_ALLOWED_PLAYER_STATUSES=[u.default.LOADING,u.default.PLAYING];a=f.SvsVideoJsPlayer=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
!0;var b=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return b.logger=new t.default("SvsVideoJsPlayer"),b.firstTimePlay=!0,b.minWatchedOffset=1E3*Math.floor(60*Math.random()),b.watchedDurationSinceCheckmark=0,b.state={status:u.default.UNINITIALIZED},b.onRequestplay=b.onRequestplay.bind(b),b.onPlay=b.onPlay.bind(b),b.onStop=
b.onStop.bind(b),b.onError=b.onError.bind(b),b.resize=(0,x.guardErrorWrapper)((0,n.default)(b.resize,200).bind(b)),b.onPlayerInitialized=b.onPlayerInitialized.bind(b),a.enableSyncSvsApiCalls&&(b.reload=(0,x.guardErrorWrapper)(function(){this.callVideoJsApi("src",this.videoSrc)}.bind(b))),b.videoJsUtils=new y.default({enableSvsPlayer:a.enableSvsPlayer,patchVideoJs:"T1"===a.patchVideoJs||"T3"===a.patchVideoJs,patchVideoJsEvents:a.patchVideoJsEvents,upgradeSvsPlayer:a.upgradeSvsPlayer}),b}return function(a,
b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,v.default),b(c,[{key:"displayControlBar",value:function(){this.instance&&this.instance.userActive(!0)}},{key:"hideControlBar",value:function(){this.instance&&this.instance.userActive(!1)}},{key:"checkAndSetVideoSrc",
value:function(){if(this.instance){var a=this.props,b=a.videoSourceUrl,c=a.enableSyncSvsApiCalls;(a.isLive||b)&&(this.instance.src()===this.videoSrc&&(0,l.default)(this.prevVideoMetadata,this.videoMetadata)||(this.prevVideoMetadata=this.videoMetadata,c?this.reload():this.callVideoJsApi("src",this.videoSrc)))}}},{key:"checkAndSetControls",value:function(){var a=this.props,b=a.videoSourceUrl,a=a.showControls&&b;this.instance&&this.instance.controls()!==a&&(this.instance.controls(!!a),a&&this.instance.controlBar&&
this.instance.controlBar.removeChild("QualityMenuButton"))}},{key:"callVideoJsApi",value:function(a){for(var b=this,c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];if(this.instance)return c=(0,x.guardError)(function(){var c;return(c=b.instance)[a].apply(c,d)}),this.logger.debug("VideoJS player api: "+a+"("+d.join(",")+") called.",c),c;this.logger.warn("VideoJS player instance not ready.")}},{key:"logTwitchEventFired",value:function(a,b){this.logger.debug("Twitch Tech event: "+
a+" fired.",b)}},{key:"logVideoJsEventFired",value:function(a,b){this.logger.debug("VideoJS event: "+a+" fired.",b)}},{key:"setStatus",value:function(a){this.logger.debug("Set player status to "+a);this.state.status!==u.default.PLAYING&&a===u.default.PLAYING?this.startHeartbeat():this.state.status===u.default.PLAYING&&a!==u.default.PLAYING&&this.stopHeartbeat();this.setState({status:a})}},{key:"executeAfterInitialized",value:function(a){return this.props.enableSyncSvsApiCalls?this.state.initialized?
a():void this.logger.debug("Not initialized."):this.initialized.then(a)}},{key:"play",value:function(){var a=this;if(this.logger.debug("Calling play()"),this.state.status===u.default.PLAYING)return this.logger.debug("Player already playing"),void(0,p.callFunction)(this.props.callbacks.onPlay);var b=function(){a.checkAndSetVideoSrc();a.callVideoJsApi("play");"T3"===a.props.enableSvsPlayer&&(a.logger.debug("On request play"),a.onRequestplay())};return this.props.enableSyncSvsApiCalls?this.executeAfterInitialized(b):
(this.setStatus(u.default.LOADING),this.initialized.then(function(){a.state.status===u.default.LOADING?b():a.logger.debug("Player status is no longer loading")}))}},{key:"stop",value:function(){var a=this;this.logger.debug("Calling stop()");var b=function(){a.callVideoJsApi("pause");a.logger.debug("Calling onStop() immediately in stop()");a.onStop()};return this.props.enableSyncSvsApiCalls?this.executeAfterInitialized(b):(this.setStatus(u.default.STOPPING),this.initialized.then(function(){a.state.status===
u.default.STOPPING&&b()}))}},{key:"setMuted",value:function(a){var b=this;this.executeAfterInitialized(function(){0<=C.indexOf(b.state.status)&&(b.callVideoJsApi("muted",a),(0,p.callFunction)(b.props.callbacks.onMute))})}},{key:"setVolume",value:function(a){var b=this;this.executeAfterInitialized(function(){b.callVideoJsApi("volume",a)})}},{key:"onRequestplay",value:function(){this.startSushiTimeMetrics("videoPlay")}},{key:"onPlay",value:function(){this.setStatus(u.default.PLAYING);(0,p.callFunction)(this.props.callbacks.onPlay);
this.stopSushiTimeMetrics("videoPlay")}},{key:"onStop",value:function(){this.setStatus(u.default.STOPPED);(0,p.callFunction)(this.props.callbacks.onStop)}},{key:"onPause",value:function(){this.setStatus(u.default.PAUSED);(0,p.callFunction)(this.props.callbacks.onPause)}},{key:"onError",value:function(){this.setStatus(u.default.ERROR);(0,p.callFunction)(this.props.callbacks.onError)}},{key:"startSushiTimeMetrics",value:function(a){this.timestamps=this.timestamps||{};this.timestamps[a]=new Date}},{key:"stopSushiTimeMetrics",
value:function(a){var b=this.timestamps[a];b&&(this.props.emitMetrics({EVENT_TYPE:a,INT_PAYLOAD:new Date-b},A.metricsEmitPriority.MEDIUM),delete this.timestamps[a])}},{key:"startHeartbeat",value:function(){var a=this;this.heartbeatStart=new Date;var b=function(){a.logger.debug("Minute watched heartbeat fired");a.lastHeartbeat=new Date;a.props.emitVideoPlayHeartbeatMetrics()},c=void 0;this.lastHeartbeat?c=6E4-this.watchedDurationSinceCheckmark:(this.minWatchedOffset-=this.watchedDurationSinceCheckmark,
c=this.minWatchedOffset);this.logger.debug("Minute watched heartbeat started with delay "+c);this.heartbeatTimeout=(0,p.setTimeout)(function(){b();a.heartbeatInterval=(0,p.setInterval)(b.bind(a),6E4)},c)}},{key:"stopHeartbeat",value:function(){var a=this.lastHeartbeat||this.heartbeatStart;a&&(this.watchedDurationSinceCheckmark=new Date-a,this.logger.debug("Watched duration since heartbeat start of last heartbeat "+this.watchedDurationSinceCheckmark));clearTimeout(this.heartbeatTimeout);clearInterval(this.heartbeatInterval)}},
{key:"setClosedCaptionMetric",value:function(a){this.props.emitCloseCaptionMetrics(a)}},{key:"emitMuteMetrics",value:function(a,b){this.props.emitMutedOrUmmutedMetric(a,b)}},{key:"initWithBrila",value:function(){var a=this;return Promise.all([this.videoJsUtils.brilaReady(),this.videoJsUtils.videoJsWithTwitchReady()]).then(function(b){var c=g(b,1)[0];return new Promise(function(b){a.logger.debug("Initializing with Brila");var d=c.embed(a.videoDomId,{contentId:a.props.id,foresterMetadataParams:{client:"AmazonLive",
method:"LiveStream",requestId:r.ue_id||"",marketplaceId:r.ue_mid||"",session:r.ue_sid||""},videoAds:{isEngineEnabled:!1}},{player:a.videojsConfig,hotkeys:{volumeStep:.2,seekStep:10,skipInitialFocus:!0,enableInactiveFocus:!1}});d.ready((0,x.guardErrorWrapper)(function(){a.logger.debug("Brila VideoJS player is ready.");a.instance=d;b()}));"T2"!==a.props.patchTwitchTech&&"T3"!==a.props.patchTwitchTech||(0,x.guardError)(w.guardTwitchTech,d,a.props.upgradeSvsPlayer)})})}},{key:"initWithVideoJs",value:function(){var a=
this;return this.videoJsUtils.videoJsWithTwitchReady().then(function(b){return new Promise(function(c){a.logger.debug("Initializing with VideoJS");var d=b(a.videoDomId,a.videojsConfig,(0,x.guardErrorWrapper)(function(){a.logger.debug("VideoJS player is ready.");a.instance=d;c()}));"T2"!==a.props.patchTwitchTech&&"T3"!==a.props.patchTwitchTech||(0,x.guardError)(w.guardTwitchTech,d,a.props.upgradeSvsPlayer)})})}},{key:"addEventListeners",value:function(){var a=this;this.logger.debug("Adding event listeners");
var b=this.instance.getTwitchTech();"T3"!==this.props.enableSvsPlayer&&this.instance.on("requestplay",function(){a.logVideoJsEventFired("requestplay");a.onRequestplay()});this.instance.on("ended",function(){a.logVideoJsEventFired("ended");a.onStop()});this.instance.on("error",function(){a.logVideoJsEventFired("error");a.onError()});this.instance.on("pause",function(){a.logVideoJsEventFired("pause");a.onPause()});this.instance.addTwitchTechEventListener(b.PlayerState.PLAYING,function(){a.logTwitchEventFired("TwitchTech.PlayerState.PLAYING");
a.firstTimePlay&&(a.stopSushiTimeMetrics("ttff"),a.firstTimePlay=!1);a.onPlay()});this.instance.addTwitchTechEventListener(b.PlayerState.ENDED,function(){a.logTwitchEventFired("TwitchTech.PlayerState.ENDED");a.onStop()});this.instance.addTwitchTechEventListener(b.PlayerEvent.REBUFFERING,function(){a.logTwitchEventFired("TwitchTech.PlayerEvent.REBUFFERING");a.props.emitBufferEmptyMetrics({},A.metricsEmitPriority.MEDIUM)});var c=new Promise(function(c){a.instance.addTwitchTechEventListener(b.PlayerState.READY,
function(){a.logTwitchEventFired("TwitchTech.PlayerState.READY");c()})});return this.instance.addTwitchTechEventListener(b.PlayerEvent.ERROR,function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.type,b=b.source;a.logTwitchEventFired("Twitch.Analytics.VIDEO_ERROR",{type:c,source:b});a.props.emitErrorMetrics({STRING_PAYLOAD:c,JSON_PAYLOAD:{source:b}},A.metricsEmitPriority.MEDIUM)}),this.instance.addTwitchTechEventListener(b.PlayerEvent.PLAYBACK_BLOCKED,function(){a.logTwitchEventFired("TwitchTech.PlayerEvent.PLAYBACK_BLOCKED");
a.props.emitPlaybackBlockedMetrics({},A.metricsEmitPriority.MEDIUM);(0,p.callFunction)(a.props.callbacks.onPlaybackBlocked)}),this.instance.addTwitchTechEventListener(b.MetadataEvent.CAPTION,function(){return a.props.setClosedCaptionContent((0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).text)}),m.default.$(r).bind("orientationchange resize",this.resize),c}},{key:"resize",value:function(){var a=m.default.$(this.videoDom).width();this.props.setPlayerWidth(a)}},{key:"onPlayerInitialized",
value:function(){this.instance&&(this.instance.enableTwitchPlugins(),this.callVideoJsApi("setLiveMaxLatency",30),this.callVideoJsApi("setAutoSwitchQuality",!0),this.addEventListeners(),this.checkAndSetVideoSrc(),(0,p.callFunction)(this.props.callbacks.onInit))}},{key:"componentDidMount",value:function(){var a=this;this.startSushiTimeMetrics("ttff");var b=void 0,b="T1"===this.props.enableSvsPlayer?this.initWithBrila():this.initWithVideoJs();this.initialized=b.then(this.onPlayerInitialized).catch(x.guardRejection);
this.resize();this.props.enableSyncSvsApiCalls&&(this.initialized=this.initialized.then(function(){return new Promise(function(b){a.logger.debug("Initialized");a.setState({initialized:!0},b)})}))}},{key:"componentDidUpdate",value:function(){this.checkAndSetVideoSrc();this.checkAndSetControls()}},{key:"componentWillUnmount",value:function(){if(this.stopHeartbeat(),this.instance){if(this.instance.off(),"T1"===this.props.enableSvsPlayer){var a=this.instance&&this.instance.brilaMetrics();a&&"function"==
typeof a.dispose&&a.dispose()}this.instance.dispose()}}},{key:"render",value:function(){var a=this;return h.default.createElement("div",{className:"amznlv-react-svs-vjs-player"},h.default.createElement("div",{className:"amznlv-react-svs-vjs-player-video",ref:function(b){a.videoDom=b},dangerouslySetInnerHTML:{__html:'\n          \x3cvideo id\x3d"'+this.videoDomId+'" class\x3d"video-js vjs-fill"/\x3e\n        '}}))}},{key:"videoDomId",get:function(){return"amznlv-react-svs-vjs-player-video-"+this.props.id}},
{key:"videoSrc",get:function(){var a=this.props.videoSourceUrl;if(a)return a;var a=this.videoMetadata,b=a.metadata,c=(b=void 0===b?{}:b).twitchCustomerId,d=b.twitchContentId,e=b.twitchChannelId,f=b.videoId,b=b.src;switch(a.videoStack){case "LVS_TWITCH":return"https://usher.ttvnw.net/api/lvs/hls/lvs."+c+"."+d+".m3u8?allow_source\x3dtrue\x26player_backend\x3dmediaplayer";case "PUBLIC_TWITCH":return"https://www.twitch.tv/"+e;case "PUBLIC_TWITCH_VIDEO":return"https://www.twitch.tv/videos/"+f;case "CUSTOM_SRC":return b}}},
{key:"videoMetadata",get:function(){if(q.default.isInternal())try{var a=JSON.parse((0,p.getQueryParameter)(r.location.href,"videoMetadataOverride"));if(a)return a}catch(b){this.logger.error("Error parsing video metadat override.")}return this.props.videoMetadata}},{key:"videojsConfig",get:function(){var a=this.props;return{techOrder:[y.default.TWITCH_TECH_NAME],loadingSpinner:!1,muted:a.muted,autoplay:a.autoPlay,controls:!a.isLive,poster:a.slateImageUrl,controlBar:{fullscreenToggle:!1,playbackRateMenuButton:!1,
subsCapsButton:!1},playsinline:!0}}}]),c}();a.propTypes={id:e.default.string.isRequired,slateImageUrl:e.default.string.isRequired,errorSlateImageUrl:e.default.string,isLive:e.default.bool,videoMetadata:e.default.object,callbacks:e.default.object,setClosedCaptionContent:e.default.func.isRequired,setPlayerWidth:e.default.func.isRequired,emitMetrics:e.default.func.isRequired,emitVideoPlayHeartbeatMetrics:e.default.func.isRequired,emitBufferEmptyMetrics:e.default.func.isRequired,emitErrorMetrics:e.default.func.isRequired,
emitPlaybackBlockedMetrics:e.default.func.isRequired,emitMutedOrUmmutedMetric:e.default.func.isRequired,enableSvsPlayer:e.default.string.isRequired,enableSyncSvsApiCalls:e.default.bool,patchVideoJs:e.default.string,patchVideoJsEvents:e.default.string,patchTwitchTech:e.default.string,upgradeSvsPlayer:e.default.bool,videoSourceUrl:e.default.string,showControls:e.default.bool.isRequired};a.defaultProps={errorSlateImageUrl:void 0,isLive:!1,videoMetadata:{},callbacks:{},enableSyncSvsApiCalls:!1,patchVideoJs:void 0,
patchVideoJsEvents:void 0,patchTwitchTech:void 0,upgradeSvsPlayer:!1,videoSourceUrl:""};a=(0,k.connect)(function(a){return{patchVideoJs:(0,p.getNestedValue)(a,"weblab.patchVideoJs"),patchVideoJsEvents:(0,p.getNestedValue)(a,"weblab.patchVideoJsEvents"),patchTwitchTech:(0,p.getNestedValue)(a,"weblab.patchTwitchTech"),upgradeSvsPlayer:(0,p.isWeblabEnabled)((0,p.getNestedValue)(a,"weblab.upgradeSvsPlayer"))}},void 0,void 0,{withRef:!0})(a);f.default=(0,d.enableSushiMetrics)("twitchPlayer",function(){return{PROMOTED_ITEM_ID:B.default.getHightlightedAsin()}},
function(a){return{emitBufferEmptyMetrics:function(){return a({EVENT_TYPE:"bufferEmpty"},A.metricsEmitPriority.MEDIUM)},emitVideoPlayHeartbeatMetrics:function(){return a({EVENT_TYPE:"minWatched"},A.metricsEmitPriority.HIGH)},emitPlaybackBlockedMetrics:function(){return a({EVENT_TYPE:"playbackBlocked"},A.metricsEmitPriority.MEDIUM)},emitCloseCaptionMetrics:function(b){return a({EVENT_TYPE:"click",EVENT_TRIGGER_TYPE:b?"enableClosedCaption":"disableClosedCaption"},A.metricsEmitPriority.LOW)},emitMutedOrUmmutedMetric:function(b,
c){return a({EVENT_TYPE:b?"playerMuted":"playerUnmuted",EVENT_TRIGGER_TYPE:c},A.metricsEmitPriority.HIGH)}}})(a)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a){return a&&a.__esModule?a:{default:a}}(a(0));f.default=function(){return c.default.createElement("div",{className:"amznlv-react-live-badge-logo"}," LIVE ")}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",
{className:"amznlv-react-live-badge-viewers"},g.default.createElement("div",{className:"amznlv-react-live-badge-viewers-inner"},g.default.createElement("img",{src:a.playerViewIcon,alt:""}),g.default.createElement("span",{className:"amznlv-react-player-live-badge-viewers-inner-number"},a.liveViewers)))};a.propTypes={liveViewers:d.default.string.isRequired,playerViewIcon:d.default.string};a.defaultProps={playerViewIcon:void 0};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});
f.getLiveBadgeType=void 0;var c=a(171),g=function(a){return a&&a.__esModule?a:{default:a}}(a(2));d={};f.getLiveBadgeType=d.getLiveBadgeType=function(a){var d=a.weblab&&g.default.isWeblabEnabled(a.weblab.liveBadgeViewersDisplay),d=(0,c.fromWeblabOverride)(d),f;if((f=(f=a.playlist||{},f.data)&&f.data.playlist&&f.data.playlist[0]&&f.data.playlist[0].showFeatureGroup)&&"INTEGRATION_TEST"===f.toUpperCase())return d;a=a["widget-options"]||{};return(0,c.fromWidgetOptionOverride)(d,a.livebadge)};f.default=
d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.LiveBadge=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(1)),e=a(0),h=c(e);d=a(3);var k=a(327),l=a(171),m=a(2),n=c(a(6)),p=a(4),q=c(a(326)),t=c(a(325));a={isLive:b.default.bool,
liveViewers:b.default.number,liveBadgeType:b.default.string,onMouseEnter:b.default.func,playerViewIcon:b.default.string};b=f.LiveBadge=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;a=(b.__proto__||Object.getPrototypeOf(b)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={timeUp:!1},a}return function(a,b){if("function"!=
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.Component),g(b,[{key:"componentWillReceiveProps",value:function(a){var b=this,c=this.props.isLive;a.isLive?c||(0,m.setTimeout)(function(){b.setState({timeUp:!0})},3E3):this.setState({timeUp:!1})}},{key:"numberConvert",
value:function(a){if(!Number.isInteger(a)||0>=a)return"1";for(var b=0;1E3<=a;)a/=1E3,b+=1;return 10>a?0==(a=a.toFixed(1))-Math.floor(a)&&(a=Math.round(a)):a=Math.round(a),a.toString()+["","K","M","B"][b]}},{key:"calWidth",value:function(a){return-1!==a.indexOf(".")?45+9*(a.length-1)+"px":40+9*a.length+"px"}},{key:"badgeResize",value:function(a){var b=document.getElementById("amznlv-react-live-badge");b&&(b.style.width=a)}},{key:"badgeSelector",value:function(){var a=this.props,b=a.liveBadgeType,c=
a.liveViewers,d=a.playerViewIcon,e=this.state.timeUp;return a.isLive&&(0,l.isLiveBadgeEnable)(b)?e&&(0,l.isLiveViewerBadgeEnable)(b)?(a=this.numberConvert(c),this.badgeResize(this.calWidth(a)),h.default.createElement(q.default,{liveViewers:a,playerViewIcon:d})):(this.badgeResize("48px"),h.default.createElement(t.default,null)):(this.badgeResize("0px"),h.default.createElement("div",null))}},{key:"render",value:function(){var a=this.props.onMouseEnter,a=(0,p.guardErrorWrapper)(a);return h.default.createElement("div",
{id:"amznlv-react-live-badge",className:this.displayClassname,onMouseEnter:a},this.badgeSelector())}},{key:"displayClassname",get:function(){return n.default.isDeviceMobile()?"mobile":""}}]),b}();b.propTypes=a;b.defaultProps={isLive:!1,liveViewers:0,liveBadgeType:void 0,onMouseEnter:void 0,playerViewIcon:void 0};d=(0,d.connect)(function(a,b){var c=a.playlist.data;if(!c.asinToBroadcastMap||void 0===c.asinToBroadcastMap[b.asin])return{};b=c.playlist[c.asinToBroadcastMap[b.asin]];return{isLive:b.liveBadgeEnabled,
liveViewers:b.liveViewers,playerViewIcon:a.mediaclient.data.playerViewIcon,liveBadgeType:(0,k.getLiveBadgeType)(a)}})(b);f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.LivePlayer=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),
d&&a(b,d),b}}(),b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=c(a(1)),h=c(a(0)),k=c(a(12)),l=c(a(13)),m=c(a(9)),n=a(15),p=a(2),q=c(a(44)),t=c(a(172)),u=a(6),v=c(a(328)),w=c(a(24)),y=c(a(128)),B=c(a(43)),A=c(a(324)),x=c(a(169)),C=c(a(315)),D=c(a(164)),F=c(a(163)),H=c(a(86)),E=c(a(103)),G=c(a(5)),I=c(a(314)),V=c(a(313)),R=c(a(309)),z=c(a(162)),
N=c(a(161)),S=a(160),W=c(a(159)),M=c(a(168)),L=c(a(307)),Q=c(a(25)),O=c(a(306));d=a(23);var J=a(84),P=a(4),K=a(87),U=a(21);a={slateImageUrl:e.default.string.isRequired,errorSlateImageUrl:e.default.string,autoPlay:e.default.bool,muted:e.default.bool,closedCaptionEnabled:e.default.bool,isClosedCaptionAvailable:e.default.bool,id:e.default.string,asin:e.default.string,title:e.default.string,startTime:e.default.number,broadcastStatus:e.default.oneOf(Object.keys(w.default)),volume:e.default.number,pinnedMessage:e.default.object,
followMeDockState:e.default.oneOf(Object.keys(B.default)),playerControl:e.default.oneOf(Object.keys(I.default)),underControlPanelConfig:function(a,c){if(a=a[c]){if(!Array.isArray(a))return Error("underControlPanelConfig has to be an array.");for(c=0;c<a.length;c+=1){var d=a[c];if(!d.content)return Error("underControlPanelConfig content cannot be empty.");if(d.containerCss&&"object"!==b(d.containerCss))return Error("underControlPanelConfig containerCss has to be an object.")}}},setAudio:e.default.func,
setClosedCaption:e.default.func,setClosedCaptionAvailable:e.default.func,setPlayerDomId:e.default.func,enableExpandablePlayer:e.default.bool,isClosedCaptionEnableByDefault:e.default.bool,closedCaptionOverlayEnable:e.default.bool,setPlayerExpanded:e.default.func,enableMShopPausePlayerHandler:e.default.bool,displayUnmuteEverywhereOverlay:e.default.bool,isViewportPlayer:e.default.bool,setPlayerStatus:e.default.func,channelTitle:e.default.string,showControlOverlayOnPlay:e.default.bool.isRequired,showControlOverlayOnUndock:e.default.bool.isRequired,
setPlayerPlaying:e.default.func,isAskQuestionEnabled:e.default.bool,isPlayPauseEnabled:e.default.bool,isLive:e.default.bool,videoMetadata:e.default.object,enableSvsPlayer:e.default.string,setShouldDisplayUnmuteAnywhereOverlay:e.default.func,enableMobileFullscreen:e.default.bool,enableIframeFullscreen:e.default.bool,emitTwitchReadyMetric:e.default.func.isRequired,isChatEnabled:e.default.bool,enableSyncSvsApiCalls:e.default.bool,videoSourceUrl:e.default.string,liveToVodAutoPlay:e.default.bool.isRequired};
e=function(){};B={errorSlateImageUrl:"",autoPlay:!0,muted:!1,closedCaptionEnabled:!1,isClosedCaptionAvailable:!1,id:"",asin:"",title:"",startTime:"",broadcastStatus:w.default.UNKNOWN,volume:1,pinnedMessage:{},followMeDockState:B.default.INITIAL,playerControl:I.default.STOP,underControlPanelConfig:[],setAudio:e,setClosedCaption:e,setClosedCaptionAvailable:e,setPlayerDomId:e,enableExpandablePlayer:!1,isClosedCaptionEnableByDefault:!1,closedCaptionOverlayEnable:!1,setPlayerExpanded:e,enableMShopPausePlayerHandler:!1,
displayUnmuteEverywhereOverlay:!1,isViewportPlayer:!1,setPlayerStatus:e,channelTitle:"",setPlayerPlaying:e,isAskQuestionEnabled:!1,isPlayPauseEnabled:!1,isLive:!1,videoMetadata:{},setShouldDisplayUnmuteAnywhereOverlay:e,enableMobileFullscreen:!1,enableIframeFullscreen:!1,isChatEnabled:void 0,enableSyncSvsApiCalls:!1,videoSourceUrl:"",enableSvsPlayer:""};e=f.LivePlayer=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return a.iosClosedCaptionAlert=function(a){(0,p.isIOSDevice)()&&(a=a?m.default.translate("amazonlive-portal-ios-turn-on-closed-caption-alert-text","To turn on close captions, go to Settings \x3e General \x3e Accessibility \x3e Subtitles \x26 Captioning on your device."):m.default.translate("amazonlive-portal-ios-turn-off-closed-caption-alert-text","To turn off close captions, go to Settings \x3e General \x3e Accessibility \x3e Subtitles \x26 Captioning on your device."),
a=l.default.A.$("\x3cdiv/\x3e").html(a).text(),alert(a))},a.renderAskQuestion=function(){return Q.default.getAskQuestionWidget()},a.uuid=b.generateId(),a.logger=new G.default("LivePlayer"),a.isLiveToVod=a.isLive(),a.state={playing:!1,isControlOverlayActive:!1,loading:!1},a.setState=a.setState.bind(a),a.onPlayClicked=(0,P.guardErrorWrapper)(a.onPlayClicked.bind(a)),a.onStopClicked=(0,P.guardErrorWrapper)(a.onStopClicked.bind(a)),a.play=a.play.bind(a),a.stop=a.stop.bind(a),a.showControlOverlay=(0,P.guardErrorWrapper)(a.showControlOverlay.bind(a)),
a.hideControlOverlay=a.hideControlOverlay.bind(a),a.setVolume=a.setVolume.bind(a),a.toggleMute=a.toggleMute.bind(a),a.toggleClosedCaption=a.toggleClosedCaption.bind(a),a.setClosedCaptionContent=a.setClosedCaptionContent.bind(a),a.setPlayerWidth=a.setPlayerWidth.bind(a),a.setExpandedPlayerDimension=(0,P.guardErrorWrapper)(a.setExpandedPlayerDimension.bind(a)),a.onExpandChange=a.onExpandChange.bind(a),a.collapsePlayer=a.collapsePlayer.bind(a),a.onExpandExpandableContainer=a.onExpandExpandableContainer.bind(a),
a.onCollapseExpandableContainer=a.onCollapseExpandableContainer.bind(a),a.restoreDockedPlayer=a.restoreDockedPlayer.bind(a),a.onDockedPlayer=a.onDockedPlayer.bind(a),a.onDismissDockedPlayer=a.onDismissDockedPlayer.bind(a),a.dockPlayer=a.dockPlayer.bind(a),a.setPlayerDiv=a.setPlayerDiv.bind(a),a.setPlayButtonRef=a.setPlayButtonRef.bind(a),a.setPlayerRef=a.setPlayerRef.bind(a),a.setExpandableContainerRef=a.setExpandableContainerRef.bind(a),a.setFollowMeWebWrapperRef=a.setFollowMeWebWrapperRef.bind(a),
a.setContainerDomRef=a.setContainerDomRef.bind(a),a.setControlActivateRef=a.setControlActivateRef.bind(a),a.expandPlayer=a.expandPlayer.bind(a),a.onPlayerInitialized=a.onPlayerInitialized.bind(a),a.onPlayerTerminate=a.onPlayerTerminate.bind(a),a.autoPlay=a.autoPlay.bind(a),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,h.default.Component),g(b,null,[{key:"generateId",value:function(){b.nextId=b.nextId||0;var a=b.nextId;return b.nextId+=1,a.toString()}}]),g(b,[{key:"componentWillMount",value:function(){q.default.startTimer("AmazonLiveTwitchPlayer:Initialize")}},{key:"componentDidMount",value:function(){var a=this;if(this.onPlayerRendered(),this.props.enableSyncSvsApiCalls)return this.logger.debug("Synchronous svs API call is enabled. Waiting for player initialization."),
Promise.resolve(this.player.initialized).then(this.onPlayerInitialized).then(function(){a.setState({playerInitialized:!0})});this.onPlayerInitialized()}},{key:"componentWillReceiveProps",value:function(a){var b=this.props,c=b.followMeDockState,d=b.playerControl,e=b.muted,f=b.volume,b=b.closedCaptionEnabled;if(this.followMeStateHandler&&this.followMeStateHandler.onStateChange(c,a.followMeDockState),a.playerControl!==d)switch(a.playerControl){case I.default.PLAY:this.play();break;case I.default.STOP:this.stop()}a.muted!==
e&&this.player.setMuted(a.muted);a.volume!==f&&this.player.setVolume(a.volume);a.closedCaptionEnabled!==b&&(this.iosClosedCaptionAlert(a.closedCaptionEnabled),this.player.setClosedCaptionStatus(a.closedCaptionEnabled),this.player.setClosedCaptionMetric(a.closedCaptionEnabled))}},{key:"componentDidUpdate",value:function(a,b){var c=this.props,d=c.broadcastStatus,e=c.showControlOverlayOnPlay,f=c.videoSourceUrl,c=c.liveToVodAutoPlay,g=this.state,k=g.expanded,h=g.playing;d!==a.broadcastStatus&&this.handleBroadcastStatus(d,
a.broadcastStatus);this.updateVolumeIconVisibility();this.updateClosedCaptionVisibility();var g=!b.playing&&h,h=b.playing&&!h,m="LIVE"!==a.broadcastStatus&&"LIVE"===d&&n.playerConfig.showControlOverlayOnSwitchToLive,d="POST_LIVE"===d&&"LIVE"===a.broadcastStatus;(0,u.isDeviceMobile)()?m||d||g&&e?this.showControlOverlay():g&&this.hideControlOverlay():g?this.hideControlOverlay():d&&(this.followMeWebWrapper&&this.followMeWebWrapper.getWrappedInstance().dismiss(),this.showControlOverlay());f&&h&&this.showControlOverlay();
!a.videoSourceUrl&&f&&c&&this.autoPlay();!b.expanded&&k&&this.setExpandedPlayerDimension();this.updatePlayerExpand(a)}},{key:"componentWillUnmount",value:function(){this.onPlayerTerminate();l.default.$(r).unbind("resize",this.setExpandedPlayerDimension);this.props.enableIframeFullscreen&&this.state.expanded&&n.playerConfig.collapseOnUnmount&&this.collapsePlayer(!1)}},{key:"onCollapseExpandableContainer",value:function(){this.onExpandChange(!1);this.isPlayerWithinViewport(10)||this.isDocked||this.stop()}},
{key:"onDismissDockedPlayer",value:function(){this.isDocked=!1;this.isPlayerWithinViewport(10)||this.stop()}},{key:"onDockedPlayer",value:function(){this.isDocked=!0;this.hideControlOverlay();this.props.setShouldDisplayUnmuteAnywhereOverlay(!1)}},{key:"onExpandChange",value:function(a){var b=this,c=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],d=this.state.expanded,e=this.props,f=e.setPlayerExpanded,e=e.id,g=this.setState;(0,S.onExpandChange)({expanded:d,setPlayerExpanded:f,shouldExpand:a,
emitMetric:c,id:e,setState:g,onEmitMetrics:function(){(0,p.setTimeout)(b.player.resize.bind(b.player),0)}})}},{key:"onExpandExpandableContainer",value:function(){this.onExpandChange(!0)}},{key:"onPlayerRendered",value:function(){var a=this.props,b=a.broadcastStatus,c=a.setPlayerDomId,d=a.isLive;a.videoSourceUrl;this.registerControlOverlayEvents();this.handleBroadcastStatus(b,w.default.UNKNOWN);c(this.getVideoDomId());l.default.$(r).bind("resize",this.setExpandedPlayerDimension);d||this.showControlOverlay()}},
{key:"onPlayerInitialized",value:function(){this.initializeViewportHandler();this.visibilityHandler=new F.default(this,this.props.enableMShopPausePlayerHandler,this.props.enableSyncSvsApiCalls);this.visibilityHandler.register()}},{key:"onPlayerTerminate",value:function(){this.stopViewportHandler();this.stopViewportAreaTimer();this.visibilityHandler&&this.visibilityHandler.unregister()}},{key:"onPlayClicked",value:function(){this.stoppedByUser=!1;this.play()}},{key:"onStopClicked",value:function(){this.stoppedByUser=
!0;this.stop()}},{key:"getBroadcastStatus",value:function(){return this.props.broadcastStatus}},{key:"getCallbacks",value:function(){var a=this;return{onInit:function(){a.logger.debug("onInit");l.default.$(a.containerDom).attr("data-playing","stopped");q.default.endTimer("AmazonLiveTwitchPlayer:Initialize");a.props.emitTwitchReadyMetric()},onPlay:function(){a.logger.debug("onPlay");l.default.$(a.containerDom).attr("data-playing","playing");a.setVolume(a.props.volume);a.setState({playing:!0,loading:!1});
a.props.setPlayerPlaying(!0);clearTimeout(a.retryAutoPlayTimeout);a.emitVideoPlayInViewportMetrics()},onPause:function(){a.showControlOverlay()},onStop:function(){a.logger.debug("onStop");l.default.$(a.containerDom).attr("data-playing","stopped");a.setState({playing:!1,loading:!1});a.props.setPlayerPlaying(!1);a.videoStopTimeout&&(a.props.enableSyncSvsApiCalls||a.stop(),a.logger.debug("Video stopped, reset videoStopTimeout"),clearTimeout(a.videoStopTimeout),a.videoStopTimeout=null)},onError:function(){a.logger.debug("onError event handler");
l.default.$(a.containerDom).attr("data-playing","stopped");a.setState({playing:!1,loading:!1});a.props.setPlayerPlaying(!1);a.stopViewportHandler()},onMute:function(){a.logger.debug("muted: "+a.props.muted);l.default.$(a.containerDom).attr("data-muted",a.props.muted)},onClosedCaptionEnabled:function(){a.logger.debug("Closed Caption is enabled: "+a.props.closedCaptionEnabled);l.default.$(a.containerDom).attr("data-closed-caption-enabled",a.props.closedCaptionEnabled)},onPlaybackBlocked:function(){a.logger.debug("Autoplay is blocked by browser");
a.playButton&&a.playButton.stop(!0);clearTimeout(a.retryAutoPlayTimeout)}}}},{key:"getUuid",value:function(){return this.uuid}},{key:"getVideoCssClassName",value:function(){var a="amznlv-react-player";return this.followMeStateHandler&&(a+=" "+this.followMeStateHandler.getZoomedClassName(this.props.followMeDockState)),this.state.expanded&&(a+=" expanded"),a}},{key:"getVideoDomId",value:function(){return"amznlv-react-player-"+this.uuid}},{key:"setClosedCaptionContent",value:function(a){var b=this.props,
c=b.setClosedCaptionAvailable,d=b.closedCaptionEnabled;b.isClosedCaptionAvailable||c(!0);d&&this.setState({captionContent:a})}},{key:"setContainerDomRef",value:function(a){this.containerDom=a}},{key:"setControlActivateRef",value:function(a){this.controlActivate=a}},{key:"setExpandableContainerRef",value:function(a){this.expandableContainer=a&&a.getWrappedInstance()}},{key:"setExpandedPlayerDimension",value:function(){(0,S.setExpandablePlayerDimension)(this.state.expanded,this.props.enableIframeFullscreen,
this.setState)}},{key:"setFollowMeWebWrapperRef",value:function(a){this.followMeWebWrapper=a}},{key:"setPlayButtonRef",value:function(a){this.playButton=a}},{key:"setPlayerDiv",value:function(a){this.playerDiv=a}},{key:"setPlayerRef",value:function(a){this.playerRef=a}},{key:"setPlayerWidth",value:function(a){this.setState({playerWidth:a})}},{key:"setVolume",value:function(a){this.props.setAudio(this.props.muted,a)}},{key:"collapsePlayer",value:function(){var a=!(0<arguments.length&&void 0!==arguments[0])||
arguments[0],b=this.props,c=b.enableMobileFullscreen,d=b.enableIframeFullscreen,b=b.enableExpandablePlayer,e=this.expandableContainer,f=this.hideControlOverlay,g=this.onExpandChange,n=this.state.expanded;(0,S.collapsePlayer)({enableMobileFullscreen:c,enableIframeFullscreen:d,enableExpandablePlayer:b,expandableContainer:e,hideControlOverlay:f,expanded:n,onExpandChange:g,emitMetric:a})}},{key:"dockPlayer",value:function(){this.followMeWebWrapper&&this.followMeWebWrapper.getWrappedInstance().dock();
this.state.expanded&&this.expandableContainer.collapse()}},{key:"emitVideoPlayInViewportMetrics",value:function(){var a=this;this.startedVideoPlayInViewport||(this.startedVideoPlayInViewport=!0,this.viewportMonitorAreaTimer=new H.default(this.playerDiv,function(){a.logger.debug("In viewport metrics fired");E.default.emitVideoPlayInViewportMetric(a.props.id)},{targetTime:2E3}),this.viewportMonitorAreaTimer.start())}},{key:"expandPlayer",value:function(){var a=this.props,b=a.enableMobileFullscreen,
a=a.enableExpandablePlayer,c=this.expandableContainer,d=this.onExpandExpandableContainer;(0,S.expandPlayer)({enableMobileFullscreen:b,expandableContainer:c,onExpandExpandableContainer:d,enableExpandablePlayer:a,expanded:this.state.expanded})}},{key:"handleBroadcastStatus",value:function(a,b){var c=this,d=this.state.playing,e=this.props.enableSyncSvsApiCalls;switch(w.default[a]||(a=w.default.UNKNOWN),a){case w.default.UNKNOWN:break;case w.default.LIVE:if(this.shouldAutoPlay()){if(e)return this.logger.debug("Wait for player ready, then autoplay"),
Promise.resolve(this.player.initialized).then(this.autoPlay);this.autoPlay()}this.videoStopTimeout&&(this.logger.debug("Broadcast status changed to LIVE. Clear videoStopTimeout()"),clearTimeout(this.videoStopTimeout),this.videoStopTimeout=null);break;default:b===w.default.LIVE&&d?(b=this.player.getBroadcastLatency(),this.logger.debug("Broadcast status changed to "+a+". Will stop video playing within "+b+" ms."),this.videoStopTimeout=(0,p.setTimeout)(function(){c.logger.debug("Time up, but video is still playing. Calling stop()");
c.stop()},b)):this.shouldAutoPlay()&&!d&&this.autoPlay()}}},{key:"hideControlOverlay",value:function(){var a=this.state,b=a.isControlOverlayActive,a=a.playing;b&&a?(b&&this.logger.debug("hiding control overlay"),this.setState({isControlOverlayActive:!1}),this.updateVolumeIconVisibility(),this.updateClosedCaptionVisibility()):this.logger.debug("not doing hiding, this.state.isControlOverlayActive \x3d "+b+"; this.state.playing \x3d "+a)}},{key:"initializeViewportHandler",value:function(){var a=this;
this.props.isViewportPlayer&&!this.isViewportMonitored&&(this.isViewportMonitored=!0,this.viewportHandler=new W.default(this.playerDiv,function(){a.wrappedPlayViewportCallback()},function(){a.wrappedStopViewportCallback()},200,200),this.viewportHandler.start())}},{key:"autoPlay",value:function(){var a=this,b=this.state.playing,c=this.isLive();this.retryAutoPlay=0;(function Y(){a.logger.debug("[autoPlay] trying to play for "+a.retryAutoPlay+"th time");a.isLive()||!c?b?a.logger.debug("[autoPlay] the player is now playing, stop trying"):
3<a.retryAutoPlay?a.logger.debug("[autoPlay] retried 3 times, stop trying"):(a.playButton&&a.playButton.play(!0),a.retryAutoPlay+=1,a.retryAutoPlayTimeout=(0,p.setTimeout)(Y,15E3),q.default.addCount("AmazonLivePlayer:TryAutoPlay")):a.logger.debug("[autoPlay] broadcastStatus is not LIVE anymore, stop trying")})()}},{key:"isLive",value:function(){return this.props.broadcastStatus===w.default.LIVE}},{key:"isVod",value:function(){return""!==this.props.videoSourceUrl&&!this.isLive()}},{key:"isPlayerWithinViewport",
value:function(){return t.default.isWithinViewport(this.expandableContainer.dom,0<arguments.length&&void 0!==arguments[0]?arguments[0]:100)}},{key:"isPlaying",value:function(){return this.state.playing}},{key:"mute",value:function(){this.props.setAudio(!0,this.props.volume)}},{key:"play",value:function(){this.player&&(this.logger.debug("Starting to play."),this.setState({loading:!0}),this.player.play())}},{key:"registerControlOverlayEvents",value:function(){var a=this;(0,u.isDeviceMobile)()?l.default.$(this.controlActivate).click(function(b){!a.state.expanded&&
n.playerConfig.expandOnInteraction&&a.expandPlayer();a.props.muted&&"LIVE"===a.props.broadcastStatus?a.toggleMute():a.showControlOverlay();b.preventDefault();b.stopPropagation()}):(l.default.$(".amazonlive-common .amazonlive-player-control-buttons").focusin(function(){a.showControlOverlay()}),l.default.$(".amazonlive-common .amazonlive-player-control-buttons").focusout(function(){a.hideControlOverlay()}),l.default.$(".amazonlive-common .play-button-container").focusin(function(){a.showControlOverlay()}),
l.default.$(".amazonlive-common .play-button-container").focusout(function(){a.hideControlOverlay()}),l.default.$(this.controlActivate).mouseenter(function(){a.showControlOverlay()}),l.default.$(this.controlActivate).mouseleave(function(){a.hideControlOverlay()}),l.default.$(".amazonlive-common .amznlv-react-player-under-control-panel").mouseenter(function(){a.showControlOverlay()}),l.default.$(".amazonlive-common .amznlv-react-player-under-control-panel").mouseleave(function(){a.hideControlOverlay()}),
l.default.$(".amazonlive-common #va-chat-input-slate").mouseenter(function(){a.hideControlOverlay()}),l.default.$(".amazonlive-common #va-chat-input-slate").mouseleave(function(){a.showControlOverlay()}))}},{key:"reload",value:function(){this.player.reload()}},{key:"restoreDockedPlayer",value:function(){this.props.enableExpandablePlayer&&!(0,u.isDeviceMobile)()&&this.expandableContainer.expand();this.isDocked=!1}},{key:"shouldAutoPlay",value:function(){return this.props.autoPlay&&!this.stoppedByViewportMonitor}},
{key:"showControlOverlay",value:function(){this.isDocked?this.logger.debug("control overlay is disabled"):(this.state.isControlOverlayActive||this.logger.debug("showing control overlay"),this.setState({isControlOverlayActive:!0}),this.updateVolumeIconVisibility(),this.updateClosedCaptionVisibility(),(0,u.isDeviceMobile)()&&(clearTimeout(this.hideControlOverlayTimeout),this.hideControlOverlayTimeout=(0,p.setTimeout)(this.hideControlOverlay,2E3)),this.isVod()&&this.player.displayControlBar())}},{key:"stop",
value:function(){this.player&&(this.logger.debug("Stopping."),this.player.stop(),this.props.setPlayerStatus(y.default.STOPPED))}},{key:"stopViewportAreaTimer",value:function(){this.viewportMonitorAreaTimer&&this.viewportMonitorAreaTimer.stop()}},{key:"stopViewportHandler",value:function(){this.isViewportMonitored&&(this.isViewportMonitored=!1,this.viewportHandler.stop())}},{key:"toggleClosedCaption",value:function(){this.props.setClosedCaption(!this.props.closedCaptionEnabled)}},{key:"toggleMute",
value:function(){this.player.emitMuteMetrics(!this.props.muted,"userClick");this.props.setAudio(!this.props.muted,this.props.volume)}},{key:"updateClosedCaptionVisibility",value:function(){(0,u.isDeviceMobile)();l.default.$(".amazonlive-common .amznlv-react-closed-caption-control-button").toggleClass("show",this.state.isControlOverlayActive&&"LIVE"===this.props.broadcastStatus)}},{key:"updatePlayerExpand",value:function(a){if(this.props.enableIframeFullscreen&&this.state.expanded){var b=a.isChatEnabled&&
!this.props.isChatEnabled;("POST_LIVE"===this.props.broadcastStatus&&"LIVE"===a.broadcastStatus&&!this.props.isChatEnabled||b&&"POST_LIVE"===this.props.broadcastStatus)&&n.playerConfig.collapseOnStreamEnds&&this.collapsePlayer(!1)}}},{key:"updateVolumeIconVisibility",value:function(){(0,u.isDeviceMobile)()?l.default.$(".amazonlive-common .amznlv-react-player-volume-button").toggleClass("show","LIVE"===this.props.broadcastStatus&&this.props.muted):l.default.$(".amazonlive-common .amznlv-react-player-volume-button").toggleClass("show",
this.state.isControlOverlayActive||"LIVE"===this.props.broadcastStatus&&this.props.muted)}},{key:"wrappedPlayViewportCallback",value:function(){this.props.broadcastStatus!==w.default.LIVE||this.stoppedByUser||(this.stoppedByViewportMonitor=!1,this.setState({loading:!0}),this.play())}},{key:"wrappedStopViewportCallback",value:function(){this.props.muted&&(0,J.isViewportVisible)()&&(this.stoppedByViewportMonitor=!0,this.stop())}},{key:"renderChatOverlayContent",value:function(){for(var a=(0,k.default)({"amznlv-react-player-under-control-panel":!0,
"with-pinned-message":this.isLive()&&this.props.pinnedMessage.message}),b=[],c=0;c<this.props.underControlPanelConfig.length;c+=1)b.push(h.default.createElement("div",{className:a,key:"amznlv-react-player-under-control-panel"+c,style:this.props.underControlPanelConfig[c].containerCss},this.props.underControlPanelConfig[c].content));return b}},{key:"renderClosedCaptionOverlay",value:function(){return h.default.createElement(C.default,{playerWidth:this.state.playerWidth,closedCaptionContent:this.state.captionContent?
this.state.captionContent:"",isPlayerUnderControlOverlayEnabled:0<this.props.underControlPanelConfig.length,isPlayerPlaying:this.state.playing})}},{key:"renderControlOverlay",value:function(){if(!this.isDocked)return h.default.createElement(x.default,{title:this.props.title,isLive:this.isLive(),isActive:this.state.isControlOverlayActive,volume:this.props.volume,setVolume:this.setVolume,hideControlOverlay:this.hideControlOverlay,showControlOverlay:this.showControlOverlay,toggleMute:this.toggleMute,
toggleClosedCaption:this.toggleClosedCaption,pinnedMessage:this.props.pinnedMessage,expandPlayer:this.expandPlayer,collapsePlayer:this.collapsePlayer,channelTitle:this.props.channelTitle,broadcastStatus:this.props.broadcastStatus,startTime:this.props.startTime,followMeDockState:this.props.followMeDockState,playing:this.state.playing,dockPlayer:this.dockPlayer,isVod:this.isVod()})}},{key:"renderControlOverlayActivate",value:function(){return h.default.createElement("div",{className:(0,k.default)("amznlv-react-player-control-activate",
{"videojs-control-activate":this.isVod()}),ref:this.setControlActivateRef})}},{key:"renderExpandedContent",value:function(){var a=this.props.enableMobileFullscreen&&(0,u.isDeviceMobile)()?"100%":this.state.expandedPlayerWidth+"px";return h.default.createElement(z.default,{width:a})}},{key:"renderLiveBadge",value:function(){return h.default.createElement(v.default,{onMouseEnter:this.showControlOverlay,asin:this.props.asin})}},{key:"renderPlayButton",value:function(){var a=this.props,b=a.id,c=this.state,
d=c.playing,c=c.loading;return a.isPlayPauseEnabled&&(this.isLive()||this.isVod())?h.default.createElement(D.default,{broadcastId:b,showButton:this.showPlayButton,play:this.onPlayClicked,stop:this.onStopClicked,isPlaying:d,isLoading:c,onMouseEnter:this.showControlOverlay,isLive:this.isLive(),ref:this.setPlayButtonRef}):h.default.createElement("div",null)}},{key:"renderShoppingNotification",value:function(){var a=this.state;return h.default.createElement(O.default,{playerWidth:a.playerWidth,isPlayerExpanded:a.expanded,
isPlayerPlaying:this.isPlaying(),isLive:this.isLive()})}},{key:"render",value:function(){var a=this.props,b=a.enableSvsPlayer,c=a.slateImageUrl,d=a.muted,e=a.isClosedCaptionEnableByDefault,f=a.enableExpandablePlayer,g=a.volume,k=a.closedCaptionOverlayEnable,m=a.closedCaptionEnabled,l=a.isAskQuestionEnabled,p=a.underControlPanelConfig,q=a.pinnedMessage,t=a.enableSyncSvsApiCalls,v=a.videoSourceUrl,w=this.state,B=w.expanded,x=w.expandedPlayerWidth,w=w.playing,a=h.default.createElement(A.default,{slateImageUrl:c,
errorSlateImageUrl:a.errorSlateImageUrl,videoMetadata:a.videoMetadata,id:a.id,ref:this.setPlayerRef,callbacks:this.getCallbacks(),muted:d,isLive:this.isLive(),isClosedCaptionEnableByDefault:e,closedCaptionOverlayEnable:k,setClosedCaptionContent:this.setClosedCaptionContent,setPlayerWidth:this.setPlayerWidth,enableSvsPlayer:b,enableSyncSvsApiCalls:t,videoSourceUrl:v,showControls:this.isVod()}),f=(0,u.isDeviceMobile)()||f&&!B&&this.expandableContainer;return h.default.createElement(N.default,{onExpand:this.onExpandExpandableContainer,
onCollapse:this.onCollapseExpandableContainer,ref:this.setExpandableContainerRef},h.default.createElement(R.default,{toggleMute:this.toggleMute,toggleExpand:this.expandPlayer,playing:w},h.default.createElement("div",{className:this.getVideoCssClassName(),id:this.getVideoDomId(),ref:this.setContainerDomRef,"data-muted":d,"data-volume":g,"data-closed-caption-enabled":m,"aria-label":"Player",style:{width:this.props.enableMobileFullscreen&&(0,u.isDeviceMobile)()||n.playerConfig.expandOnInteraction||!B?
"100%":x+"px"}},h.default.createElement("div",{className:"amznlv-react-aspectratio"},h.default.createElement("div",{className:"amznlv-react-player-inner"},h.default.createElement(L.default,null),l&&this.renderAskQuestion(),p&&this.renderChatOverlayContent(),this.renderControlOverlay(),h.default.createElement(M.default,{onRestore:f?this.restoreDockedPlayer:void 0,ref:this.setFollowMeWebWrapperRef,onDismiss:this.onDismissDockedPlayer,onDocked:this.onDockedPlayer,toggleMute:this.toggleMute,placeholderBackgroundImageUrl:c},
this.renderPlayButton(),this.renderLiveBadge(),this.renderControlOverlayActivate(),h.default.createElement(V.default,{pinnedMessage:q,isLive:this.isLive(),playerWidth:this.state.playerWidth}),k&&m&&this.renderClosedCaptionOverlay(),h.default.createElement("div",{className:"amznlv-react-player-video-area",ref:this.setPlayerDiv},a)),this.renderShoppingNotification()))),B&&this.renderExpandedContent()))}},{key:"player",get:function(){return this.playerRef&&("function"==typeof this.playerRef.getWrappedInstance&&
this.playerRef.getWrappedInstance()||this.playerRef)}},{key:"showPlayButton",get:function(){var a=!this.props.displayUnmuteEverywhereOverlay&&this.state.isControlOverlayActive||!this.state.playing;return this.props.enableSyncSvsApiCalls?this.state.playerInitialized&&a||!1:a}}]),b}();e.propTypes=a;e.defaultProps=B;f.default=(0,d.enableSushiMetrics)("player",null,function(a){return{emitTwitchReadyMetric:function(){return a({EVENT_TYPE:"playerReady",INT_PAYLOAD:(0,K.getLatencyTimeFromHTMLPrint)(),STRING_PAYLOAD:"playerReadyLatency"},
U.metricsEmitPriority.MEDIUM)}}})(e)},,,,,,,,,,,,,,,,,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=(c(a(1)),c(a(0))),e=c(a(77)),h=c(a(6));d=function(a){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={},a.isAskQuestionLoaded=!1,a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"loadAskQuestionWidget",value:function(){var a=this;return this.state.AskQuestionComponent?b.default.createElement(this.state.AskQuestionComponent,{isDeviceMobile:h.default.isDeviceMobile()}):(this.isAskQuestionLoaded||(this.isAskQuestionLoaded=!0,e.default.loadAuiComponent("amazonlive-need-chat","amazonlive-ask-question").then(function(b){console.log("AskQuestionComponent loaded");
a.setState({AskQuestionComponent:b})})),b.default.createElement("div",{className:"amaznlv-ask-question-empty"}))}},{key:"render",value:function(){return this.loadAskQuestionWidget()}}]),c}();d.propTypes={};d.defaultProps={};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);
Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0));a=(c(a(81)),a(3));var e=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"render",value:function(){for(var a=[],c=0;c<this.props.skeletonLength;c++)a.push(b.default.createElement("div",{key:"skeleton-"+c,className:this.props.cardClassName}));return b.default.createElement("div",
{className:"carousel-skeleton"},b.default.createElement("div",{className:"carousel-skeleton-wrapper"},a))}}]),c}();e.propTypes={skeletonLength:d.default.number,cardClassName:d.default.string};e.defaultProps={skeletonLength:3,cardClassName:""};f.default=(0,a.connect)(function(a,b){a:switch(a["component-id"]){case "desktopFlexBanner":b="vertical-skeleton-card";break a;default:b="horizontal-skeleton-card"}return{cardClassName:b,skeletonLength:function(b){switch(a["component-id"]){case "mobileInlineShoppablePlayer":return 3;
case "desktopInlineShoppablePlayer":return 6;case "desktopFlexBanner":return 5;default:return 4}}()}})(e)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a){return a&&a.__esModule?a:{default:a}}(a(0));f.default=function(a){return{slickSettings:{customPaging:function(b){return b<a.loaded.length&&a.loaded[b]?c.default.createElement("a",null,c.default.createElement("img",{src:""+a.loaded[b].formattedImageUrl})):c.default.createElement("div",{className:"amazonlive-shopping-carousel-empty-product-dot"},
c.default.createElement("div",{className:"a-loading-static"},c.default.createElement("div",{className:"a-loading-static-inner"})))},touchMove:!1,variableWidth:!1,swipe:!1,swipeToSlide:!1,slidesToShow:1,centerMode:!1,centerPadding:"0",draggable:!1},increaseCardWidthForVariation:!1,cssLayout:"al-default-carousel-container-layout"}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=
c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(8)),h=c(a(6)),k=c(a(31));a={customTile:d.default.object.isRequired,details:d.default.object.isRequired,buttonType:d.default.string,status:d.default.string,isBadgeAvailable:d.default.bool,broadcastId:d.default.string};d=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"getButtonText",value:function(){return this.props.customTile.actionButtonText&&this.props.customTile.actionButtonText.substring(0,15)}},{key:"render",value:function(){var a=h.default.isDeviceMobile()?"small":"base";return b.default.createElement(k.default,{item:this.props.customTile,details:this.props.details,broadcastId:this.props.broadcastId,componentName:"customTileActionButton"},b.default.createElement(e.default.Button,{buttonType:this.props.buttonType,
status:this.props.status,spacing:"none",textAlign:"center",buttonSize:a,cssClass:"amazonlive-shopping-carousel-custom-tile-action-button"},this.getButtonText()))}}]),c}();d.propTypes=a;d.defaultProps={status:"normal",buttonType:"primary",isBadgeAvailable:!1};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.VerticalProductDetailsLayout=void 0;d=c(a(1));var g=c(a(0));a=a(27);d={text:d.default.element.isRequired,actionButton:d.default.element,
badge:d.default.element,infoLine:d.default.element,removeActionButton:d.default.bool};var b=f.VerticalProductDetailsLayout=function(a){return g.default.createElement("div",{className:"al-lo-carousel-custom-tile-details-vertical"},g.default.createElement("div",{className:"details"},g.default.createElement("div",{className:"al-lo-carousel-custom-tile-details-vertical-badge"},a.badge),g.default.createElement("div",{className:"al-lo-carousel-custom-tile-details-vertical-text"},a.text)),!a.removeActionButton&&
g.default.createElement("div",{className:"al-lo-carousel-custom-tile-details-vertical-action-button"},a.actionButton))};b.propTypes=d;b.defaultProps={removeActionButton:!1};f.default=(0,a.connectForRemoveActionButtonFeature)(b)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.CommonProductDetailsLayout=void 0;d=c(a(1));var g=c(a(0));a=a(27);d={text:d.default.element.isRequired,actionButton:d.default.element,badge:d.default.element,
infoLine:d.default.element,removeActionButton:d.default.bool};var b=f.CommonProductDetailsLayout=function(a){return g.default.createElement("div",{className:"al-lo-carousel-custom-tile-details-common "+(a.infoLine?"has-info-line":"")},a.badge,g.default.createElement("div",{className:"al-lo-carousel-custom-tile-details-common-text"},a.text),a.infoLine,!a.removeActionButton&&g.default.createElement("div",{className:"al-lo-carousel-custom-tile-details-common-action-button"},a.actionButton))};b.propTypes=
d;b.defaultProps={removeActionButton:!1};f.default=(0,a.connectForRemoveActionButtonFeature)(b)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return a.badgeText?g.default.createElement("div",{className:"amazonlive-shopping-carousel-custom-tile-badge"},g.default.createElement("span",{className:"badge-text"},a.badgeText)):g.default.createElement("div",null)};a.propTypes={badgeText:d.default.string.isRequired};
f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return c(a,null,[{key:"ellipsisFormatter",value:function(a,c){if(0>=
c)return"";if(a&&a.length>c){c=(a=a.substring(0,c)).split(" ");var d=0;1<c.length&&(d=a.length-c[c.length-1].length-1);return a.substring(0,d)+"..."}return a}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0)),b=c(a(12)),e=c(a(31)),h=c(a(357));a=function(a){var c=a.customTile,d=a.details;a=a.broadcastId;var f=h.default.ellipsisFormatter(c.title,44);return g.default.createElement("div",{className:(0,
b.default)("amazonlive-shopping-carousel-custom-tile-name",{"has-badge":c.badgeText})},g.default.createElement(e.default,{item:c,details:d,broadcastId:a,componentName:"customTileTitle"},f))};a.propTypes={customTile:d.default.object.isRequired,details:d.default.object.isRequired,broadcastId:d.default.string.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.CustomTileDetails=void 0;var g=c(a(1)),b=c(a(0));d=
a(3);var e=c(a(358)),h=c(a(356)),k=c(a(355)),l=c(a(354)),m=c(a(353));a={customTile:g.default.object.isRequired,details:g.default.object.isRequired,layout:g.default.func,broadcastId:g.default.string,infoLine:g.default.element};g=f.CustomTileDetails=function(a){var c=b.default.createElement(e.default,{customTile:a.customTile,details:a.details,broadcastId:a.broadcastId,componentId:a.componentId}),d=b.default.createElement(m.default,{customTile:a.customTile,details:a.details,broadcastId:a.broadcastId}),
f=a.customTile.badgeText?b.default.createElement(h.default,{badgeText:a.customTile.badgeText}):null;return b.default.createElement(a.layout,{text:c,actionButton:d,badge:f,infoLine:a.infoLine})};g.propTypes=a;f.default=(0,d.connect)(function(a){var b;a:switch(a["component-id"]){case "mobileAd414x125":b=l.default;break a;default:b=k.default}return{layout:b,componentId:a["component-id"]}})(g)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
f.OVERLAY_IMAGE_CSS_CLASS_NAME=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};d=c(a(1));var b=c(a(0)),e=c(a(31)),h=a(79),k=f.OVERLAY_IMAGE_CSS_CLASS_NAME="amazonlive-shopping-carousel-card-image-overlay";a=function(a){var c=function(b){switch(a.style){case "forceCardExpand":return{imageBase:{width:140,height:140},confettiOverlayImage:{src:"https://m.media-amazon.com/images/G/01/poppin/Carousel/confetti-desktop-vertical-2x.png",
style:{width:"210px",height:"200px",top:"20px"}}};case "DesktopVerticalCustomTileLayout":return{imageBase:{width:120,height:120},confettiOverlayImage:{src:"https://m.media-amazon.com/images/G/01/poppin/Carousel/confetti-desktop-vertical-2x.png",style:{width:"100%"}}};case "MobileVerticalCustomTileLayout":case "MobileHorizontalCustomTileLayout":return{imageBase:{width:95,height:95},confettiOverlayImage:{src:"https://m.media-amazon.com/images/G/01/poppin/Carousel/confetti-mobile-2x.png",style:{height:"100%"}}};
default:return{imageBase:{width:112,height:112},confettiOverlayImage:{src:"https://m.media-amazon.com/images/G/01/poppin/Carousel/confetti-desktop-horizontal-2x.png",style:{height:"100%"}}}}}(),d=function(a,b){return(0,h.getStyledImage)({imageUrl:b,baseWidth:a.imageBase.width,baseHeight:a.imageBase.height,maxTimesSupport:2,needAutoCrop:!1})}(c,a.customTile.imageUrl);return b.default.createElement(e.default,{item:a.customTile,details:a.details,broadcastId:a.broadcastId,componentName:"customTileImage"},
function(c,d){if(a.isGiveaway)return b.default.createElement("img",{className:k,src:c.confettiOverlayImage.src,style:g({position:"absolute",top:0,left:0},c.confettiOverlayImage.style)})}(c),b.default.createElement("img",{src:d.src,srcSet:d.srcSet,className:"amazonlive-shopping-carousel-card-image"}))};a.propTypes={customTile:d.default.object.isRequired,details:d.default.object.isRequired,broadcastId:d.default.string.isRequired,style:d.default.string.isRequired,isGiveaway:d.default.bool.isRequired};
f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingCarouselCustomTileWidget=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,
e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=a(3),k=c(a(9)),l=c(a(8)),m=a(174),n=c(a(360)),p=c(a(359)),q=c(a(2)),t=c(a(106));a=f.ShoppingCarouselCustomTileWidget=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=
typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"createLayoutStyle",value:function(){var a=this.props.customTile.backgroundImageUrl;return!a||this.isGiveawayWithConfettiOverlay()?
{}:{backgroundImage:(0,m.wrapUrl)(a),backgroundPosition:"center",backgroundSize:"cover"}}},{key:"isGiveawayWithConfettiOverlay",value:function(){return this.props.isGiveawayConfettiOverlayEnabled&&0<=this.props.customTile.url.indexOf("giveaway.amazon.com")}},{key:"getPreparedCustomTile",value:function(){return this.isGiveawayWithConfettiOverlay()?g({},this.props.customTile,{actionButtonText:k.default.translate("amazon-live-giveaway-learn-more","Enter Giveaway")}):this.props.customTile}},{key:"renderInfoLine",
value:function(){if(this.isGiveawayWithConfettiOverlay())return e.default.createElement("div",{className:"amazonlive-shopping-carousel-custom-tile-info-line"},k.default.translate("amazon-live-giveaway-no-purchase-nec","NO PURCH NEC"))}},{key:"getImageStyle",value:function(){return this.props.forceCardExpand?"forceCardExpand":this.props.imageStyle}},{key:"render",value:function(){var a=this.props,b=a.highlighted,c=a.details,d=a.broadcastId,f=a.layout,g=a.singleDoubleCarouselCardCss,h=a.forceCardExpand,
k=a.enableEventDealBadge,m=this.getPreparedCustomTile(),q=this.isGiveawayWithConfettiOverlay(),a=b?e.default.createElement("div",{className:"amazonlive-shopping-carousel-highlight-bar amazonlive-carousel-highlighted"}):void 0,u=e.default.createElement(n.default,{customTile:m,details:c,broadcastId:d,style:this.getImageStyle(),isGiveaway:q}),c=e.default.createElement(p.default,{customTile:m,details:c,broadcastId:d,infoLine:this.renderInfoLine()}),d=k?e.default.createElement(t.default,null):void 0,k=
b?"amazonlive-shopping-carousel-card-highlighted":"",q=q?"giveaway":"";return e.default.createElement("div",{className:"slick-react-card"+g,style:this.createLayoutStyle()},e.default.createElement(l.default.GridRow,{verticalAlign:"center",cssClass:"amazonlive-shopping-carousel-custom-tile "+k+" "+q},e.default.createElement(f,{highlightBar:a,highlighted:b,customTileImage:u,customTileDetails:c,forceCardExpand:h,eventDealBadge:d})))}}]),c}();a.propTypes={customTile:d.default.object.isRequired,details:d.default.object.isRequired,
highlighted:d.default.bool,broadcastId:d.default.string,singleDoubleCarouselCardCss:d.default.string,layout:d.default.func,isGiveawayConfettiOverlayEnabled:d.default.bool.isRequired,imageStyle:d.default.string.isRequired,forceCardExpand:d.default.bool,enableEventDealBadge:d.default.bool};a.defaultProps={highlighted:!1,broadcastId:"",singleDoubleCarouselCardCss:"",layout:function(){},forceCardExpand:!1,enableEventDealBadge:!1};f.default=(0,h.connect)(function(a){return{isGiveawayConfettiOverlayEnabled:a.weblab&&
q.default.isWeblabEnabled(a.weblab.giveawayConfettiOverlay)}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(12)),h=c(a(8)),k=a(2),l=c(a(186)),m=c(a(185)),
n=c(a(180)),p=c(a(109)),q=c(a(106)),t=c(a(108)),u=a(41),v=a(107),w=a(15);a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={addedToCart:null},a.onAddToCart=a.onAddToCart.bind(a),a}return function(a,b){if("function"!=typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"onAddToCart",value:function(a,b){var c=this;this.setState({addedToCart:{hasError:a,message:b}});(0,k.setTimeout)(function(){c.setState({addedToCart:null})},3E3)}},{key:"getPreSelectedProduct",
value:function(a){var b=(0,v.getPreselectedProductInfo)(a);return b&&b.product?b.product:a}},{key:"getProduct",value:function(){var a=this.props.product;return a.product?a.product:a}},{key:"render",value:function(){var a=this.props,c=a.deals,d=a.details,f=a.broadcastId,g=a.singleDoubleCarouselCardCss,k=a.highlighted,v=a.layout,B=a.enableEventDealBadge,y=this.state.addedToCart,a=this.getProduct(),r=this.getPreSelectedProduct(a),z=(0,u.getDeal)(a,c),c=k?b.default.createElement("div",{className:"amazonlive-shopping-carousel-highlight-bar amazonlive-carousel-highlighted"}):
void 0,T=z&&!B?b.default.createElement(p.default,{deal:z}):void 0,B=B?b.default.createElement(q.default,null):void 0,y=y?b.default.createElement(t.default,{hasError:y.hasError,message:y.message}):void 0,N=b.default.createElement(l.default,{product:r,details:d,broadcastId:f,deal:z}),r=b.default.createElement(m.default,{product:r,deal:z,details:d,broadcastId:f}),d=b.default.createElement("div",{className:"amazonlive-shopping-carousel-product-button"},b.default.createElement(n.default,{product:a,details:d,
onAddToCart:this.onAddToCart,broadcastId:f,deal:z})),v=v||w.carouselConfig.productLayout,g=(0,e.default)("slick-react-card",g,{"amazonlive-shopping-carousel-card-highlighted":k}),f=(0,e.default)("amazonlive-shopping-carousel-product",{"amazonlive-shopping-carousel-card-highlighted":k});return b.default.createElement("div",{className:g,id:"amazonlive-shopping-carousel-product-asin-"+a.asin},b.default.createElement(h.default.GridRow,{verticalAlign:"center",cssClass:f},b.default.createElement(v,{highlighted:k,
highlightBar:c,dealBadge:T,notification:y,productImage:N,productDetails:r,productActions:d,eventDealBadge:B})))}}]),c}();a.propTypes={product:d.default.object.isRequired,details:d.default.object.isRequired,highlighted:d.default.bool,broadcastId:d.default.string,singleDoubleCarouselCardCss:d.default.string,deals:d.default.object,layout:d.default.string,enableEventDealBadge:d.default.bool};a.defaultProps={highlighted:!1,broadcastId:"",singleDoubleCarouselCardCss:"",deals:{},layout:"",enableEventDealBadge:!1};
f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0)),b=c(a(9)),e=c(a(8)),h=c(a(49)),k=a(4);a=function(a){return g.default.createElement("div",{className:"va-live-product-actions va-live-product-actions-cancel"},g.default.createElement(h.default,{onClick:(0,k.guardErrorWrapper)(a.onClick),buttonSuffix:"cancel",buttonType:"unspecified",buttonValue:"cancel"},g.default.createElement(e.default.Text,{textSize:"base"},
b.default.translate("amazon-live-cancel-button-text","Cancel"))))};a.propTypes={onClick:d.default.func.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));
var b=c(a(0)),e=c(a(13)),h=c(a(8));a={dimensions:d.default.array.isRequired,indexedProducts:d.default.object.isRequired,cssClass:d.default.string,onProductSelect:d.default.func,initialSelection:d.default.object};var k=0;d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&
"function"!=typeof a?this:a;return a.state={availableMapper:[],selectedResult:[]},a.selectionMapper=a.getSelectionMapper(),a.selectedDimension="",a.id=k++,a.initialSelection=a.props.initialSelection,a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"componentDidMount",value:function(){for(var a=this,b=0;b<this.props.dimensions.length;b++){var c="a:dropdown:"+this.getDropDownNativeId(b)+":select";e.default.A.on(c,function(b){var c=b.id.split(":")[1];b=a.props.dimensions[c].values.indexOf(b.value);a.setAvailableMapper(c,b);a.updateSelectedResult(c,b)})}this.runInitialSelections()}},{key:"componentWillUnmount",value:function(){for(var a=0;a<this.props.dimensions.length;a++){var b="a:dropdown:"+
this.getDropDownNativeId(a)+":select";e.default.A.off(b)}}},{key:"runInitialSelections",value:function(){var a=this.initialSelection&&this.initialSelection.itemList?this.initialSelection.itemList:this.initialSelection;if(a)for(var b=0;b<a.length;b++){var c=a[b];c&&(this.setAvailableMapper(c.dimId,c.dimValId),this.updateSelectedResult(c.dimId,c.dimValId))}}},{key:"updateSelectedResult",value:function(a,b){var c=this.state.selectedResult;c[a]=b;this.setState({selectedResult:c});this.selectedDimension=
a;a=("["+c+"]").split(",").join(", ");this.props.onProductSelect(this.props.indexedProducts[a])}},{key:"setAvailableMapper",value:function(a,b){var c=[],d;for(d in this.selectionMapper)for(var e=this.selectionMapper[d],f=0;f<this.props.dimensions.length;f++)a==f&&b==e[f]&&c.push(e);this.setState({availableMapper:c})}},{key:"getDropDownNativeId",value:function(a){return this.dropDownNativeIds=this.dropDownNativeIds||{},this.dropDownNativeIds[a]=this.dropDownNativeIds[a]||this.id+"-amazonlive-desktop-shoppingcarousel-variation-selector:"+
a,this.dropDownNativeIds[a]}},{key:"getSelectionMapper",value:function(){for(var a=[],b=Object.keys(this.props.indexedProducts),c=0;c<b.length;c++)a.push(JSON.parse(b[c]));return a}},{key:"isItemAvaliable",value:function(a,b){if(this.selectedDimension==a)return!0;var c=this.state.availableMapper;if(0>=c.length)return!0;for(var d in c)if(c[d][a]==b)return!0}},{key:"getOptionPropName",value:function(a){return this.initialSelection&&this.initialSelection.preselectedOptionNames&&0<this.initialSelection.preselectedOptionNames.length&&
this.initialSelection.preselectedOptionNames[a]?this.initialSelection.preselectedOptionNames[a]:" "}},{key:"renderDimensionValues",value:function(a,c){for(var d=[],e=0;e<a.length;e++)this.isItemAvaliable(c,e)&&d.push(b.default.createElement(h.default.DropdownOption,{value:a[e],key:"amazonlive-desktop-shoppingcarousel-variation-selector-DropdownOption-"+c+"-"+e},a[e]));return b.default.createElement(h.default.DropdownGroup,{labelText:"testing"},d)}},{key:"render",value:function(){for(var a=[],c=3===
this.props.dimensions.length?"small":"base",d=0;d<this.props.dimensions.length;d++)a.push(b.default.createElement("div",{key:"amzlv-crsl-vm-dimension-"+d,className:"amzlv-crsl-vm-dimensions"},b.default.createElement(h.default.Dropdown,{buttonSize:c,nativeId:this.getDropDownNativeId(d),labelText:this.props.dimensions[d].name+":",optionPrompt:this.getOptionPropName(d)},this.renderDimensionValues(this.props.dimensions[d].values,d))));return b.default.createElement("div",{className:this.props.cssClass},
a)}}]),c}();d.propTypes=a;d.defaultProps={cssClass:"",onProductSelect:function(){console.log("onProductSelect empty")},initialSelection:null};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];
e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=c(a(9)),k=c(a(49)),l=c(a(42)),m=c(a(50)),n=a(4);a={product:d.default.object.isRequired,details:d.default.object.isRequired,optionsText:d.default.string,onOptionClicked:d.default.func,broadcastId:d.default.string,deal:d.default.object};var p={buttonSuffix:"view-options",buttonValue:"Choose Options"};
d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.clickViewOptionsHandler=(0,n.guardErrorWrapper)(a.clickViewOptionsHandler.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"getProductActionButton",value:function(){return e.default.createElement("div",{className:"va-live-product-actions va-live-product-button-view-options"},e.default.createElement(k.default,g({onClick:this.clickViewOptionsHandler},p),h.default.translate(this.props.optionsText,"Choose options")))}},
{key:"clickViewOptionsHandler",value:function(){this.props.onOptionClicked();l.default.viewOptionsSushi(this.props.details,this.props.product,this.props.broadcastId,this.props.deal);m.default.postVibesEvent(this.props.broadcastId,this.props.product,"viewOptions")}},{key:"render",value:function(){return this.getProductActionButton()}}]),c}();d.propTypes=a;d.defaultProps={optionsText:"amazon-live-options-button-text"};f.default=d},function(d,f,a){d.exports={speed:400,arrows:!1,dots:!1,infinite:!1,touchMove:!0,
variableWidth:!0,swipeToSlide:!0,slidesToShow:1,centerMode:!1,centerPadding:"0"}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=(c(a(22)),c(a(81))),k=c(a(8)),l=a(2),m=c(a(366)),n=a(4);a={dimensions:d.default.array.isRequired,indexedProducts:d.default.object.isRequired,onSelectedVariation:d.default.func.isRequired,disabled:d.default.bool,initialSelection:d.default.object};d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||
Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.slickSelectors={},a.state={selections:a.getInitialSelections()},a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,null,[{key:"selected",get:function(){return"selected"}},{key:"unselected",get:function(){return"normal"}},{key:"unavailable",get:function(){return"disabled"}}]),b(c,[{key:"componentDidMount",value:function(){var a=this;this.timer=(0,l.setTimeout)(function(){a.scrollToSelector(a.state.selections)},0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"getInitialSelections",value:function(){return this.props.initialSelection&&
this.props.initialSelection.selections?this.props.initialSelection.selections:[]}},{key:"getSelectableDimensionValues",value:function(a,b){var c=[];c[a]=void 0;for(var d in this.props.indexedProducts){var e=JSON.parse(d);e[a]===b&&e.forEach(function(b,d){d!==a&&(c[d]||(c[d]=[]),c[d].push(b))})}return c}},{key:"selectDimensionValue",value:function(a,b){if(!this.props.disabled){var c=[],d=this.getSelectableDimensionValues(a,b);this.state.selections.forEach(function(a,b){void 0!==d[b]&&0<=d[b].indexOf(a)&&
(c[b]=a)});c[a]=b;this.setState({selections:c,selectableValues:d});this.notifySelections(c)}}},{key:"scrollToSelector",value:function(a){if(a)for(var b=0;b<a.length;b++)a[b]&&0<=a[b]&&this.slickSelectors[b].slickGoTo(a[b])}},{key:"notifySelections",value:function(a){var b=this.findValueForSelections(a);this.props.onSelectedVariation({selected:b,selections:a})}},{key:"findValueForSelections",value:function(a){for(var b=[],c=0;c<this.props.dimensions.length;c++){if(void 0===a[c])return;b.push(a[c])}for(var d in this.props.indexedProducts)if(a=
JSON.parse(d),(0,l.arraysEqual)(b,a))return this.props.indexedProducts[d]}},{key:"getSelectedStatus",value:function(a,b){return this.state.selections[a]===b?"selected":void 0===this.state.selectableValues||void 0===this.state.selectableValues[a]||0<=this.state.selectableValues[a].indexOf(b)?this.props.disabled?"disabled":"normal":"disabled"}},{key:"renderDimensionValues",value:function(a,b){for(var c=this,d=[],f=function(a,b){return(0,n.guardErrorWrapper)(function(){return c.selectDimensionValue(a,
b)})},l=0;l<a.length;l++){var p=f(b,l),q=this.getSelectedStatus(b,l);d.push(e.default.createElement("div",{className:"amzlv-crsl-vm-dimension-values amzlv-crsl-vm-dimension-values-"+l,id:"selectorId-"+b+"-"+l,onClick:p,key:"amzlv-crsl-vm-dimension-value-"+l},e.default.createElement(k.default.Button,{buttonType:"toggle",status:q,cssClass:"amzlv-crsl-vm-dimension-value-button"},a[l])))}return e.default.createElement(h.default,g({ref:function(a){c.slickSelectors[b]=a}},m.default),d)}},{key:"render",
value:function(){for(var a=[],b=0;b<this.props.dimensions.length;b++)a.push(e.default.createElement("div",{className:"amzlv-crsl-vm-dimensions",key:"amzlv-crsl-vm-dimension-"+b},e.default.createElement("div",{className:"amzlv-crsl-vm-dimension-name"},this.props.dimensions[b].name),e.default.createElement("div",{className:"amazonlive-shopping-segments-scrollable"},this.renderDimensionValues(this.props.dimensions[b].values,b))));return e.default.createElement("div",null,a)}}]),c}();d.propTypes=a;f.default=
d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0)),b=c(a(111)),e=c(a(182)),h=c(a(112));a=function(a){var c=a.product,d=a.details,f=a.broadcastId,p=a.deal;return a.variationButtonSheet,g.default.createElement("div",{className:"deal-product-info mobile"},g.default.createElement(h.default,{product:c,details:d,broadcastId:f,deal:p,variationButtonSheet:!0}),g.default.createElement("div",{className:"amazonlive-shopping-carousel-product-price"},
g.default.createElement(b.default,{price:c.formattedPrice,listPrice:c.formattedListPrice,deal:p})),g.default.createElement(e.default,{deal:p}))};a.propTypes={product:d.default.object.isRequired,details:d.default.object.isRequired,deal:d.default.object.isRequired,broadcastId:d.default.string.isRequired,variationButtonSheet:d.default.bool};a.defaultProps={variationButtonSheet:!1};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
f.ShoppingCarouselProductInfo=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(8)),h=(c(a(2)),c(a(111))),k=c(a(183)),l=c(a(31)),m=c(a(112));a={product:d.default.object.isRequired,details:d.default.object.isRequired,broadcastId:d.default.string,componentName:d.default.string,
variationButtonSheet:d.default.bool};d=f.ShoppingCarouselProductInfo=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"isReviewDataAvailable",value:function(){return 0<this.props.product.totalReviewCount}},{key:"getProductName",value:function(){var a=this.props;return b.default.createElement(m.default,{product:a.product,details:a.details,broadcastId:a.broadcastId,variationButtonSheet:a.variationButtonSheet})}},
{key:"getProductReview",value:function(){return this.isReviewDataAvailable()?b.default.createElement("div",{className:"amazonlive-shopping-carousel-product-review"},b.default.createElement(l.default,{item:this.props.product,details:this.props.details,broadcastId:this.props.broadcastId,componentName:"productReview"},b.default.createElement(k.default,{numFullStars:this.props.product.starCount,hasHalfStar:this.props.product.hasHalfStar,numReviews:this.props.product.totalReviewCount,includePrimeBadge:this.props.product.eligibleForPrimeShipping}))):
void 0}},{key:"getProductPrice",value:function(){return b.default.createElement(e.default.GridRow,{cssClass:"amazonlive-shopping-carousel-product-price"},b.default.createElement(h.default,{price:this.props.product.formattedPrice,listPrice:this.props.product.formattedListPrice,isOutOfStock:this.props.product.outOfStock}))}},{key:"getPrimeBadge",value:function(){return this.props.product.eligibleForPrimeShipping&&b.default.createElement("div",{className:"amazonlive-shopping-carousel-product-prime-badge"},
b.default.createElement(e.default.Icon,{iconType:"prime",iconSize:"medium"}))}},{key:"render",value:function(){var a=this.getProductName(),c=this.getProductReview(),d=this.getProductPrice(),e=this.getPrimeBadge();return b.default.createElement("div",{className:"amazonlive-shopping-carousel-product-detail"},a,c,d,e)}}]),c}();d.propTypes=a;d.defaultProps={broadcastId:"",variationButtonSheet:!1};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",
{value:!0});f.ConnectedShoppingCarouselProductOptionsWidget=f.ShoppingCarouselProductOptionsWidget=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=a(3),h=a(8),k=c(a(179)),l=c(a(31)),m=c(a(369)),n=c(a(109)),p=a(41),q=c(a(368)),t=c(a(108)),u=c(a(367)),v=c(a(18));a=f.ShoppingCarouselProductOptionsWidget=
function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={selectedVariation:a.getInitialProduct(),productSelected:!1},a.callAddingToCart=a.callAddingToCart.bind(a),a.onAddToCart=a.onAddToCart.bind(a),a}return function(a,b){if("function"!=
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"getInitialProduct",value:function(){return this.props.initialSelection&&this.props.initialSelection.selected?this.props.initialSelection.selected:this.props.product}},{key:"selectedVariation",
value:function(a){void 0!==a.selected&&this.setState({selectedVariation:a.selected,productSelected:!1});this.props.onProductVariationSelection(a)}},{key:"renderProductDetail",value:function(a,c){var d=this.props,e=d.details,d=d.broadcastId;return c?b.default.createElement(q.default,{product:a,details:e,broadcastId:d,deal:c,variationButtonSheet:!0}):b.default.createElement(m.default,{product:a,details:e,broadcastId:d,variationButtonSheet:!0})}},{key:"renderProductInformation",value:function(a,c){return b.default.createElement("div",
{className:"amzlv-crsl-vm-product-details"},b.default.createElement(l.default,{item:a,details:this.props.details,broadcastId:this.props.broadcastId,deal:c,componentName:"productImage"},b.default.createElement("div",{className:"amzlv-crsl-vm-image-container"},b.default.createElement("img",{src:a.formattedImageUrl}))),b.default.createElement("div",{className:"amzlv-crsl-vm-right"},b.default.createElement("div",{className:"amzlv-crsl-vm-product-info-container"},this.renderProductDetail(a,c),!a.outOfStock&&
b.default.createElement(h.Text,{textSize:"small",textColor:"attainable"},"In Stock"),a.outOfStock&&b.default.createElement(h.Text,{textSize:"small",textColor:"error"},"Out of Stock"))))}},{key:"renderProductVariation",value:function(){var a=this;return b.default.createElement(u.default,{dimensions:this.props.product.variationMatrix.dimensions,indexedProducts:this.props.product.variationMatrix.indexedProducts,onSelectedVariation:function(b){return a.selectedVariation(b)},disabled:this.state.productSelected,
initialSelection:this.props.initialSelection})}},{key:"callAddingToCart",value:function(){this.setState({selectedVariation:this.state.selectedVariation,productSelected:!0})}},{key:"finishedAddingToCart",value:function(a){this.props.onProductAddedToCart({success:a,product:this.props.product})}},{key:"onAddToCart",value:function(a,b){this.finishedAddingToCart(!a);a||this.setState({addedToCart:{hasError:a,message:b}})}},{key:"renderActionButton",value:function(a,c){return b.default.createElement(k.default,
{product:a,deal:c,details:this.props.details,broadcastId:this.props.broadcastId,enabled:a!==this.props.product,onCallingAddToCart:this.callAddingToCart,onAddToCart:this.onAddToCart,addToCartResultMessageButtonTimeOut:this.props.addToCartResultMessageButtonTimeOut})}},{key:"render",value:function(){var a=this.state.selectedVariation,c=(0,p.getDeal)(a,this.props.deals);return b.default.createElement("div",{className:"amzlv-crsl-vm-container"},c&&b.default.createElement(n.default,{deal:c}),this.state.addedToCart&&
b.default.createElement(t.default,{hasError:this.state.addedToCart.hasError,message:this.state.addedToCart.message}),this.renderProductInformation(a,c),null!=this.props.product.variationMatrix&&this.renderProductVariation(),b.default.createElement("div",{className:"amzlv-crsl-vm-button-container"},this.renderActionButton(a,c)))}}]),c}();a.propTypes={product:d.default.object.isRequired,details:d.default.object.isRequired,onProductAddedToCart:d.default.func.isRequired,onProductVariationSelection:d.default.func.isRequired,
initialSelection:d.default.object,addToCartResultMessageButtonTimeOut:d.default.number,broadcastId:d.default.string,deals:d.default.object};f.default=a;f.ConnectedShoppingCarouselProductOptionsWidget=(0,e.connect)(function(a,b){if(!a["shopping-carousel"]||a["shopping-carousel"].loadStatus!==v.default.SUCCESS||!a["shopping-carousel"].data)return b;a["shopping-carousel"].data;return Object.assign({},b,{deals:a.perks&&a.perks.deals})})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}
Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(2)),b=c(a(6));f.default=function(a){a=a.weblab&&g.default.isWeblabEnabled(a.weblab.enableCoverIphoneXBottomNotch);return b.default.isMshop()&&a}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,
c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=c(a(9)),k=c(a(8)),l=c(a(176)),m=c(a(42)),n=a(370),p=c(a(49)),q=a(107),t=c(a(50)),u=a(2),v=a(4);a={product:d.default.object.isRequired,details:d.default.object.isRequired,optionsText:d.default.string,broadcastId:d.default.string,deal:d.default.object};var w=
{buttonSuffix:"view-options",buttonValue:"View Options"};d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={selected:!1},a.clickViewOptionsHandler=(0,v.guardErrorWrapper)(a.clickViewOptionsHandler.bind(a)),a}return function(a,
b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"getInitialSelection",value:function(){var a=(0,q.getPreselectedProductInfo)(this.props.product);return a&&a.preselectedResult&&a.preselectedResult.some(function(a){return!1!==
a&&0<=a})?{selected:a&&a.product?a.product:null,selections:a.preselectedResult}:this.state.selection}},{key:"clickViewOptionsHandler",value:function(){var a=this,b=this.getInitialSelection();this.state.selectedProduct||(m.default.viewOptionsSushi(this.props.details,this.props.product,this.props.deal),t.default.postVibesEvent(this.props.broadcastId,this.props.product,"viewOptions"),this.setState({selected:!0,selection:this.state.selection}),l.default.show(e.default.createElement("div",{id:"amzlv-crsl-vm-sheet",
className:"amazonlive-mobile",key:this.props.product.asin},e.default.createElement(n.ConnectedShoppingCarouselProductOptionsWidget,g({onProductAddedToCart:function(b){return a.onProductAddedToCart(b)},onProductVariationSelection:function(b){return a.onProductVariationSelection(b)},initialSelection:b,addToCartResultMessageButtonTimeOut:2E3},this.props)))))}},{key:"onProductAddedToCart",value:function(a){(0,u.setTimeout)(function(){l.default.close()},2E3);this.setState({selected:!1,success:a.success})}},
{key:"onProductVariationSelection",value:function(a){this.setState({selected:this.state.selected,selection:a})}},{key:"render",value:function(){return e.default.createElement("div",{className:"va-live-product-actions va-live-product-button-view-options"},!this.props.selected&&e.default.createElement(p.default,g({onClick:this.clickViewOptionsHandler},w),e.default.createElement(k.default.Text,{textSize:"small"},h.default.Strings[this.props.optionsText])))}}]),c}();d.propTypes=a;d.defaultProps={optionsText:"amazon-live-options-button-text"};
f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.DealInCart=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(0));d=c(a(1));var e=c(a(9)),h=a(8),k=a(19),l=c(a(181));a=f.DealInCart=function(a){function c(a){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");!0;var b;b=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!=typeof b&&"function"!=typeof b?this:b;return b.state={ended:!a.checkoutExpiration||a.checkoutExpiration<=new Date},b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"renderMessage",value:function(){return b.default.createElement(h.Text,{textSize:"mini",textColor:"success",cssClass:"va-live-product-deal-incart-added-message"},b.default.createElement(h.Icon,{iconType:"success",iconSize:"small"}),e.default.translate("gb_deal_in_your_cart","This deal is in your Cart."))}},
{key:"renderCountdown",value:function(){var a=this;if(this.state.ended)return b.default.createElement("span",null);var c=b.default.createElement(l.default,{endDate:this.props.checkoutExpiration,displayFunc:function(a){if(!a)return b.default.createElement("span",null);var c=a.days?a.days+"d ":"",d=c||0<parseInt(a.hours,10)?a.hours+":":"";return b.default.createElement(h.Text,{textBold:!0},""+c+d+a.minutes+":"+a.seconds)},onFinish:function(){a.setState({ended:!0});a.props.onExpired()}}),d=e.default.translate("gb_you_have",
"You have"),f=e.default.translate("gb_left_to","left to"),g=e.default.translate("gbd-checkout","check out.");return b.default.createElement(h.Text,{textSize:"mini",cssClass:"va-live-product-deal-incart-timer-message"},d," ",c," ",f," ",b.default.createElement(h.Link,{url:k.MiscLinks.CART_URL,target:"_blank"},g))}},{key:"render",value:function(){return b.default.createElement("div",{className:"va-live-product-deal-incart"},this.renderMessage(),this.renderCountdown())}}]),c}();a.propTypes={checkoutExpiration:d.default.instanceOf(Date),
onExpired:d.default.func};a.defaultProps={checkoutExpiration:void 0,onExpired:function(){}};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=a(78);f.default={addToCart:function(a){var b=a.product,d=a.callback;r.open("https://"+a.marketplaceName+"/gp/add-to-cart/html?verificationSessionID\x3d"+encodeURIComponent(a.details.sessionId)+"\x26offerListingID\x3d"+encodeURIComponent(b.offerListingId)+"\x26ASIN\x3d"+encodeURIComponent(b.asin)+"\x26clientName\x3d"+encodeURIComponent(c.CLIENT_NAME)+
"\x26nextPage\x3dcart","_blank");d({hasError:!1})}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.claimDeal=void 0;var g=a(19),b=c(a(228)),e=c(a(66)),h=c(a(127));d=f.claimDeal=function(a,c,d,f,p){if(a&&c){var q=h.default.getApiToken(),t=g.AJAXLinks.CLAIM_DEAL.V1;q&&(t=g.AJAXLinks.CLAIM_DEAL.V2);p&&(t=t+"/ref\x3d"+p);a={dealId:c,itemId:a,clientId:e.default.getClientID()};t=b.default.buildAjaxRequestParams(t,a,{success:function(a){d&&
d(a)},error:function(a){f&&f(a)},beforeSend:function(a){q&&a.setRequestHeader(h.default.CSRF_TOKEN_KEY,q)}});b.default.callAPI(g.AJAXConfigs.CLAIM_DEAL,t)}else f&&f({},"Missing DealID or ASIN")};f.default={claimDeal:d}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.addToCart=void 0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===
Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=c(a(13)),e=c(a(9)),h=a(78),k=a(19),l=c(a(2)),m=new (c(a(5)).default)("AddToCartDeals"),n=function(a){try{return"object"===(void 0===a?"undefined":g(a))?a:JSON.parse(a)}catch(b){return void m.error("Error parsing response: "+b)}};d=f.addToCart=function(a){var c=a.product,d=a.details,f=a.deal,g=a.callback;a=(0,h.getReftag)("amazonlive_carousel_addtocart_deal",c,d);a=(0,h.getUrl)(k.AJAXLinks.ADD_TO_CART,a);var w=function(a,b){var c=void 0;null===(a=n(a)).cartItem?
m.warn("Got null `cartItem`, unable to check for deal limit"):"quantityRestriction"===l.default.getNestedValue(a,"cartItem.statusList[0].category")&&(c=e.default.translate("amazonlive-portal-atc-qty-res-error-text","Cart contains deal limit"),m.warn("Cart contains deal limit"));m.error("Added to cart failed: "+b);g({hasError:!0,errorMessage:c})};m.debug("Adding to cart: "+c.asin+" / "+f.dealId);b.default.A.ajax(a,{method:"post",params:{dealId:f.dealId,offerID:c.offerListingId,quantity:1,asin:c.asin},
timeout:5E3,success:function(a){if((a=n(a))&&a.success)return a=parseInt(a.itemsInCart),m.debug("Added to cart with quantity: "+a),void g({hasError:!1,cartQuantity:a});w(a,"response.success not true")},error:w})};f.default={addToCart:d}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);
Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=a(4);a={buttonSuffix:d.default.string.isRequired,onClick:d.default.func,status:d.default.string,children:d.default.any};d=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;var b;b=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
b=!b||"object"!=typeof b&&"function"!=typeof b?this:b;return b.className="al-carousel-product-button al-carousel-product-button-"+a.buttonSuffix,b.onClickHandler=(0,e.guardErrorWrapper)(b.onClickHandler.bind(b)),b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"onClickHandler",value:function(){return this.props.onClick&&this.props.onClick()}},{key:"render",value:function(){return b.default.createElement("button",{className:this.className,onClick:this.onClickHandler,disabled:"disabled"===this.props.status,"aria-label":this.props.children},this.props.children)}}]),c}();d.propTypes=a;d.defaultProps={onClick:function(){},status:"",children:""};f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?
a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=(c(a(22)),c(a(9))),h=c(a(6)),k=c(a(8));d.default.string.isRequired;a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.buttonTextSize=h.default.isDeviceMobile()?"small":"base",a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"renderSuccessMessage",value:function(){return b.default.createElement(k.default.Text,{textSize:this.buttonTextSize,cssClass:"amzlv-atc-success-msg"},e.default.Strings[this.props.onSuccessText])}},{key:"renderErrorMessage",value:function(){return b.default.createElement(k.default.Text,{textSize:this.buttonTextSize,cssClass:"amzlv-atc-error-msg",textColor:"error"},e.default.Strings[this.props.onErrorText])}},
{key:"render",value:function(){return"success"===this.props.type?this.renderSuccessMessage():this.renderErrorMessage()}}]),c}();a.defaultProps={onSuccessText:"amazon-live-atc-success-msg",onErrorText:"amazon-live-atc-error-msg"};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.AddToCartWidget=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,
d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=a(3),k=c(a(9)),l=a(8),m=a(19),n=c(a(178)),p=c(a(378)),q=c(a(42)),t=c(a(49)),u=a(110),v=a(14),w=c(a(78)),y=c(a(376)),r=c(a(177)),A=c(a(374)),x=c(a(50)),C=a(2),D=a(4),F={buttonSuffix:"atc",buttonType:"primary",
buttonValue:"Add to Cart"};a=f.AddToCartWidget=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return a.renderAddToCartResult=function(a){return e.default.createElement(t.default,g({status:"disabled"},F),e.default.createElement(p.default,
{type:a}))},a.state={buttonStatus:"normal"},a.addToCart=(0,D.guardErrorWrapper)(a.addToCart.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"componentWillUnmount",value:function(){this.cancelDelayedSwitchToNormalStatus()}},
{key:"delaySwitchToNormalStatus",value:function(){var a=this;this.cancelDelayedSwitchToNormalStatus();this.buttonStatusTimeout=(0,C.setTimeout)(function(){a.setState({buttonStatus:"normal"})},this.props.addToCartResultMessageButtonTimeOut)}},{key:"cancelDelayedSwitchToNormalStatus",value:function(){this.buttonStatusTimeout&&clearTimeout(this.buttonStatusTimeout);this.buttonStatusTimeout=!1}},{key:"updateNavCartCount",value:function(a){z.when("nav.setCartCount").execute(function(b){b(a)});z.when("mash").execute(function(b){b.cart&&
"function"==typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}},{key:"responseHandler",value:function(a){var b=a.hasError,c=a.isWaitlisted,d=a.cartQuantity,e=a.dealItemStatus,f="error";a=a.errorMessage;b||(f="success",void 0!==d&&this.updateNavCartCount(d),void 0!==e&&this.props.updateDealItemStatus(e),c&&(f="normal",a=k.default.translate(this.props.joinWaitlistSuccessText,"Joined Waitlist")));this.setState({buttonStatus:f});this.delaySwitchToNormalStatus();this.props.onAddToCart(b,
a)}},{key:"addToCart",value:function(){this.props.enabled&&(this.setState({buttonStatus:"sending_request"}),this.callAddToCardHandler(),this.props.onCall(),q.default.addToCartSushi(this.props.details,this.props.product,this.props.deal),x.default.postVibesEvent(this.props.broadcastId,this.props.product,"addToCart"))}},{key:"callAddToCardHandler",value:function(){var a={product:this.props.product,details:this.props.details,deal:this.props.deal,marketplaceName:this.props.marketplaceName,callback:this.responseHandler.bind(this)},
b=w.default;this.props.isEmbedded&&"T1"===this.props.displayAdsAddToCartWeblab?b=A.default:this.props.deal&&(b=r.default.isLightningDeal(this.props.deal)?r.default:y.default);b.addToCart(a)}},{key:"renderSpinning",value:function(){return this.props.deal?e.default.createElement(n.default,null):e.default.createElement(l.Spinner,{cssClass:"va-live-product-spinner"})}},{key:"renderAddToCartButton",value:function(){var a=this.props.enabled?"normal":"disabled",b=this.props.dealItemStatus,c=b&&b.itemState,
b=b&&b.customerState,d=k.default.translate(this.props.addToCartText,"Add To Cart");return c===m.DealStates.WAITLIST&&b!==m.CustomerStates.PENDINGATC&&(d=k.default.translate(this.props.joinWaitlistText,"Join Waitlist")),e.default.createElement(t.default,g({status:a,onClick:this.addToCart},F),d)}},{key:"render",value:function(){return e.default.createElement(l.GridRow,{verticalAlign:"center",cssClass:"va-live-product-button-atc"},"normal"===this.state.buttonStatus&&this.renderAddToCartButton(),"sending_request"===
this.state.buttonStatus&&this.renderSpinning(),"error"===this.state.buttonStatus&&this.renderAddToCartResult("error"),"success"===this.state.buttonStatus&&this.renderAddToCartResult("success"))}}]),c}();a.propTypes={product:u.ProductPropType.isRequired,details:u.ItemDetailsPropType.isRequired,enabled:d.default.bool,onCall:d.default.func,onAddToCart:d.default.func,addToCartText:d.default.string,addToCartResultMessageButtonTimeOut:d.default.number,broadcastId:d.default.string,deal:d.default.object,
dealItemStatus:d.default.object,updateDealItemStatus:d.default.func,joinWaitlistText:d.default.string,joinWaitlistSuccessText:d.default.string,marketplaceName:d.default.string.isRequired,isEmbedded:d.default.bool.isRequired,displayAdsAddToCartWeblab:d.default.string.isRequired};a.defaultProps={enabled:!0,onCall:function(){},onAddToCart:function(){},addToCartResultMessageButtonTimeOut:3E3,addToCartText:"amazon-live-atc-button-text",joinWaitlistText:"gbd_join_waitlist",broadcastId:"",updateDealItemStatus:function(){}};
f.default=(0,h.connect)(function(a){var b=a["widget-options"]||{};return{marketplaceName:b.marketplaceName||"",isEmbedded:!!b.embedded,displayAdsAddToCartWeblab:(a.weblab||{}).displayAdsAddToCart||"C"}},function(a,b){return{updateDealItemStatus:function(c){a((0,v.updateSingleDealItemStatus)(b.product.asin,b.deal.dealId,c))}}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",
{className:"al-lo-carousel-product-details-common"},g.default.createElement("div",{className:"al-lo-carousel-product-details-common-title"},a.productTitle),g.default.createElement("div",{className:"al-lo-carousel-product-details-common-review-badge"},g.default.createElement("span",{className:"al-lo-carousel-product-details-common-review"},a.customerReview),a.badge&&g.default.createElement("span",{className:"al-lo-carousel-product-details-common-badge"},a.badge)),g.default.createElement("div",{className:"al-lo-carousel-product-details-common-price"},
a.productPrice))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,customerReview:d.default.element,badge:d.default.element};f.default=a},,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=
0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(0));d=c(a(1));var h=c(a(44)),k=a(4);a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.onLoadHandler=(0,k.guardErrorWrapper)(a.onLoadHandler.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"componentWillMount",
value:function(){h.default.startTimer(this.props.scope)}},{key:"onLoadHandler",value:function(){h.default.endTimer(this.props.scope)}},{key:"render",value:function(){var a=this.props;a.scope;var b=["scope"],c={},d;for(d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return e.default.createElement("img",g({onLoad:this.onLoadHandler,alt:""},c))}}]),c}();a.propTypes={scope:d.default.string.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}
Object.defineProperty(f,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),
e=c(a(13)),h=a(2),k=a(15),l=c(a(43)),m=c(a(131)),n=c(a(97));d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return b(a,null,[{key:"dock",value:function(a,b){if(function(){var a=m.default.state,b=a&&a.showId,c=a&&a.domId,d=(0,h.isWeblabEnabled)(a&&a.weblab),e=a&&!a.disabled,a=a&&a.dockState===l.default.UNDOCKED;return b&&c&&d&&e&&a}()){var c=function(){var c=!k.playerConfig.enableExpand;if(k.playerConfig.enableExpand)return e.default.A.trigger(n.default.auiEventWillDock),
{v:(new Promise(function(a){return(0,h.setTimeout)(a,0)})).then(function(){return m.default.dock(a,c,b)})};m.default.dock(a,c,b)}();if("object"===(void 0===c?"undefined":g(c)))return c.v}else"function"==typeof b&&b()}}]),a}();f.default=d},,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingCarouselProductWidget=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=
!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var b=c(a(0)),e=c(a(37)),h=a(3),k=c(a(8)),l=c(a(186)),m=a(15),n=c(a(185)),p=c(a(180)),q=c(a(109)),t=c(a(106)),u=c(a(108)),v=c(a(364)),w=a(41),y=a(107),r=c(a(363)),A=a(2);a=f.ShoppingCarouselProductWidget=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,
a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={},a.firstTimeLoading=!0,a.onAddToCart=a.onAddToCart.bind(a),a.onOptionClicked=a.onOptionClicked.bind(a),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,b.default.Component),g(c,[{key:"shouldComponentUpdate",value:function(a,b){if(this.firstTimeLoading||this.state.addedToCart||b.addedToCart||a.highlighted!==this.props.highlighted)return this.firstTimeLoading=!1,!0;var c=this.state.product&&this.props.isProductCardSelected?this.state.product:this.getProduct();b=(0,w.getDeal)(c,this.props.deals);c=(0,w.getDeal)(c,a.deals);return!(0,e.default)(b,c)||!!this.props.forceCardExpand||
this.props.singleDoubleCarouselCardCss!==a.singleDoubleCarouselCardCss||this.props.isProductCardSelected!==a.isProductCardSelected||!1!==this.props.isProductCardSelected}},{key:"onProductSelect",value:function(a){this.setState({product:a})}},{key:"onAddToCart",value:function(a,b){var c=this;this.setState({addedToCart:{hasError:a,message:b}});(0,A.setTimeout)(function(){c.setState({addedToCart:null})},3E3)}},{key:"onOptionClicked",value:function(){this.setState({product:null});this.props.onOptionClicked()}},
{key:"isSingleDoubleCardSingleItem",value:function(){return!(this.props.product.variationMatrix||!this.props.singleDoubleCarouselCardCss)||!(!this.props.product.variationMatrix||1!==Object.keys(this.props.product.variationMatrix.indexedProducts).length||!this.props.singleDoubleCarouselCardCss)}},{key:"isSingleDoubleCardVariationItem",value:function(){return!!(this.props.product.variationMatrix&&1<Object.keys(this.props.product.variationMatrix.indexedProducts).length&&this.props.singleDoubleCarouselCardCss)}},
{key:"getDimensionsCSS",value:function(){return 3===this.getProduct().variationMatrix.dimensions.length?" amazonlive-shopping-carousel-variation-product-three-dimensions":""}},{key:"getProduct",value:function(){var a=this.props.product;return a.product?a.product:a}},{key:"getPreSelectedProduct",value:function(a,b){return a&&a.product?a.product:b}},{key:"getProductImageStyle",value:function(){var a=this.props,b=a.isMinimalContentUnlessHoverOver,c=a.inExpandedPlayer;return a.forceCardExpand?"forceCardExpand":
b?"minimalWidget":c?"base":m.carouselConfig.productImageStyle}},{key:"render",value:function(){var a=this,c=this.props,d=c.forceCardExpand,e=c.deals,f=c.details,g=c.broadcastId,h=c.singleDoubleCarouselCardCss,m=c.inExpandedPlayer,x=c.layout,C=c.highlighted,A=c.isMinimalContentUnlessHoverOver,z=c.enableIframeFullscreen,M=c.enableEventDealBadge,c=c.isProductCardSelected||this.isSingleDoubleCardVariationItem()&&d,L=this.state.product&&c?this.state.product:this.getProduct(),Q=(0,y.getPreselectedProductInfo)(L),
O=this.getPreSelectedProduct(Q,L),J=(0,w.getDeal)(L,e),e=J&&!M?b.default.createElement(q.default,{deal:J}):void 0,M=M?b.default.createElement(t.default,null):void 0,P=!!this.state.product,K=!!c,U=this.state.addedToCart?b.default.createElement(u.default,{hasError:this.state.addedToCart.hasError,message:this.state.addedToCart.message}):void 0,X=b.default.createElement(l.default,{product:O,details:f,broadcastId:g,deal:J,style:this.getProductImageStyle()}),O=b.default.createElement(n.default,{product:O,
deal:J,details:f,broadcastId:g,isSingleDoubleCardSingleItem:this.isSingleDoubleCardSingleItem(),customTileExpandedLayout:m,inExpandedPlayer:z?m:void 0}),m=c?void 0:b.default.createElement("div",{className:"amazonlive-shopping-carousel-product-button"},b.default.createElement(p.default,{product:L,details:f,onAddToCart:this.onAddToCart,onOptionClicked:this.onOptionClicked,broadcastId:g,deal:J,inExpandedPlayer:z?m:void 0})),d=K?{selectors:b.default.createElement(v.default,{preSelectedProductInfo:this.getProduct().preselectedProductDimensionList,
dimensions:this.getProduct().variationMatrix.dimensions,indexedProducts:this.getProduct().variationMatrix.indexedProducts,cssClass:"amazonlive-shopping-carousel-variation-selector"+this.getDimensionsCSS(),onProductSelect:function(b){return a.onProductSelect(b)},initialSelection:Q&&Q.preselectedInitializationInfo}),cancelButton:d?null:b.default.createElement(r.default,{onClick:this.onOptionClicked}),actionButton:b.default.createElement(p.default,{product:L,details:f,onAddToCart:this.onAddToCart,onOptionClicked:this.onOptionClicked,
broadcastId:g,deal:J,enabled:P})}:void 0,C=C?" amazonlive-shopping-carousel-card-highlighted":"";return b.default.createElement("div",{className:"slick-react-card"+(c?" variation-selector-card":"")+h+(A?" al-lo-minimal-unless-hover-over":""),id:"amazonlive-shopping-carousel-product-asin-"+this.getProduct().asin},b.default.createElement(k.default.GridRow,{verticalAlign:"center",cssClass:"amazonlive-shopping-carousel-product"+C},b.default.createElement(x,{dealBadge:e,notification:U,productImage:X,productDetails:O,
productActions:m,variationSelection:d,isSingleDoubleCardSingleItem:this.isSingleDoubleCardSingleItem(),eventDealBadge:M})))}}]),c}();a.propTypes={product:d.default.object.isRequired,details:d.default.object.isRequired,highlighted:d.default.bool,onOptionClicked:d.default.func,isProductCardSelected:d.default.bool,broadcastId:d.default.string,singleDoubleCarouselCardCss:d.default.string.isRequired,deals:d.default.object,layout:d.default.func,isMinimalContentUnlessHoverOver:d.default.bool,forceCardExpand:d.default.bool,
inExpandedPlayer:d.default.bool,enableIframeFullscreen:d.default.bool,enableEventDealBadge:d.default.bool};a.defaultProps={highlighted:!1,onOptionClicked:function(){},isProductCardSelected:!1,broadcastId:"",deals:{},layout:function(){},isMinimalContentUnlessHoverOver:!1,forceCardExpand:!1,inExpandedPlayer:!1,enableIframeFullscreen:!1,enableEventDealBadge:!1};f.default=(0,h.connect)(function(a,b){var c=m.carouselConfig.expandedProductLayout,d=m.carouselConfig.productLayout;return{layout:c&&b.inExpandedPlayer?
c:d,isMinimalContentUnlessHoverOver:a["widget-options"].isMinimalContentUnlessHoverOver,enableIframeFullscreen:(0,A.isWeblabEnabled)((0,A.getNestedValue)(a,"weblab.enableIframeFullscreen"))}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.ShoppingCarouselCardWidget=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},
b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(0));d=c(a(1));var h=a(3),k=c(a(5)),l=c(a(6)),m=c(a(2)),n=c(a(386)),p=c(a(362)),q=c(a(361)),t=a(80),u=a(41),v=c(a(42)),w=a(23),y=c(a(86)),r=a(15);a=f.ShoppingCarouselCardWidget=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.logger=new k.default("CarouselCard/"+a.props.item.segmentItemId),a.onOptionClicked=a.onOptionClicked.bind(a),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"componentDidMount",value:function(){this.emitCardInViewport()}},{key:"componentWillReceiveProps",value:function(a){a.item.segmentItemId!==this.props.item.segmentItemId&&this.emitCardInViewport()}},{key:"componentWillUnmount",value:function(){this.viewportMonitorAreaTimer&&this.viewportMonitorAreaTimer.stop()}},{key:"onOptionClicked",
value:function(){var a=this.props;(0,a.onOptionClicked)(a.sliderCardKey)}},{key:"getMetricsInfo",value:function(){if(this.props.item.type===t.CardTypes.PRODUCT){var a=this.props.product;return{details:this.props.details,item:a,deal:(0,u.getDeal)(a,this.props.deals)}}return{details:this.props.details,item:this.props.item}}},{key:"emitCardInViewport",value:function(){var a=this;if(this.props.recordCardInViewport){var b=this.domElement&&this.domElement.closest(".al-carousel"),c=void 0;b&&(c=[{element:b,
events:["scroll"]}]);this.viewportMonitorAreaTimer=new y.default(this.domElement,function(){var b=a.getMetricsInfo(),c=b.details,d=b.item,b=b.deal;a.logger.debug("Card in viewport "+(d&&d.title));v.default.cardInViewportSushi(c,d,b);a.props.retargetingPixel&&w.pixel.fire(a.props.retargetingPixel,{justOnce:!0})},{containedInElement:b,customEvents:c});this.viewportMonitorAreaTimer.start()}}},{key:"renderCustomTileCard",value:function(){var a=this.props,b=a.inExpandedPlayer,c=r.carouselConfig.customTileImageStyle,
d=r.carouselConfig.customTileLayout,f=r.carouselConfig.customTileExpandedLayout,g=r.carouselConfig.customTileExpandedImageStyle;return e.default.createElement(q.default,{customTile:a.item,details:a.details,highlighted:a.highlighted,broadcastId:a.broadcastId,singleDoubleCarouselCardCss:a.singleDoubleCarouselCardCss,forceCardExpand:a.forceCardExpand,imageStyle:b?g:c,layout:b&&f?f:d,enableEventDealBadge:a.enableEventDealBadge})}},{key:"renderProductCard",value:function(){var a=this.props,b=a.sliderCardKey,
c=a.details,d=a.highlighted,f=a.isProductCardSelected,g=a.singleDoubleCarouselCardCss,h=a.increaseCardWidthForVariation,k=a.broadcastId,m=a.deals,q=a.forceCardExpand,t=a.inExpandedPlayer,v=a.carouselLayout,a=a.enableEventDealBadge,u=this.props.product,w=l.default.isDeviceMobile()?p.default:n.default;return e.default.createElement(w,{product:u,sliderCardKey:b,details:c,highlighted:d,onOptionClicked:this.onOptionClicked,isProductCardSelected:f,singleDoubleCarouselCardCss:g,increaseCardWidthForVariation:h,
broadcastId:k,deals:m,forceCardExpand:q,inExpandedPlayer:t,carouselLayout:v,enableEventDealBadge:a})}},{key:"renderContent",value:function(){switch(this.props.item.type){case t.CardTypes.PRODUCT:return this.renderProductCard();case t.CardTypes.CUSTOM_TILE:return this.renderCustomTileCard();default:return e.default.createElement("div",{className:"amazonlive-shopping-carousel-empty-card"},e.default.createElement("div",{className:"a-loading-static"},e.default.createElement("div",{className:"a-loading-static-inner"})))}}},
{key:"render",value:function(){var a=this;return e.default.createElement("div",{className:"shopping-carousel-card-wrapper",ref:function(b){a.domElement=b},style:{width:this.props.width}},this.renderContent())}}]),c}();a.propTypes={item:d.default.object.isRequired,sliderCardKey:d.default.string,details:d.default.object.isRequired,highlighted:d.default.bool,onOptionClicked:d.default.func,isProductCardSelected:d.default.bool,broadcastId:d.default.string,increaseCardWidthForVariation:d.default.bool,singleDoubleCarouselCardCss:d.default.string.isRequired,
deals:d.default.object,product:d.default.object,forceCardExpand:d.default.bool,recordCardInViewport:d.default.bool,retargetingPixel:d.default.string,inExpandedPlayer:d.default.bool,width:d.default.number,enableEventDealBadge:d.default.bool,carouselLayout:d.default.string};a.defaultProps={sliderCardKey:void 0,highlighted:!1,onOptionClicked:function(){},isProductCardSelected:!1,broadcastId:void 0,increaseCardWidthForVariation:!1,forceCardExpand:!1,recordCardInViewport:!1,retargetingPixel:void 0,inExpandedPlayer:!1,
width:null,enableEventDealBadge:!1,deals:null,carouselLayout:"",product:void 0};f.default=(0,h.connect)(function(a,b){var c;c=b&&b.item&&b.item.product?g({},b.item.product,{preselectedProductDimensionList:b.item.preselectedProductDimensionList,type:t.CardTypes.PRODUCT}):void 0;return{recordCardInViewport:a.weblab&&m.default.isWeblabEnabled(a.weblab.recordCardsInViewport),retargetingPixel:function(a,b,c){var d=function(b){return b&&m.default.getNestedValue(a,"widget-options.retargetingPixels."+b)};
return b.item&&d(b.item.segmentItemId)||c&&d(c.asin)||b.item&&b.item.retargetingPixel}(a,b,c),enableEventDealBadge:function(a){var b=r.carouselConfig.showEventDealBadge,c=(a["widget-options"]||{}).eventDealBadgeType,c=(0,u.getDealBadgeText)(c),d=l.default.isDeviceMobile()?"eventDealBadgeMobile":"eventDealBadgeDesktop";return""!==c&&b&&a.weblab&&m.default.isWeblabEnabled(a.weblab[d])}(a),product:c}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",
{value:!0});d=c(a(1));var g=c(a(0)),b=c(a(42)),e=a(4);a=function(a){var c=a.overrideClick;a=(0,e.guardErrorWrapper)(function(){b.default.carouselLeftRightScrollSushi();c()});return g.default.createElement("div",{className:"slick-arrow slick-prev",onClick:a})};a.propTypes={overrideClick:d.default.func.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0)),b=c(a(42)),e=a(4);a=function(a){var c=
a.overrideClick;a=(0,e.guardErrorWrapper)(function(){b.default.carouselLeftRightScrollSushi();c()});return g.default.createElement("div",{className:"slick-arrow slick-next",onClick:a})};a.propTypes={overrideClick:d.default.func.isRequired};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}
return function(c,d,f){return d&&a(c.prototype,d),f&&a(c,f),c}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(13));d=function(){function a(c){var d=this,f=c.widgetId,l=c.currentFirstCardIndex,m=c.totalSlidesNumber,n=c.cardWidth,p=c.cardVariationSelectorWidth,q=c.selectedSliderIndex,t=c.isCenterAlignNeeded,u=c.setCurrentFirstCardIndex;c=c.setCardGoToFirstPosition;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.widgetId=f;this.lastTimeOffset=0;this.currentFirstCardIndex=
l;this.totalSlidesNumber=m;this.getCarouselProductCardWidth=n;this.getCarouselProductCardVariationSelectorWidth=p;this.selectedSliderIndex=q;this.slickListWidth=function(){return g.default.$("#"+d.widgetId+" .slick-list").width()};this.isCenterAlignNeeded=t;this.setCurrentFirstCardIndex=u;this.setCardGoToFirstPosition=c}return c(a,[{key:"isCarouselNeedToScroll",value:function(){var a=this.slickListWidth();return!!a&&a<(this.selectedSliderIndex()||0===this.selectedSliderIndex()?this.totalSlidesNumber()*
this.getCarouselProductCardWidth()+this.getCarouselProductCardVariationSelectorWidth():this.totalSlidesNumber()*this.getCarouselProductCardWidth())}},{key:"isRightAlignNeed",value:function(){return(0!=this.selectedSliderIndex()||0!=this.currentFirstCardIndex())&&(this.selectedSliderIndex()&&this.selectedSliderIndex()>=this.currentFirstCardIndex()?(this.totalSlidesNumber()-this.currentFirstCardIndex())*this.getCarouselProductCardWidth()+this.getCarouselProductCardVariationSelectorWidth():(this.totalSlidesNumber()-
this.currentFirstCardIndex())*this.getCarouselProductCardWidth())<=this.slickListWidth()&&this.isCarouselNeedToScroll()}},{key:"isLeftAlignNeed",value:function(){return this.totalSlidesNumber()*this.getCarouselProductCardWidth()+(this.selectedSliderIndex()?this.getCarouselProductCardVariationSelectorWidth():0)<this.slickListWidth()}},{key:"isLastCardSelected",value:function(){return this.selectedSliderIndex()==this.totalSlidesNumber()-1}},{key:"isCardFullyShownInCarousel",value:function(a){var b=
1<arguments.length&&void 0!==arguments[1]&&!arguments[1]?this.slickListWidth()+this.getCarouselProductCardWidth()-1:this.slickListWidth();if(a<this.currentFirstCardIndex())return!1;var c=!1;this.selectedSliderIndex()&&(c=this.currentFirstCardIndex()<=this.selectedSliderIndex()&&this.selectedSliderIndex()<=a);var d=(a-this.currentFirstCardIndex()+1)*this.getCarouselProductCardWidth();return d=c?d+this.getCarouselProductCardVariationSelectorWidth():d,Math.abs(d)<=b}},{key:"isCardShownInCarousel",value:function(a){var b=
this.slickListWidth()+this.getCarouselProductCardWidth()-1;if(this.isRightAlignNeed()){var c=a<this.selectedSliderIndex();a=(this.totalSlidesNumber()-a)*this.getCarouselProductCardWidth();return a=c?a+this.getCarouselProductCardVariationSelectorWidth():a,Math.abs(a)<=b}return this.isCardFullyShownInCarousel(a,!1)}},{key:"getNeedScrollOnLeft",value:function(){return-1*(this.selectedSliderIndex()&&this.selectedSliderIndex()<this.currentFirstCardIndex()?this.currentFirstCardIndex()*this.getCarouselProductCardWidth()+
this.getCarouselProductCardVariationSelectorWidth():this.currentFirstCardIndex()*this.getCarouselProductCardWidth())}},{key:"updateArrowDisplay",value:function(){if(!this.isCarouselNeedToScroll())return g.default.$("#"+this.widgetId+" .slick-prev").toggleClass("disabled",0>=this.currentFirstCardIndex()),void g.default.$("#"+this.widgetId+" .slick-next").toggleClass("disabled",!0);g.default.$("#"+this.widgetId+" .slick-prev").toggleClass("disabled",0>=this.currentFirstCardIndex());g.default.$("#"+
this.widgetId+" .slick-next").toggleClass("disabled",this.isRightAlignNeed())}},{key:"applySingleCardCenterAlign",value:function(){if(this.isCenterAlignNeeded()){var a;a=this.slickListWidth();a=0===this.selectedSliderIndex()?(a-this.getCarouselProductCardWidth()-this.getCarouselProductCardVariationSelectorWidth())/2:(a-this.getCarouselProductCardWidth())/2;this.scroll(a+1,!0)}}},{key:"applyLeftAlign",value:function(){this.isLeftAlignNeed()&&this.setCardGoToFirstPosition(0)}},{key:"applyRightAlign",
value:function(){if(this.isRightAlignNeed()){var a;a=this.slickListWidth();a=this.selectedSliderIndex()||0===this.selectedSliderIndex()?-1*(this.totalSlidesNumber()*this.getCarouselProductCardWidth()+this.getCarouselProductCardVariationSelectorWidth()-a):-1*(this.totalSlidesNumber()*this.getCarouselProductCardWidth()-a);this.scroll(a+1)}else this.isCenterAlignNeeded()||this.scroll(this.getNeedScrollOnLeft());this.updateArrowDisplay()}},{key:"applyAlign",value:function(){this.applyLeftAlign();this.applyRightAlign();
this.applySingleCardCenterAlign()}},{key:"scroll",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.lastTimeOffset!=a&&(b="translate3d("+(a=0>=a||b?a:0)+"px, 0px, 0px)",g.default.$("#"+this.widgetId+" .slick-track").css("transform",b),this.updateArrowDisplay(),this.lastTimeOffset=a)}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<
c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(13)),e=c(a(37)),h=c(a(390)),k=a(4);d=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]&&arguments[0],c=this,d=arguments[1],f=arguments[2];if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.isCenterAlignNeeded=function(){return c.isSingleCardCenterAlign&&
1==c.totalSlidesNumber};this.getSelectedSliderIndex=function(){return c.selectedSliderIndex};this.getCurrentFirstCardIndex=function(){return c.currentFirstCardIndex};this.getTotalSlidesNumber=function(){return c.totalSlidesNumber};this.getLazyLoadIndex=function(){return c.toLoadIndex};this.widgetId="";this.totalSlidesNumber=this.carouselSingleDoubleProductCardVariationSelectorWidth=this.carouselSingleDoubleProductCardWidth=this.carouselProductCardVariationSelectorWidth=this.carouselProductCardWidth=
0;this.selectedSliderIndex=null;this.currentFirstCardIndex=0;this.isSingleCardCenterAlign=!1;this.isSingleDoubleCardApply=b;this.toLoadIndex=[];this.updateLazyLoadIndex=function(a){f();c.setLazyLoadIndex();(0,e.default)(a,c.toLoadIndex)||d(c.getLazyLoadIndex())}}return g(a,[{key:"setWidgetId",value:function(a){var c=this;this.widgetId=a;a={widgetId:this.widgetId,currentFirstCardIndex:function(){return c.getCurrentFirstCardIndex()},totalSlidesNumber:function(){return c.getTotalSlidesNumber()},cardWidth:function(){return c.getCarouselProductCardWidth()},
cardVariationSelectorWidth:function(){return c.getCarouselProductCardVariationSelectorWidth()},selectedSliderIndex:function(){return c.getSelectedSliderIndex()},isCenterAlignNeeded:function(){return c.isCenterAlignNeeded()},setCurrentFirstCardIndex:function(){return c.setCurrentFirstCardIndex()},setCardGoToFirstPosition:this.setCardGoToFirstPosition.bind(this)};this.scrollHelper=new h.default(a);this.scrollHelper.updateArrowDisplay();b.default.$(r).resize((0,k.guardErrorWrapper)(function(){var a=
c.toLoadIndex.slice();c.scrollHelper.applyAlign();c.updateLazyLoadIndex(a)}))}},{key:"setCarouselProductCardWidth",value:function(a){this.carouselProductCardWidth=a.cardWidth+1;this.carouselProductCardVariationSelectorWidth=a.cardWithSelectorWidth-this.carouselProductCardWidth;this.carouselSingleDoubleProductCardWidth=a.singleDoubleCardWidth+1;this.carouselSingleDoubleProductCardVariationSelectorWidth=a.singleDoubleCardWithSelectorWidth-a.singleDoubleCardWidth}},{key:"setTotalSlidesNumber",value:function(a){this.totalSlidesNumber=
a;this.currentFirstCardIndex>=this.totalSlidesNumber&&this.currentFirstCardIndex--;this.setCardGoTo(this.currentFirstCardIndex);this.scrollHelper.applyAlign()}},{key:"setCurrentFirstCardIndex",value:function(a){this.currentFirstCardIndex=a}},{key:"setSelectedSlideIndex",value:function(a){this.selectedSliderIndex=parseInt(a.split("-").pop());this.setCardGoTo(this.selectedSliderIndex);this.scrollHelper.applyAlign()}},{key:"setSingleCardCenterAlign",value:function(a){this.isSingleCardCenterAlign=a}},
{key:"setLazyLoadIndex",value:function(){for(var a=0;a<this.totalSlidesNumber;a++)this.toLoadIndex.includes(a)||this.scrollHelper.isCardShownInCarousel(a,!1)&&this.toLoadIndex.push(a)}},{key:"getCarouselProductCardWidth",value:function(){return this.isSingleDoubleCardApply&&2>=this.totalSlidesNumber?this.carouselSingleDoubleProductCardWidth:this.carouselProductCardWidth}},{key:"getCarouselProductCardVariationSelectorWidth",value:function(){return this.isSingleDoubleCardApply&&2>=this.totalSlidesNumber?
this.carouselSingleDoubleProductCardVariationSelectorWidth:this.carouselProductCardVariationSelectorWidth}},{key:"setCardGoTo",value:function(a){var b=this.toLoadIndex.slice();if(0<=a){if(this.scrollHelper.isCardFullyShownInCarousel(a))return void this.updateLazyLoadIndex(b);if(a<this.currentFirstCardIndex)for(;0<this.currentFirstCardIndex&&!this.scrollHelper.isCardFullyShownInCarousel(a);)this.prevArrowClicked();else for(;this.currentFirstCardIndex<this.totalSlidesNumber-1&&!this.scrollHelper.isCardFullyShownInCarousel(a)&&
!this.scrollHelper.isRightAlignNeed();)this.nextArrowClicked()}this.updateLazyLoadIndex(b)}},{key:"setCardGoToFirstPosition",value:function(a){var c=this.toLoadIndex.slice();if(0<=a)if(a<this.currentFirstCardIndex)for(;0<this.currentFirstCardIndex&&!this.scrollHelper.isCardFullyShownInCarousel(a);)this.prevArrowClicked();else for(;this.currentFirstCardIndex<this.totalSlidesNumber-1&&a>this.currentFirstCardIndex&&!this.scrollHelper.isRightAlignNeed()&&!b.default.$("#"+this.widgetId+" .slick-next").hasClass("disabled");)this.nextArrowClicked();
this.updateLazyLoadIndex(c)}},{key:"nextArrowClicked",value:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],c=this.toLoadIndex.slice();b.default.$("#"+this.widgetId+" .slick-next").hasClass("disabled")&&a||(this.currentFirstCardIndex++,this.scrollHelper.applyAlign());a&&this.updateLazyLoadIndex(c)}},{key:"prevArrowClicked",value:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],c=this.toLoadIndex.slice();b.default.$("#"+this.widgetId+" .slick-prev").hasClass("disabled")||
(this.currentFirstCardIndex--,this.scrollHelper.applyAlign());a&&this.updateLazyLoadIndex(c)}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.Carousel=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||
!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(0)),h=c(a(1)),k=c(a(81));d=a(3);var l=c(a(391)),m=c(a(389)),n=c(a(388));a={isSingleDoubleProductApply:h.default.bool,updateLazyLoadIndex:h.default.func,settings:h.default.object,slideWidth:h.default.object.isRequired};var p={speed:400,arrows:!0,dots:!1,infinite:!1,touchMove:!1,variableWidth:!0,swipeToSlide:!1,slidesToShow:1,centerMode:!1,centerPadding:"0",
draggable:!1},h=f.Carousel=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;var b=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return b.setCarousel=b.setCarousel.bind(b),b.scrollHelper=new l.default(b.props.isSingleDoubleProductApply,b.props.updateLazyLoadIndex,function(){b.afterChange()}),
b.scrollHelper.setCarouselProductCardWidth(b.props.slideWidth),b.prevArrowClicked=b.scrollHelper.prevArrowClicked.bind(b.scrollHelper,!0),b.nextArrowClicked=b.scrollHelper.nextArrowClicked.bind(b.scrollHelper,!0),b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"setWidgetId",value:function(a){this.scrollHelper.setWidgetId(a)}},{key:"setTotalSlidesNumber",value:function(a){this.scrollHelper.setTotalSlidesNumber(a)}},{key:"setSingleCardCenterAlign",value:function(a){this.scrollHelper.setSingleCardCenterAlign(a)}},{key:"setSelectedSlideIndex",value:function(a){this.scrollHelper.setSelectedSlideIndex(a)}},{key:"setCarousel",value:function(a){this.carousel=a}},{key:"goToFirstPosition",value:function(a){this.scrollHelper.setCardGoToFirstPosition(a)}},
{key:"goTo",value:function(a){this.scrollHelper.setCardGoTo(a)}},{key:"afterChange",value:function(){this.carousel&&this.carousel.dispatchEvent(new Event("scroll"))}},{key:"render",value:function(){var a=this.props.children;return e.default.createElement("div",{className:"al-carousel",ref:this.setCarousel},e.default.createElement(k.default,g({ref:this.setSlick},this.settings),a))}},{key:"settings",get:function(){return g({},p,this.props.settings,{prevArrow:e.default.createElement(n.default,{overrideClick:this.prevArrowClicked}),
nextArrow:e.default.createElement(m.default,{overrideClick:this.nextArrowClicked})})}}]),c}();h.propTypes=a;h.defaultProps={settings:{},isSingleDoubleProductApply:!1,updateLazyLoadIndex:function(){}};f.default=(0,d.connect)(null,null,null,{withRef:!0})(h)},,,,,,,,,,,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.Carousel=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,
d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(0)),h=c(a(22)),k=c(a(1)),l=c(a(81));d=a(3);var m=a(2),n=c(a(42)),p=a(4);a={settings:k.default.object,numberOfSlides:k.default.number.isRequired,slideWidth:k.default.number.isRequired,lazyLoad:k.default.bool,suppressVerticalScroll:k.default.bool};
var q={speed:400,arrows:!1,dots:!1,infinite:!1,touchMove:!0,variableWidth:!0},k=f.Carousel=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={slidesToShow:1},a.afterChange=a.afterChange.bind(a),a.setCarouselHighlightChangedTrue=
a.setCarouselHighlightChangedTrue.bind(a),a.setCarouselHighlightChangedFalse=a.setCarouselHighlightChangedFalse.bind(a),a.setCarousel=a.setCarousel.bind(a),a.setSlick=a.setSlick.bind(a),a.isLastSlide=a.isLastSlide.bind(a),a.isOnlySingleSlide=a.isOnlySingleSlide.bind(a),a.goTo=a.goTo.bind(a),a.carouselHighlightChanged=!0,a.touchStart=(0,p.guardErrorWrapper)(a.touchStart.bind(a)),a.preventTouch=(0,p.guardErrorWrapper)(a.preventTouch.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"componentDidMount",value:function(){this.afterChange(0);this.props.suppressVerticalScroll&&(this.carousel.addEventListener("touchstart",this.touchStart),this.carousel.addEventListener("touchmove",this.preventTouch,{passive:!1}))}},{key:"componentWillUnmount",value:function(){this.props.suppressVerticalScroll&&
(this.carousel.removeEventListener("touchstart",this.touchStart),this.carousel.removeEventListener("touchmove",this.preventTouch,{passive:!1}),this.firstClientX=null,this.firstClientY=null,this.clientX=null,this.clientY=null)}},{key:"setCarouselHighlightChangedTrue",value:function(){this.carouselHighlightChanged=!0}},{key:"setCarouselHighlightChangedFalse",value:function(){this.carouselHighlightChanged=!1}},{key:"setCarousel",value:function(a){this.carousel=a}},{key:"setSlick",value:function(a){this.slick=
a}},{key:"touchStart",value:function(a){a.touches&&a.touches.length&&(this.firstClientX=a.touches[0].clientX,this.firstClientY=a.touches[0].clientY)}},{key:"preventTouch",value:function(a){if(a.touches&&a.touches.length&&this.firstClientX&&this.firstClientY&&(this.clientX=a.touches[0].clientX-this.firstClientX,this.clientY=a.touches[0].clientY-this.firstClientY,Math.abs(this.clientY)<Math.abs(this.clientX)))return a.preventDefault(),a.returnValue=!1,!1}},{key:"afterChange",value:function(a){this.carouselHighlightChanged?
this.carouselHighlightChanged=!1:n.default.carouselLeftRightScrollSushi();this.updateSlidesToShow(a);this.isLastSlide(a)&&this.rightAlignLastSlide(a);this.carousel&&this.carousel.dispatchEvent(new Event("scroll"))}},{key:"updateSlidesToShow",value:function(a){var b=this.isOnlySingleSlide,c=this.isLastSlide,d=this.width/this.props.slideWidth;(b()||c(a))&&(d=1);this.setState({slidesToShow:d})}},{key:"rightAlignLastSlide",value:function(){var a=h.default.findDOMNode(this.carousel);a&&(a=a.querySelector(".slick-track"))&&
(a.style.transform=a.style.transform+" "+("translate3d("+(this.width-this.props.slideWidth)+"px, 0px, 0px)"))}},{key:"isLastSlide",value:function(a){return a===this.props.numberOfSlides-1}},{key:"isOnlySingleSlide",value:function(){return 1===this.props.numberOfSlides}},{key:"forceSlickUpdate",value:function(){this.slick&&this.slick.innerSlider.onWindowResized()}},{key:"goTo",value:function(a){this.slick&&(this.carouselHighlightChanged=!0,this.slick.slickGoTo(a),0<a&&this.loadSlide(a-1))}},{key:"loadSlide",
value:function(a){if(this.props.lazyLoad&&this.slick&&this.slick.innerSlider){var b=this.slick.innerSlider.state.lazyLoadedList;b.includes(a)||(b.push(a),this.slick.innerSlider.setState({lazyLoadedList:b}))}}},{key:"render",value:function(){var a=this.props.children;return e.default.createElement("div",{className:"al-carousel",ref:this.setCarousel},e.default.createElement(l.default,g({ref:this.setSlick},this.settings),a))}},{key:"width",get:function(){return this.carousel.offsetWidth}},{key:"settings",
get:function(){return g({},q,this.derivedSettings,this.props.settings,{slidesToShow:this.state.slidesToShow,afterChange:this.afterChange,setCarouselHighlightChangedTrue:this.setCarouselHighlightChangedTrue,setCarouselHighlightChangedFalse:this.setCarouselHighlightChangedFalse})}},{key:"derivedSettings",get:function(){return{lazyLoad:this.props.lazyLoad?"ondemand":void 0}}}]),c}();k.propTypes=a;k.defaultProps={settings:{},lazyLoad:!1,suppressVerticalScroll:!1};f.default=(0,d.connect)(function(a){return{lazyLoad:a.weblab&&
(0,m.isWeblabEnabled)(a.weblab.carouselMobileLazyLoad),suppressVerticalScroll:a.weblab&&(0,m.isWeblabEnabled)(a.weblab.enableVerticalScrollingSuppressionOnCarouselSwipe)}},null,null,{withRef:!0})(k)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?
"symbol":typeof a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=c(a(0)),h=c(a(6)),k=c(a(407)),l=c(a(392)),m=c(a(387)),n=c(a(352)),p=c(a(5)),q=c(a(32)),t=a(15),u=a(80),v=a(226),w=a(23),y=a(2),B=a(4),A=a(21),x=0,C=function(){var a="amazonlive-widget-shopping";return 0!==x&&(a=a+"-"+x),x+=
1,a};a=function(a){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;var b=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,a));return b.isValidItem=function(a){return a&&Object.values(u.CardTypes).includes(a.type)&&("PRODUCT"!==a.type||a.product)},b.setState=b.setState.bind(b),b.widgetId=
C(),b.sliderRefName="slider_0",b.logger=new p.default("ShoppingCarouselWidget:"+b.widgetId),b.state=v.shoppingCarouselStateHandler.getState(a.broadcastAsin),b.setCarousel=b.setCarousel.bind(b),b.updateLazyLoadIndex=b.updateLazyLoadIndex.bind(b),b.setSelectedCardId=b.setSelectedCardId.bind(b),b.setResponsiveCardWidth=(0,B.guardErrorWrapper)(b.setResponsiveCardWidth.bind(b)),b}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"componentDidMount",value:function(){var a=this,b=this.props,c=b.enableSingleDoubleCardCarousel,d=b.inExpandedPlayer,e=b.gatewayDesktopSlotId,f=b.emitDesktopEvents,g=b.updateHasGatewayEventEmitted,b=b.emitWidgetLoadLatency,k=this.state.initialized;this.logger.debug("Carousel widget created.");
v.shoppingCarouselStateHandler.addStateChangeHandler(this.setState);b({},A.metricsEmitPriority.HIGH);this.carousel.setWidgetId&&this.carousel.setWidgetId(this.widgetId);k&&(this.carousel.setTotalSlidesNumber&&this.carousel.setTotalSlidesNumber(this.getProductSegmentItemLength()),(0,y.setTimeout)(function(){return a.handleHighlightChange()},0),f&&(this.emitGatewayEvents(e+"-visible"),this.emitGatewayEvents(e+"-active"),g(!0)));e=t.carouselConfig.singleDoubleCardCarouselCenterAlign;c&&!h.default.isDeviceMobile()&&
(d||e)&&this.carousel.setSingleCardCenterAlign(!0);this.getCarouselConfig().responsiveSingleCard&&(r.addEventListener("resize",this.setResponsiveCardWidth),r.addEventListener("orientationchange",this.setResponsiveCardWidth),this.setResponsiveCardWidth())}},{key:"componentDidUpdate",value:function(a,b){var c=this;this.state.initialized&&(this.carousel.setTotalSlidesNumber&&this.carousel.setTotalSlidesNumber(this.getProductSegmentItemLength()),(0,y.setTimeout)(function(){return c.handleHighlightChange(b.highlight.segmentItemIndex)},
0))}},{key:"componentWillUnmount",value:function(){this.logger.debug("Carousel widget destroyed.");v.shoppingCarouselStateHandler.removeStateChangeHandler(this.setState);r.removeEventListener("resize",this.setResponsiveCardWidth);r.removeEventListener("orientationchange",this.setResponsiveCardWidth)}},{key:"setCarousel",value:function(a){a&&(this.carousel=a.wrappedInstance)}},{key:"setSelectedCardId",value:function(a){var b=this;this.setState({selectedCardKey:a===this.state.selectedCardKey?"":a},
function(){b.getCarouselConfig().increaseCardWidthForVariation&&b.carousel.setSelectedSlideIndex(b.state.selectedCardKey)})}},{key:"getProductSegmentItemLength",value:function(){return this.state.segments[0].segmentItems.length}},{key:"getItemDetails",value:function(a,b){var c=this.props;return{sessionId:c.sessionId,episodeAsin:c.broadcastAsin,segmentId:0,segmentItemId:b.segmentItemId,position:a}}},{key:"getCarouselConfig",value:function(){var a=this.props,b=a.carouselLayout,a=a.playerExpanded,c=
t.carouselConfig.slickConfig,d=t.carouselConfig.expandedSlickConfig;return"oneProduct"===b&&t.carouselConfig.enableOneProductLayout?(b=this.state.segments[0],(0,n.default)(b)):a&&d?d(b):c(b)}},{key:"getSingleDoubleSegmentItemCss",value:function(a){if(this.props.enableSingleDoubleCardCarousel&&this.isSingleDoubleProductApply()){if(1===a)return" single-card no-box";if(h.default.isDeviceDesktop()&&2===a)return" double-card"}return""}},{key:"getCarouselProducts",value:function(){var a=this;return this.state.segments.map(function(b){return a.renderSingleCarouselContent(b.segmentItems,
b.segmentItems)})}},{key:"setResponsiveCardWidth",value:function(){var a=this.getCarouselConfig().cardWidth;a!==this.state.responsiveCardWidth&&(this.setState({responsiveCardWidth:a}),this.carousel&&this.carousel.forceSlickUpdate&&this.carousel.forceSlickUpdate())}},{key:"handleHighlightChange",value:function(a){var b=this.state.highlight;a!==b.segmentItemIndex&&b.firstHighlight&&(a=this.props.inExpandedPlayer,t.carouselConfig.goToFirstPositionOnHighlight&&!a?this.carousel.goToFirstPosition(b.segmentItemIndex):
this.carousel.goTo(b.segmentItemIndex))}},{key:"updateLazyLoadIndex",value:function(a){this.props.enableCarouselDesktopLazyLoad&&this.setState({toLoadIndex:a})}},{key:"emitGatewayEvents",value:function(a){q.default.getWindow().GWI&&(q.default.getWindow().GWI.recordLatency(a),q.default.getWindow().GWI.register(a))}},{key:"isHighlighted",value:function(a){return this.state.highlight.segmentItemIndex===a}},{key:"isProductCardSelected",value:function(a){return a===this.state.selectedCardKey}},{key:"isSingleDoubleProductApply",
value:function(){var a=this.props,b=a.inExpandedPlayer;return a.enableSingleDoubleCardCarousel&&(t.carouselConfig.enableSingleDoubleCardCarousel||b)}},{key:"isCardForceExpand",value:function(a){return this.getCarouselConfig().variationSelectionDisplayByDefault&&2>=a&&this.isSingleDoubleProductApply()}},{key:"isCardToLoad",value:function(a){var b=this.props.enableCarouselDesktopLazyLoad,c=this.state.toLoadIndex;return!(!h.default.isDeviceMobile()&&b)||c&&c.includes(a)}},{key:"renderSingleCarouselContent",
value:function(a,b){for(var c=[],d=this.state.responsiveCardWidth,f=this.props,g=f.increaseCardWidthForVariation,n=f.broadcastId,p=f.perks,f=f.inExpandedPlayer,q=0;q<b.length;q+=1){var t="segmentItemId-"+b[q].segmentItemId+"-segment-0-slider-card-"+q,u=this.getSingleDoubleSegmentItemCss(b.length);if(q<a.length&&this.isValidItem(a[q])&&this.isCardToLoad(q)){var v=this.getItemDetails(q,b[q]);c.push(e.default.createElement("div",{key:t},e.default.createElement(m.default,{key:t,item:a[q],sliderCardKey:t,
details:v,highlighted:this.isHighlighted(q),onOptionClicked:this.setSelectedCardId,isProductCardSelected:this.isProductCardSelected(t),singleDoubleCarouselCardCss:u,increaseCardWidthForVariation:g,broadcastId:n,deals:p&&p.deals,forceCardExpand:this.isCardForceExpand(b.length),inExpandedPlayer:f,width:d})))}else c.push(e.default.createElement("div",{className:"slick-react-card",key:t},e.default.createElement("div",{className:"amazonlive-shopping-carousel-empty-card"},e.default.createElement("div",
{className:"a-loading-static"},e.default.createElement("div",{className:"a-loading-static-inner"})))))}if(0===c.length)return e.default.createElement("div",{className:"empty-carousel-no-products",key:this.sliderRefName});var w;b=this.getCarouselConfig();a=b.cardWidth;b=b.slickSettings;return w=h.default.isDeviceMobile()?e.default.createElement(k.default,{numberOfSlides:this.getProductSegmentItemLength(),slideWidth:a,ref:this.setCarousel,settings:b},c):e.default.createElement(l.default,{ref:this.setCarousel,
settings:b,slideWidth:a,updateLazyLoadIndex:this.updateLazyLoadIndex,isSingleDoubleProductApply:this.isSingleDoubleProductApply()},c),e.default.createElement("div",{className:"amazonlive-widget-shopping-react-slick-carousel",key:this.sliderRefName},w)}},{key:"render",value:function(){if(!this.state.initialized)return e.default.createElement("div",null);var a=this.props.broadcastAsin,b=this.getCarouselConfig(),c=b.cardWidth,d=b.cssLayout,b=b.responsiveSingleCard,c="object"===(void 0===c?"undefined":
g(c))?c.cardWidth:c,f={};return b||"number"!=typeof c||(f.minWidth=c+1+"px"),e.default.createElement("div",{className:"carousel-container",style:f},e.default.createElement("div",{className:d+" amazonlive-widget-shopping",id:this.widgetId,"data-show-asin":a,"aria-label":"Carousel"},this.getCarouselProducts()))}}]),c}();a.propTypes={broadcastAsin:d.default.string.isRequired,broadcastId:d.default.string,perks:d.default.object,emitDesktopEvents:d.default.bool,gatewayDesktopSlotId:d.default.string,updateHasGatewayEventEmitted:d.default.func,
carouselLayout:d.default.string,playerExpanded:d.default.bool,emitWidgetLoadLatency:d.default.func.isRequired,inExpandedPlayer:d.default.bool,enableSingleDoubleCardCarousel:d.default.bool,increaseCardWidthForVariation:d.default.bool,sessionId:d.default.string,enableCarouselDesktopLazyLoad:d.default.bool};a.defaultProps={broadcastId:"",updateHasGatewayEventEmitted:function(){},carouselLayout:"",playerExpanded:!1,inExpandedPlayer:!1,perks:{},emitDesktopEvents:!1,gatewayDesktopSlotId:"",enableSingleDoubleCardCarousel:!1,
increaseCardWidthForVariation:!1,sessionId:"",enableCarouselDesktopLazyLoad:!1};f.default=(0,w.enableSushiMetrics)("carousel")(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=a(3);var b=function(a){var b=a.isEmbeddedRequest?"https://"+a.marketPlaceName:"";return g.default.createElement("a",{className:"amzlv-nb",onClick:function(){return r.open(b+"/b/?node\x3d13354800011","_blank")}},g.default.createElement("img",
{className:"amzlv-nb-live-logo",src:a.navbannerLogo}))};b.propTypes={isEmbeddedRequest:d.default.object.isRequired,marketPlaceName:d.default.string.isRequired,navbannerLogo:d.default.string.isRequired};f.default=(0,a.connect)(function(a){return{isEmbeddedRequest:!!a["widget-options"]&&a["widget-options"].embedded,marketPlaceName:a["widget-options"]?a["widget-options"].marketplaceName:"",navbannerLogo:a.mediaclient.data.navbannerLogo}})(b)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}
function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}Object.defineProperty(f,"__esModule",{value:!0});f.OptionsOverlay=void 0;var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(1)),h=c(a(0));
d=a(3);var k=a(4);a={closeOverlayCallback:e.default.func,showTitle:e.default.string};e=f.OptionsOverlay=function(a){function c(){var a,b,d;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;for(var e=arguments.length,f=Array(e),h=0;h<e;h++)f[h]=arguments[h];return b=d=g(this,(a=c.__proto__||Object.getPrototypeOf(c)).call.apply(a,[this].concat(f))),d.preventDefault=function(a){a.preventDefault()},g(d,b)}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,h.default.Component),b(c,[{key:"componentDidMount",value:function(){document.body.classList.add("amz-lv-no-scroll");document.addEventListener("touchmove",this.preventDefault)}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("amz-lv-no-scroll");document.removeEventListener("touchmove",
this.preventDefault)}},{key:"render",value:function(){var a=this.props,b=a.closeOverlayCallback,a=a.showTitle,b=(0,k.guardErrorWrapper)(b);return h.default.createElement("div",{className:"amazonlive-more-options-overlay",key:"options-overlay"},h.default.createElement("span",{role:"presentation",className:"amazonlive-more-options-overlay-close a-icon a-icon-close-white",key:"options-overlay-close",onClick:b}),h.default.createElement("div",{className:"amazonlive-more-options-overlay-title",key:"options-title"},
h.default.createElement("p",null,a)))}}]),c}();e.propTypes=a;e.defaultProps={closeOverlayCallback:function(){},showTitle:""};f.default=(0,d.connect)(function(a){return{showTitle:a.show.data.title}})(e)},,,,,,,,,,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.OptionsBarWidget=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(1)),e=c(a(0)),h=c(a(117));d=a(3);var k=c(a(410)),l=c(a(409)),m=a(4);a={isEmbeddedRequest:b.default.bool,navbannerLogo:b.default.string,moreOptionsIcon:b.default.string};b=f.OptionsBarWidget=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;a=(b.__proto__||Object.getPrototypeOf(b)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!=typeof a&&"function"!=typeof a?this:a;return a.state={isOverlayOn:!1},a.openOverlay=(0,m.guardErrorWrapper)(a.openOverlay.bind(a)),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.default.Component),g(b,[{key:"openOverlay",
value:function(){this.setState({isOverlayOn:!0})}},{key:"closeOverlay",value:function(){this.setState({isOverlayOn:!1})}},{key:"render",value:function(){var a=this;return e.default.createElement("div",{className:"amazonlive-options-bar"},this.props.isEmbeddedRequest&&this.props.navbannerLogo&&e.default.createElement(l.default,null),e.default.createElement("div",{className:"amazonlive-more-options-btn",onClick:this.openOverlay},e.default.createElement("img",{className:"more-options-icon",src:this.props.moreOptionsIcon})),
e.default.createElement(h.default,{transitionName:"fade-partial",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.state.isOverlayOn&&e.default.createElement(k.default,{closeOverlayCallback:function(){return a.closeOverlay()}})))}}]),b}();b.propTypes=a;f.default=(0,d.connect)(function(a){return{isEmbeddedRequest:!!a["widget-options"]&&a["widget-options"].embedded,navbannerLogo:a.mediaclient.data.navbannerLogo,moreOptionsIcon:a.mediaclient.data.moreOptionsIcon}})(b)},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}Object.defineProperty(f,"__esModule",{value:!0});var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(1));var e=
c(a(0)),h=c(a(13)),k=c(a(12)),l=c(a(25)),m=c(a(30)),n=c(a(301)),p=c(a(104));a=function(a){function c(){var a,b,d;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");!0;for(var f=arguments.length,h=Array(f),k=0;k<f;k++)h[k]=arguments[k];return b=d=g(this,(a=c.__proto__||Object.getPrototypeOf(c)).call.apply(a,[this].concat(h))),d.getPlaceholder=function(){return e.default.createElement("div",{className:"placeholder-for-testing"})},g(d,b)}return function(a,b){if("function"!=
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.default.Component),b(c,[{key:"componentDidMount",value:function(){var a=this.props,b=a.isEmbeddedRequest,a=a.autoFocus;this.dom&&!b&&a&&this.dom.scrollIntoView()}},{key:"getChatLayout",value:function(){var a=this.props,
b=a.isChatEnabled,c=a.isExpanded,d=a.isEmbeddedRequest;return a.isAskQuestionEnabled?e.default.createElement("div",null):b&&e.default.createElement("div",{className:(0,k.default)("amazonlive-react-lightbox-interactive-chat",{"no-collapse":d})},l.default.getChatWidget(c))}},{key:"getCarouselLayout",value:function(){return this.props.isCarouselEnabled&&e.default.createElement("div",{className:"amazonlive-react-lightbox-interactive-carousel"},l.default.getShoppingCarouselWidget())}},{key:"getBannerLayout",
value:function(){return this.props.isBannerEnabled&&e.default.createElement("div",{className:"amazonlive-react-lightbox-banner"},e.default.createElement(n.default,null))}},{key:"getAskQuestionLayout",value:function(){return this.props.isAskQuestionEnabled&&l.default.getAskQuestionWidget()}},{key:"getDestinationIngress",value:function(){return this.props.isDestinationIngressEnabled&&e.default.createElement(p.default,null)}},{key:"getInlineLayout",value:function(){var a=this.state&&null!=this.state.playerControl?
{playerControl:this.state.playerControl}:{},b=h.default.$(".amazonlive-common .amzlv-channel-header").height();return e.default.createElement("div",null,e.default.createElement("div",{style:{marginTop:-b-25+"px",paddingTop:b+"px"}}),e.default.createElement("div",{className:"amazonlive-react-lightbox-layout"},this.getBannerLayout(),e.default.createElement("div",{className:"amazonlive-react-lightbox-video"},e.default.createElement(m.default,a)),this.getCarouselLayout(),this.getAskQuestionLayout(),this.getChatLayout(),
this.getDestinationIngress()))}},{key:"render",value:function(){var a=this,b=this.props,c=b.ready,b=b.enableSkeletonLoading,c=(0,k.default)("amazonlive-react-lightbox-inline",{"skeleton-loading":!c&&b});return e.default.createElement("div",{className:c,ref:function(b){a.dom=b}},this.getInlineLayout())}}]),c}();a.propTypes={ready:d.default.bool.isRequired,isEmbeddedRequest:d.default.bool,isChatEnabled:d.default.bool,isCarouselEnabled:d.default.bool,isAskQuestionEnabled:d.default.bool,isBannerEnabled:d.default.bool,
isDestinationIngressEnabled:d.default.bool,autoFocus:d.default.bool,isExpanded:d.default.bool,title:d.default.string,enableSkeletonLoading:d.default.bool};a.defaultProps={isEmbeddedRequest:!1,isChatEnabled:!0,isCarouselEnabled:!0,isAskQuestionEnabled:!1,isBannerEnabled:!1,autoFocus:!1,isExpanded:!1,title:"",enableSkeletonLoading:!1,isDestinationIngressEnabled:!1};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));
var g=c(a(0)),b=a(3),e=c(a(64)),h=c(a(18)),k=c(a(298));a=function(a){return g.default.createElement("div",{className:"amazonlive-react-show-page"},a.showBackground&&g.default.createElement(k.default,null),g.default.createElement(e.default,null))};a.propTypes={showBackground:d.default.bool.isRequired};f.default=(0,b.connect)(function(a){return{showBackground:a.playlist.loadStatus!==h.default.SUCCESS&&a.show.loadStatus===h.default.SUCCESS}})(a)},function(d,f,a){Object.defineProperty(f,"__esModule",
{value:!0});d=a(3);var c=a(14);a=function(a){return a&&a.__esModule?a:{default:a}}(a(192));f.default=(0,d.connect)(void 0,function(a){return{onCapturingClick:function(){return a((0,c.userEngaged)())}}})(a.default)},,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,
e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(194)),e=c(a(84)),h=c(a(32));d=function(){function a(c,d,f){var g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},q=g.targetAreaRatio,t=void 0===q?.5:q,u=g.containedInElement,g=g.customEvents;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.viewportMonitorBase=new b.default(function(){var a;if(null!=c&&e.default.isViewportVisible()){var b=0;a=(h.default.isSafeFrame()?
(b=h.default.getAmazonLiveSafeFrameWindow().getInViewPercentage()/100,void 0!==u&&null!==u&&.5<b&&(b=e.default.elementRatioInViewport(c,{containedInElement:u}))):b=e.default.elementRatioInViewport(c,{containedInElement:u}),b>=t)}else a=!1;return a},d,f,{customEvents:g})}return g(a,[{key:"start",value:function(){this.viewportMonitorBase.start()}},{key:"stop",value:function(){this.viewportMonitorBase.stop()}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=
function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(5)),b=a(2);d=function(){function a(b,c){var d=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).interval,d=void 0===d?6E4:d;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
!0;this.name=b;this.logger=new g.default("Heartbeat:"+b);this.callback=c;this.interval=d}return c(a,[{key:"start",value:function(){var a=this;this.logger.debug("Started");this.callback(0);this.timer=(0,b.setInterval)(function(){a.callback(a.interval)},this.interval)}},{key:"stop",value:function(){this.logger.debug("Stopped");clearInterval(this.timer)}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(5));
var g=c(a(32)),b=new d.default("MetricsPixel"),e={};f.default={fire:function(a){var c=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).justOnce;void 0!==c&&c&&e[a]?b.info("Already fired: "+a):(c=g.default.getWindow().document.createElement("img"),c.setAttribute("src",a),c.setAttribute("style","display:none"),g.default.getWindow().document.body.appendChild(c),e[a]=!0,b.info("Fired: "+a))}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",
{value:!0});var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a(0),h=c(e),k=c(a(195)),l=a(21);f.default=function(a,c,d){var f=(3<arguments.length&&
void 0!==arguments[3]?arguments[3]:{}).autoImpression,t=void 0!==f&&f;return function(f){var q=function(q){function v(b){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");!0;var e=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));e.autoImpression=t;b="function"==typeof c?c(b):c;var f=new k.default(a,
b,{beforeEmitMetrics:function(){"function"==typeof c&&f.setWidgetPayload(c(e.props))}});b="function"==typeof d?d(f.emitMetrics):{};return e.emitMetricsProps=g({},f.emitMetricsMethods,b),e.setWrappedComponentRef=e.setWrappedComponentRef.bind(e),e}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&
(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(v,e.Component),b(v,[{key:"componentDidMount",value:function(){this.autoImpression&&this.emitMetricsProps.emitImpressionMetrics({},l.metricsEmitPriority.LOW)}},{key:"getWrappedInstance",value:function(){return"function"==typeof this.wrappedInstance.getWrappedInstance&&this.wrappedInstance.getWrappedInstance()||this.wrappedInstance}},{key:"setWrappedComponentRef",value:function(a){this.wrappedInstance=a}},{key:"render",value:function(){return h.default.createElement(f,
g({},this.props,this.emitMetricsProps,{ref:this.setWrappedComponentRef}))}}]),v}();return q.WrappedComponent=f.WrappedComponent||f,q.displayName="SushiMetricsEnabled("+(f.displayName||f.name||"Component")+")",q}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.BlankPageWrapper=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(1)),e=c(a(0));d=a(3);var h=c(a(12)),k=c(a(18)),l=c(a(24)),m=c(a(2)),n=a(23),p=a(21),q=c(a(6)),t=c(a(8)),u=c(a(431)),v=c(a(87)),r=c(a(86));a={componentId:b.default.string,broadcastId:b.default.string,emptyPlaylist:b.default.bool,collapse:b.default.bool,isMshop:b.default.bool,emitInViewportHeartbeatMetrics:b.default.func.isRequired,emitOnPageHeartbeatMetrics:b.default.func.isRequired,enablePageWidgetHeartbeat:b.default.bool};
b=f.BlankPageWrapper=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.onPageHeartbeat=new u.default("WidgetOnPage",function(a){c.props.broadcastId&&c.props.emitOnPageHeartbeatMetrics(a)}),c.inViewportHeartbeat=
new u.default("WidgetInViewport",function(a){c.props.broadcastId&&c.props.emitInViewportHeartbeatMetrics(a)}),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.default.Component),g(b,[{key:"componentDidMount",value:function(){this.props.broadcastId&&
this.emitWidgetInViewport(this.props.broadcastId);this.props.enablePageWidgetHeartbeat&&this.onPageHeartbeat.start()}},{key:"componentWillReceiveProps",value:function(a){void 0!==a.broadcastId&&a.broadcastId!==this.lastEmittedBroadcastId&&this.emitWidgetInViewport(a.broadcastId)}},{key:"componentWillUnmount",value:function(){this.viewportMonitorAreaTimer&&this.viewportMonitorAreaTimer.stop();this.props.enablePageWidgetHeartbeat&&(this.onPageHeartbeat.stop(),this.inViewportHeartbeat.stop())}},{key:"emitWidgetInViewport",
value:function(a){var b=this,c=!1;this.viewportMonitorAreaTimer=new r.default(this.domElement,function(){c||(v.default.emitWidgetInViewportMetric(a),c=!0);b.props.enablePageWidgetHeartbeat&&b.inViewportHeartbeat.start()},this.props.enablePageWidgetHeartbeat?{exitCallback:function(){return b.inViewportHeartbeat.stop()},repeating:!0}:{});this.viewportMonitorAreaTimer.start();this.lastEmittedBroadcastId=a}},{key:"renderPage",value:function(a){var b=this;return e.default.createElement(t.default.Context,
{componentDidMount:function(){m.default.registerUnique("amazonlive-react-rendered")}},e.default.createElement("div",{className:a,ref:function(a){b.domElement=a}},this.props.children))}},{key:"render",value:function(){var a=(0,h.default)("amazonlive-common",q.default.isDeviceMobile()?"amazonlive-mobile":"amazonlive-desktop","amazonlive-"+this.props.componentId,{"amazonlive-mshop":this.props.isMshop});return this.props.emptyPlaylist||this.props.collapse||!this.props.children?e.default.createElement("div",
null):this.renderPage(a)}}]),b}();n=(0,n.enableSushiMetrics)("pageWidget",null,function(a){return{emitInViewportHeartbeatMetrics:function(b){return a({EVENT_TYPE:"heartbeat",EVENT_TRIGGER_TYPE:"inViewport",INT_PAYLOAD:b},p.metricsEmitPriority.LOW)},emitOnPageHeartbeatMetrics:function(b){return a({EVENT_TYPE:"heartbeat",EVENT_TRIGGER_TYPE:"onPage",INT_PAYLOAD:b},p.metricsEmitPriority.LOW)}}})(b);b.propTypes=a;b.defaultProps={componentId:void 0,broadcastId:void 0,emptyPlaylist:void 0,collapse:void 0,
isMshop:void 0,enablePageWidgetHeartbeat:!1};f.default=(0,d.connect)(function(a){var b=a.playlist.data,c=a.player&&a.player.ready&&a.playlist.loadStatus===k.default.SUCCESS&&b&&b.playlist&&a.show&&a.show.loadStatus===k.default.SUCCESS&&a["shopping-carousel"].loadStatus&&a["shopping-carousel"].loadStatus===k.default.SUCCESS,d=c&&a.currentBroadcast.asin,d=d&&b.asinToBroadcastMap[d],b={collapse:!!c&&b.playlist[d].broadcastStatus===l.default.SHOW_END,emptyPlaylist:a.playlist.loadStatus===k.default.SUCCESS&&
!b.playlist,enablePageWidgetHeartbeat:m.default.isWeblabEnabled(m.default.getNestedValue(a,"weblab.enablePageWidgetHeartbeat"))};return c&&(b.broadcastId=a.currentBroadcast.id),b.isMshop=q.default.isMshop(),b})(n)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(121));var g=c(a(120)),b=c(a(196));a=c(a(119));f.default={carousel:{titleMaxLine:1,slickConfig:d.default,productLayout:g.default,productDetailsLayout:b.default,customTileLayout:a.default,
customTileImageStyle:"DesktopVerticalCustomTileLayout"}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(121));var g=c(a(120)),b=c(a(196));a=c(a(119));f.default={carousel:{titleMaxLine:1,slickConfig:d.default,productLayout:g.default,productDetailsLayout:b.default,customTileLayout:a.default,customTileImageStyle:"DesktopVerticalCustomTileLayout",goToFirstPositionOnHighlight:!0,enableSingleDoubleCardCarousel:!0,showEventDealBadge:!0}}},
function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d=c(a(1));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common"},g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common-title"},a.productTitle),g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common-review-badge"},g.default.createElement("span",
{className:"al-lo-carousel-product-details-brand-tile-common-review"},a.customerReview)),g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common-price"},a.productPrice),g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common-deal"},a.productDeal),a.badge&&!a.productDeal&&g.default.createElement("span",{className:"al-lo-carousel-product-details-brand-tile-common-badge"},a.badge))};a.propTypes={productTitle:d.default.element.isRequired,
productPrice:d.default.element.isRequired,customerReview:d.default.element,badge:d.default.element};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d=c(a(1));a=a(27);d={dealBadge:d.default.element,notification:d.default.element,productImage:d.default.element.isRequired,productDetails:d.default.element.isRequired,productActions:d.default.element,variationSelection:d.default.shape({selectors:d.default.element,
actionButton:d.default.element,cancelButton:d.default.element}),removeActionButton:d.default.bool};var b=function(a){var b=a.notification,c=a.productImage,d=a.productActions,f=a.productDetails,n=a.variationSelection,p=a.removeActionButton;return g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal"},g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-dealBadge"},a.dealBadge),g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-notification"},
b),g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-left"},g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-image"},c),g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-details"},f,!p&&d)),!p&&n&&g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-right"},g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-variation"},n.selectors,g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-variation-buttons"},
n.cancelButton,g.default.createElement("div",{className:"al-lo-brand-carousel-horizontal-action-button"},n.actionButton)))))};b.propTypes=d;b.defaultProps={dealBadge:null,notification:null,productActions:null,variationSelection:null,removeActionButton:!1};f.default=(0,a.connectForRemoveActionButtonFeature)(b)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return{slickSettings:{arrows:!0,touchMove:!1,swipe:!1,swipeToSlide:!1,slidesToShow:1,centerMode:!1,centerPadding:"0",
draggable:!1},increaseCardWidthForVariation:!0,cssLayout:"al-brand-tile-carousel-container-layout",cardWidth:{cardWidth:321,cardWithSelectorWidth:577,singleDoubleCardWidth:509,singleDoubleCardWithSelectorWidth:765}}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(439));var g=c(a(438));a=c(a(437));f.default={carousel:{singlePriceSize:"medium",multiPriceSize:"large",slickConfig:d.default,productLayout:g.default,productDetailsLayout:a.default,
primeBadgeSize:"medium",productImageStyle:"desktopBrandTile",enableSingleDoubleCardCarousel:!0,singleDoubleCardCarouselCenterAlign:!0}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){var c=!a.productDeal&&a.badge;return g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details"},g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-title"},
a.productTitle),a.customerReview&&g.default.createElement("span",{className:"al-lo-carousel-product-details al-lo-ad-details-review"},a.customerReview),g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-price-badge-container"},g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-price"},a.productPrice),c&&g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-badge"},a.badge)),g.default.createElement("div",
{className:"al-lo-carousel-product-details al-lo-ad-details-deal"},a.productDeal))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,productDeal:d.default.element,customerReview:d.default.element,badge:d.default.element,className:d.default.string};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(121));var g=c(a(120)),b=c(a(441));a=c(a(119));f.default={player:{enterFullscreenOnExpand:!0,
collapseOnStreamEnds:!0,collapseOnUnmount:!0,showTitleInOverlay:!1,vodFullScreen:!0},carousel:{slickConfig:d.default,productLayout:g.default,productDetailsLayout:b.default,customTileLayout:a.default,customTileImageStyle:"DesktopVerticalCustomTileLayout"}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){var c=a.customTileDetails;return g.default.createElement("div",{className:"ad-mini-custom-tile"},
g.default.createElement("div",{className:"image"},a.customTileImage),g.default.createElement("div",{className:"details"},c))};a.propTypes={customTileImage:d.default.element.isRequired,customTileDetails:d.default.element.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){var c=a.productPrice;return g.default.createElement("div",{className:"ad-mini-details"},g.default.createElement("div",
{className:"title"},a.productTitle),g.default.createElement("div",{className:"price"},c))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.AdMiniProductLayout=void 0;d=c(a(1));var g=c(a(0));a=a(27);d={notification:d.default.element,productImage:d.default.element.isRequired,productDetails:d.default.element.isRequired,productActions:d.default.element,
removeActionButton:d.default.bool};var b=f.AdMiniProductLayout=function(a){var b=a.productImage,c=a.productDetails,d=a.productActions,f=a.removeActionButton;return g.default.createElement("div",{className:"ad-mini-product"},g.default.createElement("div",{className:"notification"},a.notification),g.default.createElement("div",{className:"image"},b),g.default.createElement("div",{className:"details"},c,!f&&d))};b.propTypes=d;b.defaultProps={notification:null,productActions:null,removeActionButton:!1};
f.default=(0,a.connectForRemoveActionButtonFeature)(b)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return{slickSettings:{arrows:!0,touchMove:!1,swipe:!1,swipeToSlide:!1,slidesToShow:1,centerMode:!0,centerPadding:"0",draggable:!1},cssLayout:"ad-mini-carousel-container-layout",cardWidth:{cardWidth:297,cardWithSelectorWidth:297,singleDoubleCardWidth:297,singleDoubleCardWithSelectorWidth:297},increaseCardWidthForVariation:!1}}},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(446));var g=c(a(445)),b=c(a(444));a=c(a(443));f.default={player:{enterFullscreenOnExpand:!0,collapseOnStreamEnds:!0,collapseOnUnmount:!0,showTitleInOverlay:!1,vodFullScreen:!0},carousel:{titleMaxLine:1,slickConfig:d.default,productLayout:g.default,productDetailsLayout:b.default,customTileLayout:a.default}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
d=c(a(203));var g=c(a(202)),b=c(a(206)),e=c(a(201)),h=c(a(200));a=c(a(197));f.default={player:{enableExpand:!0,expandOnInteraction:!0,expandOverrideComponent:"mobileShow",showControlOverlayOnPlay:!1,showControlOverlayOnUndock:!1,showControlOverlayOnSwitchToLive:!1,showExpandOverlay:!0,showCollapseButton:!0,showOverlayOnMount:!1,overlayLayout:d.default,showChatOnExpand:!0,minimizePollWhenCollapsed:!0},carousel:{alwaysSmallPrice:!0,priceSpaceCharacter:!1,slickConfig:g.default,expandedSlickConfig:b.default,
productLayout:a.default,productDetailsLayout:e.default,customTileLayout:h.default}}},,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(203));var g=c(a(202)),b=c(a(201)),e=c(a(200));a=c(a(197));f.default={player:{enableExpand:!1,enableUnmuteAnywhere:!1,expandOnInteraction:!0,showControlOverlayOnPlay:!1,showControlOverlayOnUndock:!1,showControlOverlayOnSwitchToLive:!1,showExpandOverlay:!0,showCollapseButton:!0,showOverlayOnMount:!1,
overlayLayout:d.default,minimizePollWhenCollapsed:!0},carousel:{alwaysSmallPrice:!0,priceSpaceCharacter:!1,slickConfig:g.default,productLayout:a.default,productDetailsLayout:b.default,customTileLayout:e.default,showEventDealBadge:!0}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.BrandTileProductLayout=void 0;d=c(a(1));var g=c(a(0));a=a(27);d={dealBadge:d.default.element,notification:d.default.element,productImage:d.default.element.isRequired,
productDetails:d.default.element.isRequired,productActions:d.default.element,variationSelection:d.default.shape({selectors:d.default.element,actionButton:d.default.element,cancelButton:d.default.element}),removeActionButton:d.default.bool};var b=f.BrandTileProductLayout=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile"},g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile-notification"},a.notification),g.default.createElement("div",
{className:"al-lo-carousel-product-brand-tile-left"},g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile-product-image"},a.productImage),g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile-deal-badge-container"},g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile-deal-badge"},a.dealBadge)),g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile-product-details"},a.productDetails,!a.removeActionButton&&a.productActions)),
!a.removeActionButton&&a.variationSelection&&g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile-right"},g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile-variation"},a.variationSelection.selectors,g.default.createElement("div",{className:"al-lo-carousel-product-brand-tile-variation-buttons"},a.variationSelection.actionButton,a.variationSelection.cancelButton))))};b.propTypes=d;b.defaultProps={removeActionButton:!1};f.default=(0,a.connectForRemoveActionButtonFeature)(b)},
function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common"},g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common-title"},a.productTitle),g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common-price"},a.productPrice),a.productDeal&&g.default.createElement("div",
{className:"al-lo-carousel-product-details-brand-tile-common-deal"},a.productDeal),g.default.createElement("div",{className:"al-lo-carousel-product-details-brand-tile-common-review-badge"},a.badge&&g.default.createElement("span",{className:"al-lo-carousel-product-details-brand-tile-common-badge"},a.badge),a.customerReview&&g.default.createElement("span",{className:"al-lo-carousel-product-details-brand-tile-common-review"},a.customerReview)))};a.propTypes={productTitle:d.default.element.isRequired,
productPrice:d.default.element.isRequired,productDeal:d.default.element,customerReview:d.default.element,badge:d.default.element};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return{slickSettings:{swipeToSlide:!1,slidesToShow:1,slidesToScroll:1,centerMode:!1,centerPadding:"0"},increaseCardWidthForVariation:!0,cssLayout:"al-brand-tile-carousel-container-layout",cardWidth:240}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}
Object.defineProperty(f,"__esModule",{value:!0});d=c(a(457));var g=c(a(456));a=c(a(455));f.default={carousel:{slickConfig:d.default,primeBadgeSize:"medium",productDetailsLayout:g.default,productLayout:a.default}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=a(27);var b=function(a){return g.default.createElement("div",{className:"al-lo-carousel-vertical"},g.default.createElement("div",{className:"al-lo-carousel-vertical-highlighted"},
a.highlightBar),g.default.createElement("div",{className:"al-lo-carousel-vertical-dealBadge"},a.dealBadge),g.default.createElement("div",{className:"al-lo-carousel-vertical-notification"},a.notification),g.default.createElement("div",{className:"al-lo-carousel-vertical-info"},g.default.createElement("div",{className:"al-lo-carousel-vertical-image"},a.productImage),g.default.createElement("div",{className:"al-lo-carousel-vertical-details"},a.productDetails),!a.removeActionButton&&a.productActions))};
b.propTypes={highlightBar:d.default.element,dealBadge:d.default.element,notification:d.default.element,productImage:d.default.element.isRequired,productDetails:d.default.element.isRequired,productActions:d.default.element,variationSelection:d.default.element,removeActionButton:d.default.bool};b.defaultProps={removeActionButton:!1};f.default=(0,a.connectForRemoveActionButtonFeature)(b)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-vertical"},g.default.createElement("div",{className:"al-lo-carousel-vertical-highlighted"},a.highlightBar),g.default.createElement("div",{className:"al-lo-carousel-vertical-info"},g.default.createElement("div",{className:"al-lo-carousel-vertical-image"},a.customTileImage),g.default.createElement("div",{className:"al-lo-carousel-vertical-details"},a.customTileDetails)))};a.propTypes={highlightBar:d.default.element,
customTileImage:d.default.element,customTileDetails:d.default.element};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details"},g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-title"},a.productTitle),g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-price-badge-container"},
g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-price"},a.productPrice),g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-badge"},a.badge)),g.default.createElement("div",{className:"al-lo-carousel-product-details al-lo-ad-details-deal"},a.productDeal))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,productDeal:d.default.element,badge:d.default.element,className:d.default.string};
f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return{slickSettings:{swipe:!0,slidesToShow:1,slidesToScroll:1,centerMode:!1,centerPadding:"0"},increaseCardWidthForVariation:!0,cssLayout:"al-default-carousel-container-layout",cardWidth:194}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(204));var g=c(a(462)),b=c(a(461)),e=c(a(460));a=c(a(459));f.default={player:{overlayLayout:d.default,
overlayShowMutedIcon:!0,showTitleInOverlay:!1},carousel:{multiPriceSize:"small",slickConfig:g.default,productDetailsLayout:b.default,customTileLayout:e.default,customTileImageStyle:"MobileVerticalCustomTileLayout",productLayout:a.default}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-details-ad-gateway"},g.default.createElement("div",
{className:"al-lo-carousel-product-details-ad-gateway-title"},a.productTitle),a.customerReview&&g.default.createElement("span",{className:"al-lo-carousel-product-details-ad-gateway-review"},a.customerReview),g.default.createElement("div",{className:"al-lo-carousel-product-details-ad-gateway-price-badge-container"},g.default.createElement("div",{className:"al-lo-carousel-product-details-ad-gateway-price"},a.productPrice),g.default.createElement("div",{className:"al-lo-carousel-product-details-ad-gateway-badge"},
a.badge)),g.default.createElement("div",{className:"al-lo-carousel-product-details-ad-gateway-deal"},a.productDeal))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,productDeal:d.default.element,customerReview:d.default.element,badge:d.default.element,className:d.default.string};f.default=a},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return{slickSettings:{swipeToSlide:!1,slidesToShow:1,slidesToScroll:1,centerMode:!1,
centerPadding:"0"},increaseCardWidthForVariation:!0,cssLayout:"al-default-carousel-container-layout",cardWidth:268}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(204));var g=c(a(465));a=c(a(464));f.default={player:{overlayLayout:d.default,overlayShowMutedIcon:!0,showTitleInOverlay:!1},carousel:{alwaysSmallPrice:!0,slickConfig:g.default,productDetailsLayout:a.default}}},function(d,f,a){function c(a){return a&&a.__esModule?
a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(466));var g=c(a(463)),b=c(a(458)),e=c(a(454)),h=c(a(448)),k=c(a(447)),l=c(a(442)),m=c(a(440)),n=c(a(436));a=c(a(435));f.default={mobileAd300x250:d.default,mobileAd414x125:g.default,mobileBrandTile:b.default,mobileFlex:e.default,mobileFlexFullscreen:h.default,desktopAd300x250:k.default,desktopAd970x250:l.default,desktopBrandTile:m.default,desktopFlexBanner:n.default,desktopHeroBanner:a.default}},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-horizontal"},g.default.createElement("div",{className:"al-lo-carousel-horizontal-left"},g.default.createElement("div",{className:"al-lo-carousel-horizontal-image"},a.customTileImage),g.default.createElement("div",{className:"al-lo-carousel-horizontal-details"},a.customTileDetails)))};a.propTypes={highlightBar:d.default.element,
customTileImage:d.default.element,customTileDetails:d.default.element};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd"},g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd-title"},a.productTitle),g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd-review-badge"},
a.customerReview&&g.default.createElement("span",{className:"al-lo-carousel-product-details-dotd-review"},a.customerReview),a.badge&&g.default.createElement("span",{className:"al-lo-carousel-product-details-dotd-badge"},a.badge)),g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd-price"},a.productPrice),g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd-deal"},a.productDeal))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,
productDeal:d.default.element.isRequired,customerReview:d.default.element,badge:d.default.element};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-details-ld"},g.default.createElement("div",{className:"al-lo-carousel-product-details-ld-title"},a.productTitle),g.default.createElement("div",{className:"al-lo-carousel-product-details-ld-review-badge"},
a.customerReview&&g.default.createElement("span",{className:"al-lo-carousel-product-details-ld-review"},a.customerReview),a.badge&&g.default.createElement("span",{className:"al-lo-carousel-product-details-ld-badge"},a.badge)),g.default.createElement("div",{className:"al-lo-carousel-product-details-ld-price"},a.productPrice),g.default.createElement("div",{className:"al-lo-carousel-product-details-ld-deal"},a.productDeal))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,
productDeal:d.default.element.isRequired,customerReview:d.default.element,badge:d.default.element};f.default=a},,,,,,,,,,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(a){return a&&a.__esModule?a:{default:a}}(a(0));f.default=function(a){return c.default.createElement("span",{className:"a-price-range"},a.children)}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d={dashSize:c(a(1)).default.oneOf(["medium",
"large","extra-large","extra-extra-large"])};a=function(a){return g.default.createElement("span",{"aria-hidden":"true",className:"a-price-dash","data-a-size":function(c){switch(a.dashSize){default:case "medium":return"m";case "large":return"l";case "extra-large":return"xl";case "extra-extra-large":return"xxl"}}(),"data-a-color":"base"},"–")};a.propTypes=d;f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));
d=c(a(1));d={altText:d.default.string.isRequired,currencySymbol:d.default.string,wholeValue:d.default.string.isRequired,fractionalValue:d.default.string,decimalSeparator:d.default.string,priceSize:d.default.oneOf(["small","base","medium","large"]),cssClass:d.default.string};a=function(a){return g.default.createElement("span",{className:"a-price "+a.cssClass,"data-a-size":a.priceSize.charAt(0),"data-a-color":"base"},g.default.createElement("span",{className:"a-offscreen"},a.altText),g.default.createElement("span",
{"aria-hidden":"true"},g.default.createElement("span",{className:"a-price-symbol"},a.currencySymbol),g.default.createElement("span",{className:"a-price-whole"},a.wholeValue,g.default.createElement("span",{className:"a-price-decimal"},a.decimalSeparator)),g.default.createElement("span",{className:"a-price-fraction"},function(a){if("number"==typeof a&&(a=a.toString()),"string"==typeof a)for(var b=a.length;2>b;b++)a=a.concat("0");return a}(a.fractionalValue))))};a.propTypes=d;a.defaultProps={currencySymbol:"$",
fractionalValue:"00",decimalSeparator:".",priceSize:"base",cssClass:""};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d=c(a(1));d={iconType:d.default.string.isRequired,iconSize:d.default.oneOf(["mini","small","medium"])};a=function(a){return g.default.createElement("i",{className:"a-icon a-icon-"+a.iconType+" a-icon-"+a.iconSize})};a.propTypes=d;a.defaultProps={iconSize:"medium"};f.default=a},function(d,
f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d=c(a(1));d={iconSize:d.default.oneOf(["mini","small","medium"]),numFullStars:d.default.number.isRequired,hasHalfStar:d.default.bool};a=function(a){var c="a-icon-star-"+a.iconSize,d="a-star-"+a.iconSize+"-"+a.numFullStars;return a.hasHalfStar&&(d+="-5"),g.default.createElement("i",{className:"a-icon  "+c+" "+d})};a.propTypes=d;a.defaultProps={iconSize:"small",hasHalfStar:!1};f.default=
a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d=c(a(1));d={cssClass:d.default.string,spinnerSize:d.default.oneOf(["small","medium"])};a=function(a){return g.default.createElement("div",{className:"a-spinner-wrapper "+a.cssClass},g.default.createElement("span",{className:"a-spinner a-spinner-"+a.spinnerSize}))};a.propTypes=d;a.defaultProps={spinnerSize:"medium",cssClass:""};f.default=a},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d={padding:c(a(1)).default.oneOf("none mini small base medium large extra-large".split(" "))};a=function(a){return g.default.createElement("div",{className:"a-section "+(a.padding?"a-padding-"+a.padding:"")},a.children)};a.propTypes=d;f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||function(a){for(var b=1;b<
arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=c(a(0));d=c(a(1));a=function(a){var c={href:a.url};return a.id&&(c.id=a.id),a.onClick&&(c.onClick=a.onClick),a.target&&(c.target=a.target),b.default.createElement("a",g({className:"a-link-normal"},c),a.children)};a.propTypes={id:d.default.string,url:d.default.string.isRequired,onClick:d.default.string,target:d.default.string};a.defaultProps={id:void 0,onClick:void 0,target:void 0};
f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=c(a(0));d=c(a(1));d={id:g.default.PropTypes.string,cssClass:d.default.string,heading:g.default.PropTypes.string,alertOrientation:g.default.PropTypes.oneOf(["normal","inline"]),alertType:g.default.PropTypes.oneOf(["error","success","warning","info"]),spacing:g.default.PropTypes.oneOf("unspecified none micro mini small base medium large extra-large double-large block".split(" ")),
spacingTop:g.default.PropTypes.oneOf("unspecified micro mini small base medium large extra-large".split(" "))};a={deviceType:g.default.PropTypes.oneOf(["mobile","tablet","desktop"])};var b=function(a,b){return g.default.createElement("div",function(a){var b=["a-box"],c="a-alert",b={className:("inline"===a.alertOrientation&&(c+="-inline"),b.push(c),b.push(c+"-"+a.alertType),a.spacing&&"unspecified"!==a.spacing&&b.push("a-spacing-"+a.spacing),a.spacingTop&&"unspecified"!==a.spacingTop&&b.push("a-spacing-top-"+
a.spacingTop),a.cssClass&&b.push(a.cssClass),b.join(" "))};return a.id&&(b.id=a.id),"error"===a.alertType&&(b["aria-live"]="assertive",b.role="alert"),b}(a),g.default.createElement("div",{className:"a-box-inner a-alert-container"},function(a){if(a.heading&&""!==a.heading)return g.default.createElement("h4",{className:"a-alert-heading"},a.heading)}(a),function(a,c){if("mobile"!==b.deviceType||"inline"===a.alertOrientation)return g.default.createElement("i",{className:"a-icon a-icon-alert"})}(a),g.default.createElement("div",
{className:"a-alert-content"},a.children)))};b.propTypes=d;b.defaultProps={alertOrientation:"normal",alertType:"info"};b.contextTypes=a;b.defaultContext={deviceType:"desktop"};f.default=b},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,
c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(1)),e=c(a(0));d=(c(a(22)),a(3));var h=c(a(205)),k={deviceType:"mobile",marketplaceId:"ATVPDKIKX0DER"};a=(b.default.func,function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}
return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.default.Component),g(b,[{key:"componentDidMount",value:function(){"function"==typeof this.props.componentDidMount&&this.props.componentDidMount()}},{key:"render",value:function(){var a=
this;return e.default.createElement(h.default.PageContext,{deviceType:this.props.deviceType,marketplaceId:this.props.marketplaceId,renderFn:function(){return a.props.children}})}}]),b}());f.default=(0,d.connect)(function(a){a=a["aui-page-context"]||k;return{deviceType:a.deviceType,marketplaceId:a.marketplaceId}})(a)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.HorizontalProductLayout=void 0;d=c(a(1));var g=c(a(0)),b=c(a(8));
a=a(27);d={dealBadge:d.default.element,notification:d.default.element,productImage:d.default.element.isRequired,productDetails:d.default.element.isRequired,productActions:d.default.element,variationSelection:d.default.shape({selectors:d.default.element,actionButton:d.default.element,cancelButton:d.default.element}),removeActionButton:d.default.bool};var e=f.HorizontalProductLayout=function(a){var c=a.removeActionButton?"removeActionButtonStyle":"";return g.default.createElement("div",{className:"al-lo-carousel-horizontal"},
g.default.createElement("div",{className:"al-lo-carousel-horizontal-dealBadge"},a.dealBadge),g.default.createElement("div",{className:"al-lo-carousel-horizontal-notification"},a.notification),g.default.createElement("div",{className:"al-lo-carousel-horizontal-left"},g.default.createElement("div",{className:"al-lo-carousel-horizontal-image"},a.productImage),g.default.createElement("div",{className:"al-lo-carousel-horizontal-details "+c},a.productDetails,!a.removeActionButton&&a.productActions)),!a.removeActionButton&&
a.variationSelection&&g.default.createElement("div",{className:"al-lo-carousel-horizontal-right"},g.default.createElement("div",{className:"al-lo-carousel-horizontal-variation"},a.variationSelection.selectors,g.default.createElement(b.default.GridRow,{cssClass:"al-lo-carousel-horizontal-variation-buttons"},g.default.createElement(b.default.GridColumn,{gridUnits:5,spacing:"none"},a.variationSelection.cancelButton),g.default.createElement(b.default.GridColumn,{gridUnits:7,spacing:"none",position:"last"},
a.variationSelection.actionButton)))))};e.propTypes=d;e.defaultProps={removeActionButton:!1};f.default=(0,a.connectForRemoveActionButtonFeature)(e)},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return{slickSettings:{arrows:!0,touchMove:!1,swipe:!1,swipeToSlide:!1,slidesToShow:1,centerMode:!1,centerPadding:"0",draggable:!1},increaseCardWidthForVariation:!0,cssLayout:"al-default-carousel-container-layout",cardWidth:{cardWidth:321,cardWithSelectorWidth:577,singleDoubleCardWidth:509,
singleDoubleCardWithSelectorWidth:765}}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(492));var g=c(a(491)),b=c(a(470)),e=c(a(469));a=c(a(468));f.default={carousel:{titleMaxLine:2,slickConfig:d.default,expandedSlickConfig:d.default,productLayout:g.default,expandedProductLayout:g.default,productDetailsLightningLayout:b.default,productDetailsDOTDLayout:e.default,customTileLayout:a.default,customTileExpandedLayout:a.default,
customTileImageStyle:"DesktopHorizontalCustomTileLayout",customTileExpandedImageStyle:"DesktopHorizontalCustomTileLayout"}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.HorizontalProductLayout=void 0;d=c(a(1));var g=c(a(0));a=a(27);d={highlightBar:d.default.element,dealBadge:d.default.element,notification:d.default.element,productImage:d.default.element.isRequired,productDetails:d.default.element.isRequired,productActions:d.default.element,
variationSelection:d.default.element,removeActionButton:d.default.bool};var b=f.HorizontalProductLayout=function(a){var b=a.removeActionButton?"removeActionButtonStyle":"";return g.default.createElement("div",{className:"al-lo-carousel-horizontal"},g.default.createElement("div",{className:"al-lo-carousel-horizontal-highlighted"},a.highlightBar),g.default.createElement("div",{className:"al-lo-carousel-horizontal-notification"},a.notification),g.default.createElement("div",{className:"al-lo-carousel-horizontal-info"},
g.default.createElement("div",{className:"al-lo-carousel-horizontal-image"},a.productImage),g.default.createElement("div",{className:"al-lo-carousel-horizontal-details "+b},a.productDetails,!a.removeActionButton&&a.productActions)))};b.propTypes=d;b.defaultProps={removeActionButton:!1};f.default=(0,a.connectForRemoveActionButtonFeature)(b)},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",
{className:"al-lo-carousel-horizontal"},g.default.createElement("div",{className:"al-lo-carousel-horizontal-highlighted"},a.highlightBar),g.default.createElement("div",{className:"al-lo-carousel-horizontal-info"},g.default.createElement("div",{className:"al-lo-carousel-horizontal-image"},a.customTileImage),g.default.createElement("div",{className:"al-lo-carousel-horizontal-details"},a.customTileDetails)))};a.propTypes={highlightBar:d.default.element,customTileImage:d.default.element,customTileDetails:d.default.element};
f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd"},g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd-title"},a.productTitle),g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd-price"},a.productPrice),g.default.createElement("div",{className:"al-lo-carousel-product-details-dotd-deal"},
a.productDeal))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,productDeal:d.default.element.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",{className:"al-lo-carousel-product-details-ld"},g.default.createElement("div",{className:"al-lo-carousel-product-details-ld-title"},a.productTitle),
g.default.createElement("div",{className:"al-lo-carousel-product-details-ld-price"},a.productPrice),g.default.createElement("div",{className:"al-lo-carousel-product-details-ld-deal"},a.productDeal))};a.propTypes={productTitle:d.default.element.isRequired,productPrice:d.default.element.isRequired,productDeal:d.default.element.isRequired};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(1));var g=c(a(0));a=function(a){return g.default.createElement("div",
{className:a.className},g.default.createElement("div",{className:"amaznlv-react-player-gradient-top"}),a.isLive&&g.default.createElement("div",{className:"amaznlv-react-player-gradient-bottom"}),a.controlPanelInfo,g.default.createElement("div",{className:"amazonlive-player-control-buttons"},a.volumeButton,a.closedCaptionButton,a.collapseButton))};a.propTypes={className:d.default.string.isRequired,controlPanelInfo:d.default.element,closedCaptionButton:d.default.element,collapseButton:d.default.element,
isLive:d.default.bool.isRequired,volumeButton:d.default.element};a.defaultProps={controlPanelInfo:void 0,closedCaptionButton:void 0,collapseButton:void 0,volumeButton:void 0};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});d=c(a(498));var g=c(a(206)),b=c(a(497)),e=c(a(496)),h=c(a(495));a=c(a(494));f.default={player:{enableExpand:!1,overlayLayout:d.default},followMeWeb:{animationLength:100,clickToRestore:!0,defaultCorner:"bottom-left",
dismissable:!0,showOverlay:!1},carousel:{singlePriceSize:"large",slickConfig:g.default,productDetailsLightningLayout:b.default,productDetailsDOTDLayout:e.default,customTileLayout:h.default,customTileImageStyle:"MobileHorizontalCustomTileLayout",enableSingleDoubleCardCarousel:!0,productLayout:a.default}}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d=function(a){return a&&a.__esModule?a:{default:a}}(a(0));f.default={player:{enableExpand:!0,enableUnmuteAnywhere:!0,expandOnInteraction:!1,
showControlOverlayOnPlay:!0,showControlOverlayOnUndock:!0,showControlOverlayOnSwitchToLive:!0,showExpandOverlay:!1,showCollapseButton:!1,showOverlayOnMount:!0,showTitleInOverlay:!0,overlayLayout:d.default.createElement("div",null),overlayShowMutedIcon:!1,showChatOnExpand:!1,enterFullscreenOnExpand:!1,collapseOnStreamEnds:!1,collapseOnUnmount:!1,minimizePollWhenCollapsed:!1,vodFullScreen:!1},followMeWeb:{animationLength:500,clickToRestore:!1,defaultCorner:"bottom-right",dismissable:!1,showOverlay:!0},
carousel:{alwaysSmallPrice:!1,singlePriceSize:"medium",multiPriceSize:"medium",defaultPriceSize:"small",priceSpaceCharacter:!0,titleMaxLine:1,slickConfig:function(){},expandedSlickConfig:null,enableOneProductLayout:!1,productLayout:null,productDetailsLayout:null,productDetailsDOTDLayout:null,productDetailsLightningLayout:null,productImageStyle:"base",expandedProductLayout:null,primeBadgeSize:"small",customTileLayout:function(){},customTileExpandedLayout:null,customTileImageStyle:"",customTileExpandedImageStyle:"",
enableSingleDoubleCardCarousel:!1,singleDoubleCardCarouselCenterAlign:!1,goToFirstPositionOnHighlight:!1,showEventDealBadge:!1}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(d,f,a){(function(c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.WidgetVendor=f.userEngagedEnabledComponents=f.availableComponents=void 0;var b=d(a(0)),e=d(a(1)),h=a(3),k=a(222),l=a(15),m=d(a(434)),n=d(a(427)),p=d(a(426)),q=d(a(297)),t=d(a(64)),
u=d(a(296)),v=d(a(295)),r=d(a(294)),y=d(a(292)),B=d(a(289)),A=d(a(285)),x=d(a(283)),C=d(a(282)),D=d(a(281)),F=d(a(280)),z=d(a(279)),E=d(a(278)),G=f.availableComponents={mobileShow:p.default,mobileInlineShoppablePlayer:q.default,mobileEmbedded:v.default,mobileShoppingCarousel:r.default,mobileBrandTile:A.default,mobileAd300x250:D.default,mobileAd414x125:F.default,mobileFlex:z.default,mobileFlexFullscreen:E.default,desktopShow:u.default,desktopInlineShoppablePlayer:t.default,desktopShoppingCarousel:r.default,
desktopHeroBanner:y.default,desktopFlexBanner:B.default,desktopBrandTile:A.default,desktopAd970x250:x.default,desktopAd300x250:C.default},I=f.userEngagedEnabledComponents="mobileShow mobileInlineShoppablePlayer mobileBrandTile mobileFlex mobileFlexFullscreen mobileAd414x125".split(" "),e={componentId:e.default.string.isRequired},p=f.WidgetVendor=function(a){var c=a.componentId;return b.default.createElement(m.default,{componentId:c},function(a){var c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];
(0,l.initConfig)(a,!c);return(c=G[a])?0<=I.indexOf(a)?b.default.createElement(n.default,null,b.default.createElement(c,null)):b.default.createElement(c,null):null}(c,a.testing))};p.propTypes=e;f.default=(0,k.hot)(c)((0,h.connect)(function(a){return{componentId:a["component-id"]}})(p))}).call(this,a(53)(d))},,function(d,f,a){(function(c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=
c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a(0),h=d(e),k=a(3),l=a(13),m=a(222),n=d(a(567)),p=a(38),q=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,e.Component),b(c,[{key:"componentWillMount",value:function(){p.stateManager.initializeIsApp(l.A.capabilities.isAmazonApp)}},
{key:"render",value:function(){return h.default.createElement(k.Provider,{store:p.stateManager.getStore()},h.default.createElement(n.default,null))}}]),c}();f.default=(0,m.hot)(c)(q)}).call(this,a(53)(d))},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,
e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(32)),e=c(a(224)),h=a(223);d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.inViewPercentage=0;e.default.registerSafeFrameMessageEventListener(h.POST_MESSAGE_EVENT_NAME,this.parseSafeFrameMessage())}return g(a,[{key:"parseSafeFrameMessage",value:function(){var a=this;return function(c){if(c=c.data)try{var d=JSON.parse(c),f=d.inViewPercentage;d.hasOwnProperty("inViewPercentage")&&
a.inViewPercentage!==f&&(a.inViewPercentage=f,e.default.dispatchCustomEvent(h.VIEWABILITY_CHANGE_EVENT,d,b.default.getWindow()))}catch(g){}}}},{key:"getInViewPercentage",value:function(){return this.inViewPercentage}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,
d,f){return d&&a(c.prototype,d),f&&a(c,f),c}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(570));d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.viewability=new g.default}return c(a,[{key:"getInViewPercentage",value:function(){return this.viewability.getInViewPercentage()}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=
c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(13)),b=a(2);d=function(){function a(b,c,d,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.url=b;this.attempts=0;this.updateValidPlaylistData=c;this.enableContinuousStreaming=d;this.retries=f}return c(a,[{key:"ajaxHandler",
value:function(){var a=this;g.default.A.ajax(this.url,{method:"get",success:function(c){!a.updateValidPlaylistData(c)&&a.enableContinuousStreaming&&(0,b.setTimeout)(a.ajaxHandler.bind(a),6E4)},error:function(b){a.handleError(b)}})}},{key:"handleError",value:function(a){if(10<=this.attempts||void 0!==this.retries&&this.attempts>=this.retries)console.log("Error connecting");else{var c=300*Math.pow(2,this.attempts);console.log("Error fetching data, error was: "+a+", retrying in "+c+"ms");this.attempts+=
1;(0,b.setTimeout)(this.ajaxHandler.bind(this),c)}}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(f,"__esModule",{value:!0});var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,
c),d&&a(b,d),b}}(),e=c(a(2));c(a(24));var h=function(){function a(){g(this,a)}return b(a,null,[{key:"validDefaultBroadcast",value:function(a,b){return void 0!==a&&0!==a.length&&null!==b.broadcastStatus&&null!=a.asin}},{key:"validGlanceBroadcast",value:function(b,c){return a.validDefaultBroadcast(b,c)}}]),a}();d=function(){function a(){g(this,a)}return b(a,null,[{key:"getBroadcastValidation",value:function(a){return e.default.isWeblabEnabled(a.getState().weblab.glance)?h.validGlanceBroadcast:h.validDefaultBroadcast}},
{key:"checkForNotRenderState",value:function(a,b){return!!(b&&a&&a.broadcastStatus)&&0<b.filter(function(b){return b===a.broadcastStatus}).length}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,
c),d&&a(b,d),b}}(),b=c(a(52)),e=new (c(a(5)).default)("CarouselS3CacheLoader");d=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.carouselDataS3CacheUrl=b;this.productsDataS3CacheUrl=c}return g(a,[{key:"replaceUrlTemplate",value:function(a,b,c){if(a)return a.replace("{broadcastAsin}",b).replace("{carouselHash}",c)}},{key:"getDataAsync",value:function(a){return e.debug("Sending request to "+a),b.default.doGetRequest(a).catch(function(a){throw e.error("Error while fetching data from S3. Error was: "+
a),Error("Error while fetching data from S3. Error was: "+a);})}},{key:"getCarouselDataAsync",value:function(a,b){return e.debug("Fetching carousel data."),this.getDataAsync(this.replaceUrlTemplate(this.carouselDataS3CacheUrl,a,b))}},{key:"getProductsDataAsync",value:function(a,b){return e.debug("Fetching products data."),this.getDataAsync(this.replaceUrlTemplate(this.productsDataS3CacheUrl,a,b))}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(52)),e=c(a(2)),h=new (c(a(5)).default)("AjaxHandler");d=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.ajaxUrl=b}return g(a,[{key:"getDataAsPromise",value:function(a){a=
this.createAjaxUrl(a);return h.debug("Sending request to: "+a),b.default.doGetRequest(a).catch(function(a){h.error("Error while fetching carousel data. Error was:",a)})}},{key:"postDataAsPromise",value:function(a){var c=this.ajaxUrl;return h.debug("Sending request to: "+c),b.default.doPostRequest(c,a).catch(function(a){h.error("Error while posting data. Error was: "+a)})}},{key:"createAjaxUrl",value:function(a){return Array.isArray(a)||(a=[a]),e.default.updateQueryString(this.ajaxUrl,"asin",a.join(","))}}]),
a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(37)),e=c(a(13)),h=c(a(67));d=c(a(5));var k=c(a(2)),l=c(a(96)),m=c(a(18)),n=c(a(24)),p=a(226),q=new d.default("ShoppingCarouselStateUpdateSubscription");
a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"handleCarouselStateChange",value:function(c){(0,b.default)(a.carousel,c)||(e.default.A.trigger(h.default.CAROUSEL_UPDATED,c),a.carousel=c)}},{key:"handleBroadcastChange",value:function(b,c,d){var e=d.metrics&&"internal"===d.metrics.trafficType;b.broadcastAsin!==a.broadcastAsin&&(d=k.default.getNestedValue(d,"weblab.enablePollerS3Cache"),q.debug("Broadcast ASIN changed. Updating carousel state."),
p.shoppingCarouselStateHandler.updateData({data:b,isLive:c,s3CacheTreatment:d,isInternal:e}),a.broadcastAsin=b.broadcastAsin,a.carouselHash=b.hash,a.isLive=c);c!==a.isLive&&(q.debug("Broadcast isLive changed. Updating carousel state."),p.shoppingCarouselStateHandler.setLive(c),a.isLive=c)}},{key:"handleCarouselHashChange",value:function(b){b.hash&&b.hash!==a.carouselHash&&(q.debug("Carousel hash changed. Updating carousel state."),p.shoppingCarouselStateHandler.processNewHashAsync(b.hash),a.carouselHash=
b.hash)}},{key:"handleHighlightedSegmentItemChange",value:function(b,c){var d;c=c&&c.player&&c.player.vodTimeOffsetMS;if(b.vodEvents&&0<b.vodEvents.length&&void 0!==c){b=b.vodEvents;for(var e=null,f=0;f<b.length;f++){var g=b[f];"highlightedSegmentItemId"===g.eventType&&c>g.eventOffsetMS&&(e=g.eventValue)}c=e}else c=b.highlightedSegmentItemId;(d=c)!==a.highlightedSegmentItemId&&(q.debug("Carousel highlighted item changed. Updating carousel state."),p.shoppingCarouselStateHandler.processNewHighlight(d),
a.highlightedSegmentItemId=d)}},{key:"onStateChange",value:function(b){var c=b&&b["shopping-carousel"];a.handleCarouselStateChange(c);var d=l.default.getCurrentBroadcastFromPlaylist(b),d=d&&d.broadcastStatus===n.default.LIVE;(c=c&&c.loadStatus===m.default.SUCCESS&&c.data)&&(a.handleBroadcastChange(c,d,b),a.handleCarouselHashChange(c),a.handleHighlightedSegmentItemChange(c,b))}}]),a}();a.carousel={};f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,
"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(37)),e=c(a(131)),h=void 0;d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"onStateChange",value:function(a){var c={};c.dockState=a.followMe&&
a.followMe.dockState;c.showId=a.currentBroadcast&&a.currentBroadcast.showId;c.domId=a.player&&a.player.domId;c.weblab=a.weblab&&a.weblab.followMeMobileDisplay;c.disabled=a["widget-options"]&&a["widget-options"].isFollowMeDisabled;(0,b.default)(h,c)||(h=c,e.default.updateState(c))}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=
e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(13)),e=c(a(2));d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"onStateChange",value:function(a){var c=e.default.getNestedValue(a,"weblab.enablePollerS3Cache");if("T1"===c||"T2"===c){var d=function(a){if("SUCCESS"===a.playlist.loadStatus&&a.playlist.data.playlist&&
0!==a.playlist.data.playlist.length){var b=a.playlist.data;return b.playlist[b.asinToBroadcastMap[a.currentBroadcast.asin]]}}(a);d&&(a=function(a,b){return a&&a.replace("{broadcastAsin}",b)}(function(a){return a.metrics&&"internal"===a.metrics.trafficType&&e.default.getQueryParameter(r.location.href,"pollerS3CacheUrlOverride")||("SUCCESS"===a.poller.loadStatus?a.poller.data&&a.poller.data.pollerConfig&&a.poller.data.pollerConfig.broadcastStateS3CacheUrl:void 0)}(a),d.asin),"T1"!==c?"T2"===c&&a&&b.default.A.trigger("amazonLiveEvent:pageController:poller:urlOverride",
a):"LIVE"===d.broadcastStatus?a&&b.default.A.trigger("amazonLiveEvent:pageController:poller:urlOverride",a):b.default.A.trigger("amazonLiveEvent:pageController:poller:clearUrlOverride"))}}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.recordAPITimeout=f.recordAPIRequest=void 0;var g=c(a(66)),b=c(a(28)),e=c(a(44)),h=a(21);d=f.recordAPIRequest=function(a,c,d){var f=function(a,b,c){var d=["goldbox"];return c.apiName&&
(d.push(c.apiName),c.version&&d.push(c.version),d.push(b?"success":"error"),d.push(a?"retry":"noretry")),d.push(g.default.getClientID()),d.join(":").toLowerCase()}(a,c,d);e.default.addCount(f);d.latency&&e.default.logCount(f+":time",d.latency);(function(a,d,e){a={WIDGET:"carousel",EVENT_TYPE:c?"dealApiSuccess":"dealApiError",EVENT_TRIGGER_TYPE:e.apiName,CONTEXT:g.default.getClientID(),INT_PAYLOAD:a?1:0,STRING_PAYLOAD:e.version||"",JSON_PAYLOAD:{latency:void 0!==e.latency?e.latency:-1}};b.default.emitMetrics(a,
h.metricsEmitPriority.LOW)})(a,0,d)};a=f.recordAPITimeout=function(a){a="goldbox:ajaxTimeout:retry_"+a+":"+g.default.getClientID();e.default.addCount(a)};f.default={recordAPIRequest:d,recordAPITimeout:a}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.getDealStatus=void 0;var g=a(19),b=c(a(228)),e=c(a(66));d=f.getDealStatus=function(a,c,d){if(a.length){var f=g.AJAXLinks.GET_DEAL_STATUS,n=function(b){b=a.sort().map(function(a){return{dealID:a}});
b={requestMetadata:{marketplaceID:e.default.getMarketplaceID(),clientID:e.default.getClientID()},dealTargets:b,responseSize:"STATUS_ONLY",itemResponseSize:"DEFAULT_WITH_PREEMPTIVE_LEAKING"};var c=e.default.getCustomerID();c&&(b.requestMetadata.customerID=c);c=e.default.getSessionID();return c&&(b.requestMetadata.sessionID=c),b}(),f=b.default.buildAjaxRequestParams(f,n,{success:function(a){c&&c(a.dealStatus)},error:function(a){d&&d(a)}},!0);b.default.callAPI(g.AJAXConfigs.GET_DEAL_STATUS,f)}else c&&
c({})};f.default={getDealStatus:d}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.getDealsStatus=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=a(2),e=a(19),h=c(a(580)),k=new (c(a(5)).default)("Deals Client"),l=void 0,m=void 0,n=void 0,p=function(a){var b={},c=new Date;return a&&Object.keys(a).forEach(function(d){b[d]=
{msCacheTtl:a[d].msCacheTtl||e.AJAXConfigs.GET_DEAL_STATUS.baseRetryInterval,_dealId:a[d]._dealId,_lastError:c}}),b};d=f.getDealsStatus=function(a,c){(function(a){m=m||{};a&&Object.keys(a).forEach(function(b){n&&n[b]?n[b]=a[b]:m[b]=a[b]})}(a),l)||(a=e.ApiConstants.SAFETY_JITTER_BASE+Math.floor(Math.random()*e.ApiConstants.SAFETY_JITTER_MAX),l=(0,b.setTimeout)(function(){n=m;m={};l=void 0;(function(a,c){var d=function(a){var b=new Set;return a&&Object.keys(a).forEach(function(c){b.add(a[c]._dealId)}),
[].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}(b))}(a);if(0>=d.length)k.debug("No dealStatus found to get data");else{var f=function(b){k.debug("Success");b=g({},p(a),function(a){var b={};return a&&Object.keys(a).forEach(function(c){return function(a,b,c){var d=b.dealItemStatus;d&&Object.keys(d).forEach(function(e){c[e]=g({},d[e],{msCacheTtl:b.msCacheTtl,_dealId:a})})}(c,a[c],b)}),b}(b));c(b)},l=function(b){k.error("Error: "+
b);b=p(a);c(b)},m=e.ApiConstants.DEAL_IDS_BATCH_SIZE;k.debug("Getting new deal status for "+d.length+" deals in batches of "+m);(0,b.batchArray)(d,m).forEach(function(a){h.default.getDealStatus(a,f,l)})}})(n,function(){n=void 0;c.apply(void 0,arguments)})},a))};f.default={getDealsStatus:d}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.pollDealsStatus=f.stopPolling=f.isRecognizedCustomer=f.startPolling=void 0;var g=c(a(581)),
b=a(14),e=a(19),h=a(2),k=new (c(a(5)).default)("Deals Poller"),l=void 0;d=f.startPolling=function(a){n();m(a.getState())?(k.info("Start polling"),l=(0,h.setInterval)(function(){p(a.getState(),a.dispatch)},1E3)):k.info("Not polling for unrec customer")};var m=f.isRecognizedCustomer=function(a){return(a=a.metrics&&a.metrics.customerId)&&"0"!==a&&0!==a&&""!==a},n=f.stopPolling=function(){l&&(k.info("Stop polling"),clearInterval(l),l=void 0)},p=f.pollDealsStatus=function(a,c){(a=q(a))&&g.default.getDealsStatus(a,
function(a){return c((0,b.updateMultipleDealItemsStatus)(a))})},q=function(a){var b=(0,h.getNestedValue)(a,"perks.dealItemsStatus"),c=new Date,d=void 0;return b&&Object.keys(b).forEach(function(a){var f=b[a],g;(g=!f._cacheExpires)||(g=f._cacheExpires&&f._cacheExpires<c);!g&&(g=f.customerState===e.CustomerStates.INCART)&&(g=f._incartEnds&&f._incartEnds<c);g&&((d=d||{})[a]=f)}),d};f.default={startPolling:d,stopPolling:n,pollDealsStatus:p}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}
Object.defineProperty(f,"__esModule",{value:!0});var g=a(19),b=c(a(66)),e=c(a(127)),h=c(a(2)),k=new (c(a(5)).default)("DealsInitializeSubscriptor");f.default=function(a,c,d){c=h.default.getNestedValue(a,"metrics.customerId");var f;a:{f=a["is-app"];if(void 0!==f){var q=h.default.getNestedValue(a,"aui-page-context.deviceType");if(void 0!==q){f=f?g.DeviceTypes.APP:"mobile"===q?g.DeviceTypes.MOBILE:g.DeviceTypes.DESKTOP;break a}k.debug("Could not get auiDeviceType from reduxState")}else k.debug("Could not get isApp from reduxState");
f=void 0}c?f?(b.default.initialize(c,f),c="T2"===h.default.getNestedValue(a,"weblab.enableLightningDealsAddToCart"),e.default.setTokenEnabled(c),a=h.default.getNestedValue(a,"aui-page-context.dealsCsrfToken"),e.default.setApiToken(a),d(),k.debug("Initialized and unsubscribed")):k.debug("Could not get deviceType from reduxState"):k.debug("Could not get customerId from reduxState")}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
f.POST_LIVE_POLLER_TTL=void 0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(13)),e=c(a(18)),h=c(a(24)),k=c(a(128)),l=c(a(129)),m=c(a(67)),n=c(a(5)),p=a(2),q="",t=f.POST_LIVE_POLLER_TTL=18E5;d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
!0}return g(a,null,[{key:"onStateChange",value:function(c){var d=new n.default("PollerStreamEnded"),f=c.playlist.data;if(c.playlist.loadStatus===e.default.SUCCESS&&f.playlist){var g=c.currentBroadcast.id;f.playlist[f.asinToBroadcastMap[c.currentBroadcast.asin]].broadcastStatus===h.default.POST_LIVE&&g!==q?c.player&&c.player.status===k.default.STOPPED&&(q=g,d.debug("BroadcastStatus changed to POST_LIVE and player ended"),c["widget-options"]&&c["widget-options"].enableContinuousStreaming?b.default.A.trigger(m.default.CHECK_FOR_LIVE_STREAM):
(0,p.setTimeout)(a.disablePoller,t)):d.debug("broadcast state did not change")}}},{key:"disablePoller",value:function(){b.default.A.trigger(l.default.DISABLED)}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,
d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(18)),e=c(a(129));d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"onStateChange",value:function(a,c,d){if(a.playlist&&a.poller&&a.playlist.loadStatus!==b.default.LOADING&&a.poller.loadStatus!==b.default.LOADING)try{z.register(e.default.ENABLED)}catch(f){console.log(f.message),Globals.A.trigger(e.default.ENABLED)}finally{d()}}}]),a}();f.default=d},function(d,f,a){function c(a){return a&&
a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(f,"__esModule",{value:!0});var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();d=c(a(43));var e=c(a(28)),h=[d.default.DOCKED,d.default.UNDOCKED,d.default.DISMISSED],
k=void 0,l=function(){function a(){g(this,a)}return b(a,null,[{key:"emitEvent",value:function(b,c){-1!==h.indexOf(b)&&function(){var d=a.extractBroadcastId(c);e.default.onSushiMetricsReady(function(a,c){c[a.metricSchema.EVENT_TYPE]=b;c[a.metricSchema.BROADCAST_ID]=d;a.emitMetricsPayload(c)})}()}},{key:"extractBroadcastId",value:function(a){return a.currentBroadcast&&a.currentBroadcast.id||""}}]),a}();a=function(){function a(){g(this,a)}return b(a,null,[{key:"onStateChange",value:function(a){var b=
a.followMe&&a.followMe.dockState;k!==b&&(k=b,l.emitEvent(b,a))}}]),a}();f.default=a},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(f,"__esModule",{value:!0});var b=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&
a(b.prototype,c),d&&a(b,d),b}}(),e=c(a(18)),h=c(a(28)),k=a(21),l=function(){function a(){g(this,a)}return b(a,null,[{key:"pageLoad",value:function(b){h.default.onSushiMetricsReady(function(c,d){d[c.metricSchema.EVENT_TYPE]="pageload";d[c.metricSchema.BROADCAST_ID]=a.extractBroadcastId(b);h.default.shouldEmitMetrics(k.metricsEmitPriority.LOW)&&c.emitMetricsPayload(d)})}},{key:"extractBroadcastId",value:function(a){return a.currentBroadcast&&a.currentBroadcast.id||""}}]),a}();d=function(){function a(){g(this,
a)}return b(a,null,[{key:"onStateChange",value:function(a,b,c){b=a.playlist.loadStatus;b!==e.default.SUCCESS&&b!==e.default.ERROR||(l.pageLoad(a),c())}}]),a}();f.default=d},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,d,f){return d&&a(c.prototype,d),f&&a(c,f),c}}(),g=void 0;d=function(){function a(){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");!0}return c(a,null,[{key:"initialize",value:function(a){if(void 0===g)return g=a,this}},{key:"addSubscriber",value:function(a){void 0!==a&&"function"==typeof a&&function(a){var b=g.subscribe(function(){a(g.getState(),g.dispatch,b)})}(a.onStateChange||a)}},{key:"addSubscribers",value:function(c){c.forEach(function(c){a.addSubscriber(c)})}}]),a}();f.default=d},,,,,,,,,,,,,,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=
function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(c,d,f){return d&&a(c.prototype,d),f&&a(c,f),c}}(),g=function(a){return a&&a.__esModule?a:{default:a}}(a(28));d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return c(a,[{key:"initializeAll",value:function(a){g.default.initialize(a)}}]),a}();f.default=
new d},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=c(a(13)),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&
(b[c]=a[c]);return b.default=a,b}(a(14)),h=c(a(67)),k=c(a(97)),l=a(38),m=a(2);d=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0}return g(a,null,[{key:"registerBroadcastPollEvents",value:function(a,c){b.default.A.on("amazonLiveEvent:"+c+":broadcastStatus",function(b){a.dispatch(e.broadcastStatus(c,b))});b.default.A.on("amazonLiveEvent:"+c+":isLiveBadgeEnabled",function(b){a.dispatch(e.liveBadgeEnabled(c,b))});b.default.A.on("amazonLiveEvent:"+
c+":liveViewers",function(b){a.dispatch(e.liveViewers(c,b))});b.default.A.on("amazonLiveEvent:"+c+":videoMetadata",function(b){a.dispatch(e.videoMetadata(c,b))});b.default.A.on("amazonLiveEvent:"+c+":vods",function(b){a.dispatch(e.vods(c,b))});b.default.A.on("amazonLiveEvent:"+c+":pinnedMessage",function(b){a.dispatch(e.pinnedMessage(c,b))});b.default.A.on("amazonLiveEvent:"+c+":isChatEnabled",function(b){a.dispatch(e.isChatEnabled(c,b))});b.default.A.on("amazonLiveEvent:"+c+":hlsUrl",function(b){a.dispatch(e.hlsUrl(c,
b))});b.default.A.on("amazonLiveEvent:"+c+":vodEvents",function(b){a.dispatch(e.vodEvents(c,b))});b.default.A.on("amazonLiveEvent:"+c+":vibesEvents",function(b){a.dispatch(e.vibesEvents(b))});(0,m.isWeblabEnabled)(a.getState().weblab.enablePoll)&&(0,m.getNestedValue)(a.getState(),"widget-options.enablePoll")&&b.default.A.on("amazonLiveEvent:"+c+":poll",function(b){a.dispatch(e.poll(b))});b.default.A.on("amazonLiveEvent:"+c+":perks",function(b){a.dispatch(e.perks(c,b))});b.default.A.on("amazonLiveEvent:"+
c+":chatStatus",function(b){a.dispatch(e.chatStatus(c,b))});(0,m.setInterval)(function(){a.dispatch(e.cleanUpPerks())},3E3)}},{key:"registerCarouselEvents",value:function(a){b.default.A.on(h.default.CLEANUP_CAROUSEL,function(){a.dispatch(e.cleanupCarousel())});b.default.A.on(h.default.UPDATE_CAROUSEL,function(a){l.stateManager.updateCarousel(a)})}},{key:"registerChatEvents",value:function(a){b.default.A.on(h.default.PEN_NAME_UPDATED,function(b,c){a.dispatch(e.chatPennameUpdated(b,c))})}},{key:"registerConversationEvents",
value:function(a){b.default.A.on(h.default.START_CONVERSATION,function(b){a.dispatch(e.startConversation(b))});b.default.A.on(h.default.MESSAGE_RECEIVED,function(b,c){a.dispatch(e.chatMessageReceived(b,c))});b.default.A.on(h.default.MESSAGE_FILTERED,function(b,c){a.dispatch(e.chatMessageFiltered(b,c))});b.default.A.on(h.default.MESSAGE_REMOVED,function(b,c){a.dispatch(e.chatMessageRemoved(b,c))});b.default.A.on(h.default.DUMP_MESSAGES,function(b,c){a.dispatch(e.chatDumpMessages(b,c))});b.default.A.on(h.default.PEN_NAME_INVALID,
function(b){a.dispatch(e.chatPennameInvalid(b))});b.default.A.on(h.default.RESET_MESSAGES,function(b){a.dispatch(e.chatResetMessages(b))});b.default.A.on(h.default.CURRENT_USER_BANNED,function(b){a.dispatch(e.chatCurrentUserBanned(b))})}},{key:"registerCarouselPollEvents",value:function(a,c){b.default.A.on("amazonLiveEvent:"+c+":shoppingCarouselHash",function(b){a.dispatch(e.carouselHash(c,b))});b.default.A.on("amazonLiveEvent:"+c+":highlightedSegmentItemId",function(b){b&&a.dispatch(e.highlightedSegmentItemId(c,
b))})}},{key:"registerFollowMeEvents",value:function(a){b.default.A.on(k.default.auiEventDidDock,function(){a.dispatch(e.didDock())});b.default.A.on(k.default.auiEventDidUndock,function(){a.dispatch(e.didUndock())});b.default.A.on(k.default.auiEventWillDismiss,function(){a.dispatch(e.willDismiss())});z.when(k.default.smashModuleKey).execute(function(){a.dispatch(e.followMeApiAvailable())})}}]),a}();f.default=d},function(d,f,a){function c(a){if(Array.isArray(a)){for(var c=0,d=Array(a.length);c<a.length;c++)d[c]=
a[c];return d}return Array.from(a)}var g=a(14);d.exports={vibesEvents:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{data:{}},d=arguments[1];switch(d.type){case g.ActionType.VIBES_EVENTS:if(a.data&&a.data.events&&d.vibesEvents&&d.vibesEvents.events){var f=[].concat(c(a.data.events),c(d.vibesEvents.events));if(d.vibesEvents.events=f,0===f.length)return a}return Object.assign({},a,{data:d.vibesEvents});case g.ActionType.REMOVE_VIBES_EVENTS:return a.data&&a.data.events&&d.eventId&&
(a.data.events=a.data.events.filter(function(a){return a.id!==d.eventId})),a;default:return a}}}},function(d,f,a){var c=a(14),g=function(a,b,c){var d=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],f=a.slice();return b.forEach(function(a){a.tag=c;f.push(a)}),d&&(f=f.sort(function(a,b){return a.sortTime-b.sortTime})),f},b=function(a,b,c){var d=a.slice();return g(a,[b],c,0<d.length&&b.sortTime<d[d.length-1].sortTime)};d.exports={conversation:function(){var a=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{},d=arguments[1];switch(d.type){case c.ActionType.MESSAGE_RECEIVED:case c.ActionType.MESSAGE_FILTERED:case c.ActionType.MESSAGE_REMOVED:case c.ActionType.DUMP_MESSAGES:case c.ActionType.RESET_MESSAGES:case c.ActionType.PEN_NAME_INVALID:case c.ActionType.CURRENT_USER_BANNED:return Object.assign({},a,{messages:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=arguments[1];return Object.assign({},a,function(a,b,c){return b in a?Object.defineProperty(a,
b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}({},d.conversationJid,function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],d=arguments[1];switch(d.type){case c.ActionType.RESET_MESSAGES:return[];case c.ActionType.MESSAGE_REMOVED:for(var d=d.message,a=a.slice(),e=0;e<a.length;e+=1)if(a[e].messageId===d.messageId){a.splice(e,1);break}return a;case c.ActionType.DUMP_MESSAGES:return g(a,d.messages,d.type,!0);case c.ActionType.MESSAGE_RECEIVED:case c.ActionType.MESSAGE_FILTERED:return b(a,
d.message,d.type);case c.ActionType.CURRENT_USER_BANNED:case c.ActionType.PEN_NAME_INVALID:return b(a,{},d.type);default:return a}}(a[d.conversationJid],d)))}(a.messages,d)});case c.ActionType.START_CONVERSATION:return Object.assign({},a,{showConversation:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1];switch(b.type){case c.ActionType.START_CONVERSATION:if(!a.includes(b.conversationJid))return a=a.slice(),a.push(b.conversationJid),a;break;default:return a}}(a.showConversation,
d)});default:return a}}}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});f.reset=f.poll=void 0;var c=a(14),g=!0;f.poll=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=arguments[1];switch(d.type){case c.ActionType.POLL:var f=d.data&&a.data&&d.data.id===a.data.id,k=d.data&&a.data&&d.data.ended&&!a.data.ended,a=Object.assign({},a,{data:d.data,collapsed:f?!k&&a.collapsed:!d.data,withPageLoad:g?!(!d.data||!d.data.id):f&&a.withPageLoad});return g=!1,a;case c.ActionType.OPEN_POLL:return Object.assign({},
a,{collapsed:!1});case c.ActionType.COLLAPSE_POLL:return Object.assign({},a,{collapsed:!0});case c.ActionType.SET_CUSTOMER_CHOICE:return d=Object.assign({},a.customerChoices,function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}({},d.pollId,d.choiceId)),Object.assign({},a,{customerChoices:d});default:return a}};f.reset=function(){g=!0}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",
{value:!0});f.updateMultipleDealItemsStatus=f.updateSingleDealItemStatus=f.updateKeys=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=c(a(37)),e=a(19),h=new (c(a(5)).default)("DealItemStatus Reducer"),k=function(a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new Date,d=g({},1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{},b,{_lastUpdate:c,_dealId:a});return b.customerState===e.CustomerStates.INCART&&b.msToCustomerStateExpiry?d._incartEnds=new Date(c.getTime()+parseInt(b.msToCustomerStateExpiry,10)):delete d._incartEnds,b.msCacheTtl?d._cacheExpires=new Date(c.getTime()+parseInt(b.msCacheTtl,10)):delete d._cacheExpires,d};d=f.updateKeys=function(a){if(!a)return a;var c=a.deals||{},d={},f=a.dealItemsStatus||{};Object.keys(c).forEach(function(a){var b=c[a];b.dealType===e.DealTypes.LIGHTNING_DEAL&&
(d[a]=f[a]||k(b.dealId))});var h=g({},a,{dealItemsStatus:d});return(0,b.default)(h,a)?a:h};a=f.updateSingleDealItemStatus=function(a,b,c,d){if(!a||!b||!d)return a;var e=a.dealItemsStatus||{};return e[b]=k(c,e[b],d),g({},a,{dealItemsStatus:e})};var l=f.updateMultipleDealItemsStatus=function(a,b){if(!a||!b)return a;var c=new Date,d=a.dealItemsStatus||{};return Object.keys(b).forEach(function(a){var f=d[a],g=b[a];(function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Date;return a&&
b&&a._dealId&&a._dealId===b._dealId&&!(a._cacheExpires&&a._cacheExpires>c&&a.customerState===e.CustomerStates.INCART)})(f,g,c)?d[a]=k(f._dealId,f,g,c):h.info("Deal item should not be updated for asin: "+a)}),g({},a,{dealItemsStatus:d})};f.default={updateKeys:d,updateSingleDealItemStatus:a,updateMultipleDealItemsStatus:l}},,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});f.perks=f.cleanUpPerksAndUpdateDealItemStatus=f.updatePerksAndDealItemStatus=
f.updatePerks=f.cleanUpPerks=void 0;var g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=c(a(37)),e=a(14),h=c(a(608));a=a(19);var k={},l=[a.DealStates.SOLDOUT,a.DealStates.WAITLISTFULL],m=f.cleanUpPerks=function(a){if(!a)return a;var c=a.deals;if(!c||(0,b.default)({},c))return a;var d={};Object.keys(c).forEach(function(a){var b=c[a];b.endDate&&b.endDate>new Date&&(d[a]=b)});var e=g({},
a,{deals:d});return(0,b.default)(e,a)?a:e},n=f.updatePerks=function(a,c){if(!a)return c;var d=c&&c.deals||{},e=a&&a.deals||{},f=c&&c.dealEndDates||{},h={},k={};Object.keys(e).forEach(function(a){var b=e[a];f[b.dealId]?b.endDate=h[b.dealId]=f[b.dealId]:b.endDate=h[b.dealId]=b.endDate&&new Date(b.endDate);b.endDate&&b.endDate>new Date&&!l.includes(b.state)&&(k[a]=b)});a.throttled&&Object.keys(d).forEach(function(a){k[a]||(k[a]=d[a]);h[d[a].dealId]||(h[d[a].dealId]=d[a].endDate)});a=g({},c,a,{deals:k,
dealEndDates:h});return(0,b.default)(a,c)?c:a},p=f.updatePerksAndDealItemStatus=function(a,b){a=n(a,b);return h.default.updateKeys(a)},q=f.cleanUpPerksAndUpdateDealItemStatus=function(a){a=m(a);return h.default.updateKeys(a)};f=f.perks=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:k,b=arguments[1];switch(b.type){case e.ActionType.PERKS:return p(b.perks,a);case e.ActionType.CLEAN_UP_PERKS:return q(a);case e.ActionType.UPDATE_SINGLE_DEAL_ITEM_STATUS:return h.default.updateSingleDealItemStatus(a,
b.asin,b.dealId,b.dealItemStatus);case e.ActionType.UPDATE_MULTIPLE_DEAL_ITEMS_STATUS:return h.default.updateMultipleDealItemsStatus(a,b.dealItemsStatusMap);default:return a}};d.exports={cleanUpPerks:m,updatePerks:n,perks:f}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}c(a(6));c(a(43));var g=function(a,b){return!b||void 0===b.autoplay||b.autoplay},b=function(a,b,c){return!!c&&(!(!a["aui-page-context"]||"mobile"!==a["aui-page-context"].deviceType)||(b&&void 0!==b.muted?b.muted:
"desktopAd970x250"===a["component-id"]))};d.exports={startAutoPlay:g,startMuted:b,startPolicy:function(a,c){var d=g(0,c);return{autoPlay:d,muted:b(a,c,d)}}}},function(d,f,a){var c=a(612),g=function(a){return a&&a.__esModule?a:{default:a}}(a(2));d.exports={getInitialPlayerState:function(a){if(!a.player||!a.player.ready){var d=(0,c.startPolicy)(a,a["widget-options"]);return Object.assign({},{ready:!0,autoPlay:!1,muted:!0,vodTimeOffsetMS:0,volume:1,closedCaptionEnabled:g.default.isClosedCaptionEnableByDefault(a),
closedCaptionAvailable:!1},d)}return{}}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}var g=c(a(18)),b=c(a(24)),e=a(613),h=a(14),k=a(132);d.exports={setPlaylistData:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,b=arguments[1].data,c=b.playlist;if(!c||0>=c.length)return a;var d=c.reduce(function(a,b,c){return a[b.asin]=c,a},{});return Object.assign({},a,{currentBroadcast:{asin:c[0].asin,id:c[0].id,showId:c[0].showId},playlist:{data:Object.assign({},
b,{asinToBroadcastMap:d}),loadStatus:g.default.SUCCESS},player:Object.assign({},a.player,(0,e.getInitialPlayerState)(a))})},playlist:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{data:{},loadStatus:g.default.LOADING},c=arguments[1];if(!a.data.asinToBroadcastMap||void 0===a.data.asinToBroadcastMap[c.asin])return a;var d=a.data.playlist.slice(),e=a.data.asinToBroadcastMap[c.asin],f=d[e];switch(c.type){case h.ActionType.UPDATE_BROADCAST_STATUS:return b.default[c.status]?(d[e]=
Object.assign({},f,{broadcastStatus:c.status}),(0,k.updateData)(a,{playlist:d})):a;case h.ActionType.LIVE_BADGE_ENABLED:return d[e]=Object.assign({},f,{liveBadgeEnabled:c.enabled}),(0,k.updateData)(a,{playlist:d});case h.ActionType.LIVE_VIEWERS:return d[e]=Object.assign({},f,{liveViewers:c.numViewers}),(0,k.updateData)(a,{playlist:d});case h.ActionType.IS_CHAT_ENABLED:return d[e]=Object.assign({},f,{isChatEnabled:c.enabled}),(0,k.updateData)(a,{playlist:d});case h.ActionType.VIDEO_METADATA:return d[e]=
Object.assign({},f,{videoMetadata:c.videoMetadata}),(0,k.updateData)(a,{playlist:d});case h.ActionType.VODS:return d[e]=Object.assign({},f,{vods:c.vods}),(0,k.updateData)(a,{playlist:d});case h.ActionType.PINNED_MESSAGE:return d[e]=Object.assign({},f,{pinnedMessage:c.pinnedMessage||void 0}),(0,k.updateData)(a,{playlist:d});case h.ActionType.HLS_URL:return d[e]=Object.assign({},f,{hlsUrl:c.hlsUrl}),(0,k.updateData)(a,{playlist:d});case h.ActionType.CHAT_STATUS:return d[e]=Object.assign({},f,{chatStatus:c.chatStatus}),
(0,k.updateData)(a,{playlist:d});default:return a}}}},function(d,f,a){var c=a(14);d.exports={player:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{displayUnmuteEverywhereOverlay:!1},b=arguments[1];switch(b.type){case c.ActionType.SET_PLAYER_DOM_ID:return Object.assign({},a,{domId:b.domId});case c.ActionType.VOD_TIME_OFFSET_UPDATED:return Object.assign({},a,{vodTimeOffsetMS:b.newTimeOffsetMS});case c.ActionType.MUTE:return Object.assign({},a,{muted:!0,volume:b.volume});case c.ActionType.UNMUTE:return Object.assign({},
a,{muted:!1,volume:b.volume});case c.ActionType.CLOSED_CAPTION_ENABLED:return Object.assign({},a,{closedCaptionEnabled:!0});case c.ActionType.CLOSED_CAPTION_DISABLED:return Object.assign({},a,{closedCaptionEnabled:!1});case c.ActionType.CLOSED_CAPTION_AVAILABLE:return Object.assign({},a,{closedCaptionAvailable:b.available});case c.ActionType.SET_PLAYER_EXPANDED:return Object.assign({},a,{expanded:b.playerExpanded});case c.ActionType.SET_SHOULD_DISPLAY_UNMUTE_ANYWHERE_OVERLAY:return Object.assign({},
a,{displayUnmuteEverywhereOverlay:b.display});case c.ActionType.SET_PLAYER_STATUS:return Object.assign({},a,{status:b.status});case c.ActionType.SET_PLAYER_PLAYING:return Object.assign({},a,{playing:b.playing});case c.ActionType.SET_PLAYER_ENGAGED:return Object.assign({},a,{playerEngaged:!0});default:return a}}}},function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}var g=a(14),b=c(a(43));c(a(131));d.exports={followMe:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{dockState:b.default.INITIAL},c=arguments[1],d=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case g.ActionType.FOLLOW_ME_API_AVAILABLE:return Object.assign({},b,{isApiAvailable:!0});case g.ActionType.USER_ENGAGED:return Object.assign({},b,{isUserEngaged:!0});default:return b}}(c,a.conditions);return{dockState:function(a,c,d){switch(c){case b.default.INITIAL:if(d.isApiAvailable&&d.isUserEngaged)return b.default.UNDOCKED;break;case b.default.UNDOCKED:if(a.type===
g.ActionType.DID_DOCK)return b.default.DOCKED;break;case b.default.DOCKED:if(a.type===g.ActionType.DID_UNDOCK)return b.default.UNDOCKED;if(a.type===g.ActionType.WILL_DISMISS)return b.default.DISMISSED}return c}(c,a.dockState,d),conditions:d}}}},function(d,f,a){f=function(a){return a&&a.__esModule?a:{default:a}}(a(18));var c=a(14),g=a(132),b={data:{},loadStatus:f.default.LOADING};d.exports={carousel:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:b,d=arguments[1];switch(d.type){case c.ActionType.CAROUSEL_HASH:return(0,
g.updateData)(a,{hash:d.hash});case c.ActionType.HIGHLIGHTED_SEGMENT_ITEM_ID:return(0,g.updateData)(a,{highlightedSegmentItemId:d.highlightedSegmentItemId});case c.ActionType.SET_VOD_EVENTS:return(0,g.updateData)(a,{vodEvents:d.vodEvents});case c.ActionType.EMIT_GATEWAY_EVENTS:return(0,g.updateData)(a,{hasGatewayEventsEmitted:d.hasGatewayEventsEmitted});case c.ActionType.CLEAN_UP_CAROUSEL:return b;default:return a}}}},function(d,f,a){var c=function(a){return a&&a.__esModule?a:{default:a}}(a(18)),
g=a(14),b=a(132);d.exports={chat:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{data:{penname:""},loadStatus:c.default.LOADING},d=arguments[1];switch(d.type){case g.ActionType.UPDATE_BROADCAST_STATUS:return(0,b.updateData)(a,{broadcastStatus:d.status});case g.ActionType.PEN_NAME_UPDATED:return(0,b.updateData)(a,{penname:d.penname});default:return a}}}},function(d,f,a){var c=function(a){return a&&a.__esModule?a:{default:a}}(a(18));d.exports={setInitialLoadData:function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,b=arguments[1],c={};return c[b.key]=b.data,Object.assign({},a,c)},setDataAndSuccess:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,b=arguments[1],d={};return d[b.key]={},d[b.key].data=b.data,d[b.key].loadStatus=c.default.SUCCESS,Object.assign({},a,d)},setSuccess:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,b=arguments[1],d={};return d[b.key]={},d[b.key].loadStatus=
c.default.SUCCESS,Object.assign({},a,d)}}},function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});var c=a(14);d=function(a){return a&&a.__esModule?a:{default:a}}(a(18));var g=a(619),b=a(618),e=a(617),h=a(616),k=a(615),l=a(614),m=a(611),n=a(607),p=a(606),q=a(605);a(269);var r={currentBroadcast:{},player:{},playlist:{data:{},loadStatus:d.default.LOADING},chat:{data:{},loadStatus:d.default.LOADING},"shopping-carousel":{data:{},loadStatus:d.default.LOADING},poller:{data:{},loadStatus:d.default.LOADING},
mediaclient:{data:{},loadStatus:d.default.LOADING},show:{data:{},loadStatus:d.default.LOADING},"string-translations":{loadStatus:d.default.LOADING},conversation:{}};f.default=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r,d=arguments[1];switch(d.type){case c.ActionType.SET_DATA_AND_SUCCESS:return(0,g.setDataAndSuccess)(a,d);case c.ActionType.SET_SUCCESS:return(0,g.setSuccess)(a,d);case c.ActionType.SET_PLAYLIST_DATA:return(0,l.setPlaylistData)(a,d);case c.ActionType.SET_INITIAL_LOAD_DATA:return(0,
g.setInitialLoadData)(a,d);case c.ActionType.RESET_REDUX:return Object.assign({},a,r);default:return Object.assign({},a,{playlist:(0,l.playlist)(a.playlist,d),player:(0,k.player)(a.player,d),chat:(0,b.chat)(a.chat,d),"shopping-carousel":(0,e.carousel)(a["shopping-carousel"],d),followMe:(0,h.followMe)(a.followMe,d),poll:(0,n.poll)(a.poll,d),perks:(0,m.perks)(a.perks,d),conversation:(0,p.conversation)(a.conversation,d),"vibes-events":(0,q.vibesEvents)(a["vibes-events"],d)})}}},,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(d,f,a){function c(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if((0,q.isWeblabEnabled)((0,q.getNestedValue)(a,"weblab.patchReactGuard"))){var c=b.putListener,d=b.getListener;c&&d&&(b.putListener=function(a,b,d){d&&!d.guarded&&(d.wrapper||(d.wrapper=(0,p.guardErrorWrapper)(d)),d=d.wrapper);for(var e=arguments.length,f=Array(3<e?e-3:0),g=3;g<e;g++)f[g-3]=arguments[g];return c.call.apply(c,[this,a,b,d].concat(f))},b.getListener=
function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(a=d.apply(this,b))&&a.wrapper?a.wrapper:a})}}var b=c(a(0)),e=c(a(22)),h=a(13),k=c(a(44)),l=a(38);d=c(a(5));var m=c(a(569)),n=a(277);a(276);f=a(154);var p=a(4),q=a(2),t=a(56),u=new d.default("bootstrap");k.default.addTimestamp("AmazonLiveReact",k.default.timestampFlags.bodyEnd);var v=function(){k.default.endTimer("AmazonLiveReact")};(0,f.initializePerformance)();var w=function(a,c,d){a&&a.endpoints?(d=document.getElementById(d))?
((0,p.guardError)(function(){l.stateManager.initializeFromPayload(c,a)}),function(a){(0,p.guardError)(g,r.reduxStore.getState(),t);e.default.render(b.default.createElement(m.default,null),a,v)}(d)):u.warn("Could not find dom element to render in"):u.warn("No data endpoints data found")};z.when("A","ready","amazonlive-state-ready").register("amazonlive-react",function(a){return r.reduxStore=l.stateManager.getStore(),(0,h.setAUI)(a),{initLivePage:function(a){if(a&&a.reactPageStates&&a.componentId&&
a.domId){var b=a.reactPageStates,c=a.componentId;a=a.domId;b=(0,n.getAllRemoteStates)(b);w(b,c,a)}else u.error("AmazonLive:initLivePage Incorrect parameters passed in.")},initV2Page:function(a,b){var c=(0,n.getAllPageStates)();w(c,a,b)},initStoresPage:function(a,b){var c=a.reactPageStates;a=a.pageType;c=(0,n.getAllRemoteStates)(c);w(c,a,b)}}})},,,,,,,,,,,,,,,,,,,,,,,,,,function(d,f,a){Object.defineProperty(f,"__esModule",{value:!0});d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:
function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};a=void 0;"object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.ownKeys?f.ownKeys=a=Reflect.ownKeys:f.ownKeys=a="function"==typeof Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames;f.ownKeys=a},function(d,f,a){var c=a(730),g=Function.bind.call(Function.call,
Array.prototype.reduce),b=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),e=Function.bind.call(Function.call,Array.prototype.concat);Object.values||(Object.values=function(a){return g((0,c.ownKeys)(a),function(c,d){return e(c,"string"==typeof d&&b(a,d)?[a[d]]:[])},[])});Object.entries||(Object.entries=function(a){return g((0,c.ownKeys)(a),function(c,d){return e(c,"string"==typeof d&&b(a,d)?[[d,a[d]]]:[])},[])})},function(d,f,a){NodeList.prototype.forEach||(NodeList.prototype.forEach=
function(a,d){d=d||r;for(var b=0;b<this.length;b++)a.call(d,this[b],b,this)})},function(d,f,a){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,d){if(null==this)throw new TypeError('"this" is null or not defined');var b=Object(this),e=b.length>>>0;if(0===e)return!1;d|=0;for(d=Math.max(0<=d?d:e-Math.abs(d),0);d<e;){var f=b[d],k=a;if(f===k||"number"==typeof f&&"number"==typeof k&&isNaN(f)&&isNaN(k))return!0;d++}return!1}})},function(d,f,a){d=a(269);f=(f=a(44))&&
f.__esModule?f:{default:f};(0,d.isBrowserSupported)()?a(704):f.default.addCount("AmazonLiveBrowserUnsupported")}])});